import{j as t,t as e,C as a,n as l,q as s,c as o,w as r,i,o as u,d as c,e as d,A as n,p as f,l as h,u as _,m,F as b,v as w,f as N,g as x}from"./index-C85BGToL.js";import{B as g}from"./BackToDashboardBar.BBeceW6P.js";import{_ as k}from"./_plugin-vue_export-helper.BCo6x5W8.js";const T=k({components:{BackToDashboardBar:g},data:()=>({id:"",loading:!1,errorMsg:"",record:null,vehicleList:[],isAdmin:!1}),computed:{isMulti(){return this.record&&Array.isArray(this.record.out_items)&&this.record.out_items.length},isFlowPrice(){if(!this.record)return!1;const t=(this.record.price_unit||"").toLowerCase();return"m3"===t||"m³"===t},outList(){return this.record?this.isMulti?this.record.out_items||[]:this.record.bottle_no?[{bottle_no:this.record.bottle_no,gross:this.record.gross_weight_out,tare:this.record.tare_weight_out,net:this.record.net_weight_out}]:[]:[]},backList(){return this.record?this.isMulti?this.record.back_items||[]:this.record.return_bottle_no?[{bottle_no:this.record.return_bottle_no,gross:this.record.gross_weight_back,tare:this.record.tare_weight_back,net:this.record.net_weight_back}]:[]:[]},depositNumbers(){return this.record&&this.record.deposit_bottles_raw?String(this.record.deposit_bottles_raw).split(/[\/\s,，]+/).map((t=>t.trim())).filter(Boolean):[]},unitPriceText(){if(!this.record)return"—";const t=this.toNum(this.record.unit_price);if(!t)return"—";const e=(this.record.price_unit||"kg").toLowerCase();return"kg"===e?`${t} 元/kg`:"m3"===e||"m³"===e?`${t} 元/m³`:`${t} 元/瓶`},paymentStatusText(){return this.record?this.isFlowPrice&&this.record.flow_payment_status?this.record.flow_payment_status:this.record.payment_status||"（未填写）":"（未填写）"},isKgPrice(){if(!this.record)return!0;return"kg"===(this.record.price_unit||"kg").toLowerCase()},unitPriceNumber(){if(!this.record)return 0;const t=(this.record.price_unit||"kg").toLowerCase();return"kg"===t||"bottle"===t?this.toNum(this.record.unit_price,0):0},unitPriceNumberText(){const t=this.unitPriceNumber;return t?t.toFixed(2):"0.00"},outNetTotalRaw(){return this.record?"number"==typeof this.record.out_net_total?this.toNum(this.record.out_net_total,0):this.outList.length?this.outList.reduce(((t,e)=>t+this.toNum(e.net,0)),0):this.toNum(this.record.net_weight_out,0):0},outNetTotalText(){return this.outNetTotalRaw.toFixed(2)},backNetTotalRaw(){return this.record?"number"==typeof this.record.back_net_total?this.toNum(this.record.back_net_total,0):this.backList.length?this.backList.reduce(((t,e)=>t+this.toNum(e.net,0)),0):this.toNum(this.record.net_weight_back,0):0},backNetTotalText(){return this.backNetTotalRaw.toFixed(2)},netTotalRaw(){return this.record?"number"==typeof this.record.total_net_weight?this.toNum(this.record.total_net_weight,0):this.outNetTotalRaw-this.backNetTotalRaw:0},netTotalText(){return this.netTotalRaw.toFixed(2)},outAmountRaw(){if(!this.record)return 0;if("number"==typeof this.record.out_amount)return this.toNum(this.record.out_amount,0);const t=this.unitPriceNumber;if(!t)return 0;if(this.isKgPrice)return this.outNetTotalRaw*t;return this.outList.length*t},outAmountText(){return this.outAmountRaw.toFixed(2)},backAmountRaw(){if(!this.record)return 0;if("number"==typeof this.record.back_amount)return this.toNum(this.record.back_amount,0);const t=this.unitPriceNumber;return t&&this.isKgPrice?this.backNetTotalRaw*t:0},backAmountText(){return this.backAmountRaw.toFixed(2)},flowIndexPrevRaw(){return this.record?this.toNum(this.record.flow_index_prev,NaN):NaN},flowIndexCurrRaw(){return this.record?this.toNum(this.record.flow_index_curr,NaN):NaN},flowIndexPrevText(){const t=this.flowIndexPrevRaw;return Number.isNaN(t)?"—":t.toFixed(4)},flowIndexCurrText(){const t=this.flowIndexCurrRaw;return Number.isNaN(t)?"—":t.toFixed(4)},flowVolumeMeterRaw(){if(!this.record)return 0;const t=this.toNum(this.record.flow_volume_m3,NaN);if(!Number.isNaN(t))return t;const e=this.flowIndexPrevRaw,a=this.flowIndexCurrRaw;return!Number.isNaN(e)&&!Number.isNaN(a)&&a>=e?a-e:0},flowVolumeMeterText(){return this.flowVolumeMeterRaw.toFixed(3)},flowConversionRatioRaw(){if(!this.record)return 0;const t=this.toNum(this.record.flow_conversion_ratio,NaN);if(!Number.isNaN(t))return t;const e=this.toNum(this.record.flow_theory_ratio,NaN);return Number.isNaN(e)?0:e},flowConversionRatioText(){const t=this.flowConversionRatioRaw;return t?t.toFixed(3):"—"},flowTheoreticalVolumeRaw(){if(!this.record)return 0;const t=this.toNum(this.record.flow_theoretical_volume_m3,NaN);return Number.isNaN(t)?this.flowConversionRatioRaw?this.outNetTotalRaw*this.flowConversionRatioRaw:0:t},flowTheoreticalVolumeText(){return this.flowTheoreticalVolumeRaw.toFixed(3)},unitPriceFlowNumber(){if(!this.record)return 0;if("number"==typeof this.record.flow_unit_price)return this.toNum(this.record.flow_unit_price,0);const t=(this.record.price_unit||"").toLowerCase();return"m3"===t||"m³"===t?this.toNum(this.record.unit_price,0):0},unitPriceFlowText(){const t=this.unitPriceFlowNumber;return t?t.toFixed(2):"0.00"},flowShouldReceiveRaw(){if(!this.record)return 0;if("number"==typeof this.record.flow_amount_should)return this.toNum(this.record.flow_amount_should,0);const t=this.unitPriceFlowNumber,e=this.flowVolumeMeterRaw;return t&&e?e*t:0},flowShouldReceiveText(){return this.flowShouldReceiveRaw.toFixed(2)},shouldReceiveRaw(){return this.record?this.isFlowPrice?this.flowShouldReceiveRaw:"number"==typeof this.record.should_receive?this.toNum(this.record.should_receive,0):"number"==typeof this.record.amount?this.toNum(this.record.amount,0):this.outAmountRaw-this.backAmountRaw:0},shouldReceiveText(){return this.shouldReceiveRaw.toFixed(2)},amountReceivedRaw(){return this.record?this.isFlowPrice&&"number"==typeof this.record.flow_amount_received?this.toNum(this.record.flow_amount_received,0):this.toNum(this.record.amount_received,0):0},amountReceivedText(){return this.amountReceivedRaw.toFixed(2)},unpaidRaw(){return this.shouldReceiveRaw-this.amountReceivedRaw},unpaidText(){return this.unpaidRaw.toFixed(2)},vehicleText(){if(!this.record)return"—";if(this.record.car_no)return this.record.car_no;if(this.record.vehicle_id&&this.vehicleList.length){const t=this.vehicleList.find((t=>t._id===this.record.vehicle_id));if(t)return t.plate_no&&t.name?`${t.plate_no} - ${t.name}`:t.plate_no||t.name||"—"}return"—"},outNetFormula(){if(!this.outList.length)return`${this.outNetTotalText} kg`;const t=this.outList.map((t=>this.toNum(t.net,NaN))).filter((t=>!Number.isNaN(t)));if(!t.length)return`${this.outNetTotalText} kg`;if(1===t.length)return`${t[0].toFixed(2)} kg`;return`${t.map((t=>t.toFixed(2))).join(" + ")} = ${this.outNetTotalText} kg`},backNetFormula(){if(!this.backList.length)return`${this.backNetTotalText} kg`;const t=this.backList.map((t=>this.toNum(t.net,NaN))).filter((t=>!Number.isNaN(t)));if(!t.length)return`${this.backNetTotalText} kg`;if(1===t.length)return`${t[0].toFixed(2)} kg`;return`${t.map((t=>t>=0?t.toFixed(2):`(${t.toFixed(2)})`)).join(" + ")} = ${this.backNetTotalText} kg`},netTotalFormula(){const t=this.outNetTotalRaw,e=this.backNetTotalRaw,a=t.toFixed(2),l=Math.abs(e).toFixed(2),s=this.netTotalText;return e>0?`${a} - ${l} = ${s} kg`:e<0?`${a} + ${l} = ${s} kg`:`${a} = ${s} kg`},outAmountFormula(){const t=this.unitPriceNumber,e=this.unitPriceNumberText;if(!t)return`${this.outAmountText} 元`;if(this.isKgPrice)return`${this.outNetTotalText} kg × ${e} 元/kg = ${this.outAmountText} 元`;return`${this.outList.length} 瓶 × ${e} 元/瓶 = ${this.outAmountText} 元`},backAmountFormula(){const t=this.unitPriceNumber,e=this.unitPriceNumberText;if(!t||!this.isKgPrice)return`${this.backAmountText} 元`;const a=this.backNetTotalRaw,l=a.toFixed(2);return`${a>=0?l:`(${l})`} kg × ${e} 元/kg = ${this.backAmountText} 元`},shouldReceiveFormula(){const t=this.outAmountText,e=this.backAmountRaw,a=Math.abs(e).toFixed(2),l=this.shouldReceiveText;return e>0?`${t} 元 - ${a} 元 = ${l} 元`:e<0?`${t} 元 + ${a} 元 = ${l} 元`:`${t} 元 = ${l} 元`},flowUseFormula(){const t=this.flowVolumeMeterText,e=this.flowIndexPrevRaw,a=this.flowIndexCurrRaw;return Number.isNaN(e)||Number.isNaN(a)?`${t} m³`:a<e?`${this.flowIndexCurrText} - ${this.flowIndexPrevText} < 0（表计异常，本次按 ${t} m³ 处理）`:`${this.flowIndexCurrText} - ${this.flowIndexPrevText} = ${t} m³`},flowTheoreticalFormula(){const t=this.flowConversionRatioText,e=this.flowTheoreticalVolumeText;return this.flowConversionRatioRaw&&this.outNetTotalRaw?`${this.outNetTotalText} kg × ${t} = ${e} m³`:`${e} m³`},flowAmountFormula(){return`${this.flowVolumeMeterText} m³ × ${this.unitPriceFlowText} 元/m³ = ${this.flowShouldReceiveText} 元`}},onLoad(e){if(this.id=e&&(e.id||e.sale_id)||"",!this.id)return void(this.errorMsg="缺少销售记录 id");const a=t("crm_user")||{};this.isAdmin="admin"===a.role,this.loadVehicles(),this.fetchDetail()},methods:{toNum(t,e=0){if(null===t||""===t||void 0===t)return e;const a=Number(t);return Number.isNaN(a)?e:a},formatNum(t){if(null==t||""===t)return"—";const e=Number(t);return Number.isNaN(e)?String(t):e.toFixed(2)},async loadVehicles(){const a=t("crm_token")||t("token")||"";if(a)try{const t=await e.callFunction({name:"crm-vehicle",data:{action:"list",token:a,data:{}}});t.result&&0===t.result.code&&(this.vehicleList=t.result.data||[])}catch(l){console.error("loadVehicles error",l)}},async fetchDetail(){const a=t("crm_token")||t("token")||"";if(a){this.loading=!0,this.errorMsg="";try{const t=await e.callFunction({name:"crm-sale",data:{action:"get",token:a,data:{id:this.id}}});t.result&&0===t.result.code?(this.record=t.result.data||null,this.record||(this.errorMsg="未找到对应的销售记录")):this.errorMsg=t.result&&t.result.msg||"加载失败"}catch(l){console.error("fetch sale detail error",l),this.errorMsg="请求出错"}finally{this.loading=!1}}else this.errorMsg="未登录或登录已过期"},goBack(){a({delta:1})},goEdit(){this.record&&this.record._id&&l({url:`/pages/sale/edit?id=${this.record._id}`})}}},[["render",function(t,e,a,l,g,k){const T=s("BackToDashboardBar"),R=N,p=i,v=x;return u(),o(p,{class:"sale-detail-page"},{default:r((()=>[c(p,{class:"sale-detail-inner"},{default:r((()=>[c(T,{"back-to":"/pages/sale/list",text:"返回"}),c(p,{class:"page-header"},{default:r((()=>[c(p,{class:"page-header-left"},{default:r((()=>[c(p,{class:"page-icon"},{default:r((()=>[c(R,{class:"page-icon-text"},{default:r((()=>[d("单")])),_:1})])),_:1}),c(p,{class:"page-header-text"},{default:r((()=>[c(R,{class:"page-title"},{default:r((()=>[d("销售记录详情")])),_:1}),c(R,{class:"page-sub"},{default:r((()=>[d(" 查看本次出瓶、回瓶、存瓶与结算信息 ")])),_:1})])),_:1})])),_:1}),c(p,{class:"page-header-right"},{default:r((()=>[g.isAdmin&&!g.loading&&g.record&&!g.errorMsg?(u(),o(v,{key:0,class:"btn-edit-top",onClick:n(k.goEdit,["stop"])},{default:r((()=>[d(" 编辑 ")])),_:1},8,["onClick"])):f("",!0),c(p,{class:"tag-soft"},{default:r((()=>[c(R,{class:"tag-dot"}),c(R,{class:"tag-text"},{default:r((()=>[d(h(g.record?g.record.date||"日期未知":"加载中..."),1)])),_:1})])),_:1})])),_:1})])),_:1}),g.errorMsg?(u(),o(p,{key:0,class:"card"},{default:r((()=>[c(p,{class:"card-body"},{default:r((()=>[c(R,{style:{color:"#dc2626","font-size":"26rpx"}},{default:r((()=>[d(h(g.errorMsg),1)])),_:1})])),_:1})])),_:1})):f("",!0),g.loading&&!g.errorMsg?(u(),o(p,{key:1,class:"card"},{default:r((()=>[c(p,{class:"card-body"},{default:r((()=>[c(R,{style:{color:"#6b7280","font-size":"26rpx"}},{default:r((()=>[d("加载中...")])),_:1})])),_:1})])),_:1})):f("",!0),g.loading||!g.record||g.errorMsg?f("",!0):(u(),_(b,{key:2},[c(p,{class:"card card-basic"},{default:r((()=>[c(p,{class:"card-header"},{default:r((()=>[c(R,{class:"card-title"},{default:r((()=>[d("基础信息")])),_:1})])),_:1}),c(p,{class:"card-body"},{default:r((()=>[c(p,{class:"info-grid"},{default:r((()=>[c(p,{class:"info-cell"},{default:r((()=>[c(R,{class:"info-label"},{default:r((()=>[d("客户")])),_:1}),c(R,{class:"info-value"},{default:r((()=>[d(h(g.record.customer_name||"—"),1)])),_:1})])),_:1}),c(p,{class:"info-cell"},{default:r((()=>[c(R,{class:"info-label"},{default:r((()=>[d("日期")])),_:1}),c(R,{class:"info-value"},{default:r((()=>[d(h(g.record.date||"—"),1)])),_:1})])),_:1}),c(p,{class:"info-cell"},{default:r((()=>[c(R,{class:"info-label"},{default:r((()=>[d("配送员")])),_:1}),c(R,{class:"info-value"},{default:r((()=>[d(h(g.record.delivery_man||"—"),1)])),_:1})])),_:1}),c(p,{class:"info-cell"},{default:r((()=>[c(R,{class:"info-label"},{default:r((()=>[d("车辆")])),_:1}),c(R,{class:"info-value"},{default:r((()=>[d(h(k.vehicleText),1)])),_:1})])),_:1})])),_:1}),c(p,{class:"info-grid"},{default:r((()=>[c(p,{class:"info-cell"},{default:r((()=>[c(R,{class:"info-label"},{default:r((()=>[d("单价")])),_:1}),c(R,{class:"info-value"},{default:r((()=>[d(h(k.unitPriceText),1)])),_:1})])),_:1}),c(p,{class:"info-cell"},{default:r((()=>[c(R,{class:"info-label"},{default:r((()=>[d("付款状态")])),_:1}),c(R,{class:"info-value"},{default:r((()=>[d(h(k.paymentStatusText),1)])),_:1})])),_:1}),c(p,{class:"info-cell"},{default:r((()=>[c(R,{class:"info-label"},{default:r((()=>[d("本次实收")])),_:1}),c(R,{class:"info-value-strong"},{default:r((()=>[d(h(k.amountReceivedText)+" 元",1)])),_:1})])),_:1}),c(p,{class:"info-cell"},{default:r((()=>[c(R,{class:"info-label"},{default:r((()=>[d("未收金额")])),_:1}),c(R,{class:m(["info-value",{"text-danger":k.unpaidRaw>0}])},{default:r((()=>[d(h(k.unpaidText)+" 元 ",1)])),_:1},8,["class"])])),_:1})])),_:1})])),_:1})])),_:1}),c(p,{class:"card"},{default:r((()=>[c(p,{class:"card-header"},{default:r((()=>[c(R,{class:"card-title"},{default:r((()=>[d("出瓶明细")])),_:1}),c(R,{class:"card-sub"},{default:r((()=>[d(" 本次送出的瓶子 "),k.outList.length?(u(),o(R,{key:0},{default:r((()=>[d("（共 "+h(k.outList.length)+" 只）",1)])),_:1})):f("",!0)])),_:1})])),_:1}),c(p,{class:"card-body card-body-table"},{default:r((()=>[k.outList.length?(u(),o(p,{key:1},{default:r((()=>[c(p,{class:"table-header"},{default:r((()=>[c(R,{class:"col-no"},{default:r((()=>[d("瓶号")])),_:1}),c(R,{class:"col-num"},{default:r((()=>[d("毛重")])),_:1}),c(R,{class:"col-num"},{default:r((()=>[d("皮重")])),_:1}),c(R,{class:"col-num"},{default:r((()=>[d("净重")])),_:1})])),_:1}),(u(!0),_(b,null,w(k.outList,((t,e)=>(u(),o(p,{key:"out-"+e,class:"table-row"},{default:r((()=>[c(R,{class:"col-no"},{default:r((()=>[d(h(t.bottle_no||"—"),1)])),_:2},1024),c(R,{class:"col-num"},{default:r((()=>[d(h(k.formatNum(t.gross)),1)])),_:2},1024),c(R,{class:"col-num"},{default:r((()=>[d(h(k.formatNum(t.tare)),1)])),_:2},1024),c(R,{class:"col-num"},{default:r((()=>[d(h(k.formatNum(t.net)),1)])),_:2},1024)])),_:2},1024)))),128)),c(p,{class:"table-summary"},{default:r((()=>[c(R,{class:"summary-label"},{default:r((()=>[d("出瓶净重合计：")])),_:1}),c(R,{class:"summary-value"},{default:r((()=>[d(h(k.outNetTotalText)+" kg",1)])),_:1})])),_:1})])),_:1})):(u(),o(p,{key:0,class:"empty-block"},{default:r((()=>[c(R,{class:"empty-text"},{default:r((()=>[d("无出瓶记录")])),_:1})])),_:1}))])),_:1})])),_:1}),c(p,{class:"card"},{default:r((()=>[c(p,{class:"card-header"},{default:r((()=>[c(R,{class:"card-title"},{default:r((()=>[d("回收瓶明细")])),_:1}),c(R,{class:"card-sub"},{default:r((()=>[d(" 本次从客户处回收的瓶子 "),k.backList.length?(u(),o(R,{key:0},{default:r((()=>[d("（共 "+h(k.backList.length)+" 只）",1)])),_:1})):f("",!0)])),_:1})])),_:1}),c(p,{class:"card-body card-body-table"},{default:r((()=>[k.backList.length?(u(),o(p,{key:1},{default:r((()=>[c(p,{class:"table-header"},{default:r((()=>[c(R,{class:"col-no"},{default:r((()=>[d("瓶号")])),_:1}),c(R,{class:"col-num"},{default:r((()=>[d("毛重")])),_:1}),c(R,{class:"col-num"},{default:r((()=>[d("皮重")])),_:1}),c(R,{class:"col-num"},{default:r((()=>[d("净重")])),_:1})])),_:1}),(u(!0),_(b,null,w(k.backList,((t,e)=>(u(),o(p,{key:"back-"+e,class:"table-row"},{default:r((()=>[c(R,{class:"col-no"},{default:r((()=>[d(h(t.bottle_no||"—"),1)])),_:2},1024),c(R,{class:"col-num"},{default:r((()=>[d(h(k.formatNum(t.gross)),1)])),_:2},1024),c(R,{class:"col-num"},{default:r((()=>[d(h(k.formatNum(t.tare)),1)])),_:2},1024),c(R,{class:"col-num"},{default:r((()=>[d(h(k.formatNum(t.net)),1)])),_:2},1024)])),_:2},1024)))),128)),c(p,{class:"table-summary"},{default:r((()=>[c(R,{class:"summary-label"},{default:r((()=>[d("回瓶净重合计：")])),_:1}),c(R,{class:"summary-value"},{default:r((()=>[d(h(k.backNetTotalText)+" kg",1)])),_:1})])),_:1})])),_:1})):(u(),o(p,{key:0,class:"empty-block"},{default:r((()=>[c(R,{class:"empty-text"},{default:r((()=>[d("无回瓶记录")])),_:1})])),_:1}))])),_:1})])),_:1}),c(p,{class:"card"},{default:r((()=>[c(p,{class:"card-header"},{default:r((()=>[c(R,{class:"card-title"},{default:r((()=>[d("存瓶号")])),_:1}),c(R,{class:"card-sub"},{default:r((()=>[d("当前留在客户处的瓶子（本单记录）")])),_:1})])),_:1}),c(p,{class:"card-body"},{default:r((()=>[k.depositNumbers.length?(u(),o(p,{key:1,class:"deposit-list"},{default:r((()=>[(u(!0),_(b,null,w(k.depositNumbers,((t,e)=>(u(),o(p,{class:"deposit-chip",key:"dep-"+e},{default:r((()=>[c(R,{class:"deposit-text"},{default:r((()=>[d(h(t),1)])),_:2},1024)])),_:2},1024)))),128))])),_:1})):(u(),o(p,{key:0,class:"empty-block"},{default:r((()=>[c(R,{class:"empty-text"},{default:r((()=>[d("无单独记录的存瓶号")])),_:1})])),_:1}))])),_:1})])),_:1}),c(p,{class:"card"},{default:r((()=>[c(p,{class:"card-header"},{default:r((()=>[c(R,{class:"card-title"},{default:r((()=>[d(" 结算汇总（"+h(k.isFlowPrice?"流量结算":"重量结算")+"） ",1)])),_:1})])),_:1}),k.isFlowPrice?(u(),o(p,{key:1,class:"card-body"},{default:r((()=>[c(p,{class:"formula-section"},{default:r((()=>[c(p,{class:"formula-block"},{default:r((()=>[c(R,{class:"formula-title"},{default:r((()=>[d("用气公式")])),_:1}),c(p,{class:"formula-line"},{default:r((()=>[c(R,{class:"formula-label"},{default:r((()=>[d("本次用气量")])),_:1}),c(R,{class:"formula-main"},{default:r((()=>[d(h(k.flowUseFormula),1)])),_:1})])),_:1}),k.flowTheoreticalVolumeRaw>0?(u(),o(p,{key:0,class:"formula-line"},{default:r((()=>[c(R,{class:"formula-label"},{default:r((()=>[d("折算用气（按本次出瓶净重）")])),_:1}),c(R,{class:"formula-main"},{default:r((()=>[d(h(k.flowTheoreticalFormula),1)])),_:1})])),_:1})):f("",!0)])),_:1}),c(p,{class:"formula-block"},{default:r((()=>[c(R,{class:"formula-title"},{default:r((()=>[d("金额公式")])),_:1}),c(p,{class:"formula-line"},{default:r((()=>[c(R,{class:"formula-label"},{default:r((()=>[d("流量应收")])),_:1}),c(R,{class:"formula-main"},{default:r((()=>[d(h(k.flowAmountFormula),1)])),_:1})])),_:1})])),_:1})])),_:1}),c(p,{class:"divider"}),c(p,{class:"info-row"},{default:r((()=>[c(R,{class:"info-label"},{default:r((()=>[d("本次用气量")])),_:1}),c(R,{class:"info-value"},{default:r((()=>[d(h(k.flowVolumeMeterText)+" m³",1)])),_:1})])),_:1}),k.flowTheoreticalVolumeRaw>0?(u(),o(p,{key:0,class:"info-row"},{default:r((()=>[c(R,{class:"info-label"},{default:r((()=>[d("折算用气（参考）")])),_:1}),c(R,{class:"info-value"},{default:r((()=>[d(h(k.flowTheoreticalVolumeText)+" m³ ",1)])),_:1})])),_:1})):f("",!0),c(p,{class:"divider"}),c(p,{class:"info-row"},{default:r((()=>[c(R,{class:"info-label-strong"},{default:r((()=>[d("流量应收")])),_:1}),c(R,{class:"info-value-strong"},{default:r((()=>[d(h(k.flowShouldReceiveText)+" 元 ",1)])),_:1})])),_:1}),c(p,{class:"info-row"},{default:r((()=>[c(R,{class:"info-label"},{default:r((()=>[d("本次实收")])),_:1}),c(R,{class:"info-value"},{default:r((()=>[d(h(k.amountReceivedText)+" 元",1)])),_:1})])),_:1}),c(p,{class:"info-row"},{default:r((()=>[c(R,{class:"info-label"},{default:r((()=>[d("未收金额")])),_:1}),c(R,{class:m(["info-value",{"text-danger":k.unpaidRaw>0}])},{default:r((()=>[d(h(k.unpaidText)+" 元 ",1)])),_:1},8,["class"])])),_:1})])),_:1})):(u(),o(p,{key:0,class:"card-body"},{default:r((()=>[c(p,{class:"formula-section"},{default:r((()=>[c(p,{class:"formula-block"},{default:r((()=>[c(R,{class:"formula-title"},{default:r((()=>[d("重量公式")])),_:1}),c(p,{class:"formula-line"},{default:r((()=>[c(R,{class:"formula-label"},{default:r((()=>[d("出瓶净重")])),_:1}),c(R,{class:"formula-main"},{default:r((()=>[d(h(k.outNetFormula),1)])),_:1})])),_:1}),k.backList.length?(u(),o(p,{key:0,class:"formula-line"},{default:r((()=>[c(R,{class:"formula-label"},{default:r((()=>[d("回瓶净重")])),_:1}),c(R,{class:"formula-main"},{default:r((()=>[d(h(k.backNetFormula),1)])),_:1})])),_:1})):f("",!0),c(p,{class:"formula-line"},{default:r((()=>[c(R,{class:"formula-label"},{default:r((()=>[d("净重合计")])),_:1}),c(R,{class:"formula-main"},{default:r((()=>[d(h(k.netTotalFormula),1)])),_:1})])),_:1})])),_:1}),c(p,{class:"formula-block"},{default:r((()=>[c(R,{class:"formula-title"},{default:r((()=>[d("金额公式")])),_:1}),c(p,{class:"formula-line"},{default:r((()=>[c(R,{class:"formula-label"},{default:r((()=>[d("出瓶应收")])),_:1}),c(R,{class:"formula-main"},{default:r((()=>[d(h(k.outAmountFormula),1)])),_:1})])),_:1}),k.isKgPrice&&0!==k.backNetTotalRaw?(u(),o(p,{key:0,class:"formula-line"},{default:r((()=>[c(R,{class:"formula-label"},{default:r((()=>[d("回瓶结算")])),_:1}),c(R,{class:"formula-main"},{default:r((()=>[d(h(k.backAmountFormula),1)])),_:1})])),_:1})):f("",!0),c(p,{class:"formula-line"},{default:r((()=>[c(R,{class:"formula-label"},{default:r((()=>[d("理论应收")])),_:1}),c(R,{class:"formula-main"},{default:r((()=>[d(h(k.shouldReceiveFormula),1)])),_:1})])),_:1})])),_:1})])),_:1}),c(p,{class:"divider"}),c(p,{class:"info-row"},{default:r((()=>[c(R,{class:"info-label"},{default:r((()=>[d("出瓶净重")])),_:1}),c(R,{class:"info-value"},{default:r((()=>[d(h(k.outNetTotalText)+" kg",1)])),_:1})])),_:1}),c(p,{class:"info-row"},{default:r((()=>[c(R,{class:"info-label"},{default:r((()=>[d("回瓶净重")])),_:1}),c(R,{class:"info-value"},{default:r((()=>[d(h(k.backNetTotalText)+" kg",1)])),_:1})])),_:1}),c(p,{class:"info-row"},{default:r((()=>[c(R,{class:"info-label"},{default:r((()=>[d("净重合计")])),_:1}),c(R,{class:"info-value"},{default:r((()=>[d(h(k.netTotalText)+" kg",1)])),_:1})])),_:1}),c(p,{class:"divider"}),c(p,{class:"info-row"},{default:r((()=>[c(R,{class:"info-label"},{default:r((()=>[d("出瓶金额")])),_:1}),c(R,{class:"info-value"},{default:r((()=>[d(h(k.outAmountText)+" 元",1)])),_:1})])),_:1}),c(p,{class:"info-row"},{default:r((()=>[c(R,{class:"info-label"},{default:r((()=>[d("回瓶金额")])),_:1}),c(R,{class:"info-value"},{default:r((()=>[d(h(k.backAmountText)+" 元 ",1),k.backAmountRaw>0?(u(),o(R,{key:0,class:"hint"},{default:r((()=>[d("（退给客户）")])),_:1})):k.backAmountRaw<0?(u(),o(R,{key:1,class:"hint"},{default:r((()=>[d("（客户补差）")])),_:1})):f("",!0)])),_:1})])),_:1}),c(p,{class:"info-row"},{default:r((()=>[c(R,{class:"info-label-strong"},{default:r((()=>[d("理论应收")])),_:1}),c(R,{class:"info-value-strong"},{default:r((()=>[d(h(k.shouldReceiveText)+" 元",1)])),_:1})])),_:1}),c(p,{class:"info-row"},{default:r((()=>[c(R,{class:"info-label"},{default:r((()=>[d("本次实收")])),_:1}),c(R,{class:"info-value"},{default:r((()=>[d(h(k.amountReceivedText)+" 元",1)])),_:1})])),_:1}),c(p,{class:"info-row"},{default:r((()=>[c(R,{class:"info-label"},{default:r((()=>[d("未收金额")])),_:1}),c(R,{class:m(["info-value",{"text-danger":k.unpaidRaw>0}])},{default:r((()=>[d(h(k.unpaidText)+" 元 ",1)])),_:1},8,["class"])])),_:1})])),_:1}))])),_:1}),c(p,{class:"card"},{default:r((()=>[c(p,{class:"card-header"},{default:r((()=>[c(R,{class:"card-title"},{default:r((()=>[d("备注")])),_:1})])),_:1}),c(p,{class:"card-body"},{default:r((()=>[c(R,{class:"remark-text"},{default:r((()=>[d(h(g.record.remark||"暂无备注"),1)])),_:1})])),_:1})])),_:1})],64))])),_:1})])),_:1})}],["__scopeId","data-v-8be06b57"]]);export{T as default};
