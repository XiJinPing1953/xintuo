import{l as t,m as e,r as a,u as l,t as s,n as o,v as r,c as i,w as u,i as c,o as d,d as n,e as f,B as h,q as _,f as m,x as b,p as w,F as g,y as p,g as T,j as k}from"./index-B6DdPhlT.js";import{B as N}from"./BackToDashboardBar.0jhbkRhX.js";import{_ as x,e as y,g as v,i as R,f as F}from"./_plugin-vue_export-helper.Dda_PF8M.js";const A=x({components:{BackToDashboardBar:N},data:()=>({id:"",loading:!1,errorMsg:"",record:null,vehicleList:[],isAdmin:!1,customerDeposits:[]}),computed:{isMulti(){return this.record&&Array.isArray(this.record.out_items)&&this.record.out_items.length},isFlowPrice(){if(!this.record)return!1;const t=(this.record.price_unit||"").toLowerCase();return"m3"===t||"m³"===t},outNetFormula(){return`${this.outNetTotalText} kg`},backNetFormula(){return`${this.backNetTotalText} kg`},netTotalFormula(){return`${this.outNetTotalText} - ${this.backNetTotalText} = ${this.netTotalText} kg`},outAmountFormula(){return this.isKgPrice?`${this.outNetTotalText} × ${this.unitPriceNumberText} = ${this.outAmountText} 元`:`${this.outList.length} × ${this.unitPriceNumberText} = ${this.outAmountText} 元`},backAmountFormula(){return this.isKgPrice?`${this.backNetTotalText} × ${this.unitPriceNumberText} = ${this.backAmountText} 元`:`${this.backAmountText} 元`},shouldReceiveFormula(){return`${this.outAmountText} - ${this.backAmountText} = ${this.shouldReceiveText} 元`},flowTheoryRatio(){if(!this.record)return 0;const t=Number(this.record.flow_theory_ratio);return Number.isNaN(t)?0:t},flowTheoryRatioText(){return this.flowTheoryRatio?this.flowTheoryRatio.toFixed(2):"0.00"},flowTheoreticalVolumeRaw(){return this.record?null!=this.record.flow_theoretical_volume_m3?this.toNum(this.record.flow_theoretical_volume_m3,0):this.netTotalRaw*this.flowTheoryRatio:0},flowTheoreticalVolumeText(){return this.flowTheoreticalVolumeRaw.toFixed(2)},flowUseFormula(){const t=this.toNum(this.record&&this.record.flow_index_prev,null),e=this.toNum(this.record&&this.record.flow_index_curr,null);return null!=t&&null!=e&&e>=t?`${e} - ${t} = ${this.flowVolumeMeterText} m³`:`${this.flowVolumeMeterText} m³`},flowTheoreticalFormula(){return`${this.netTotalText} kg × ${this.flowTheoryRatioText} = ${this.flowTheoreticalVolumeText} m³`},flowAmountFormula(){return`${this.flowVolumeMeterText} × ${this.unitPriceFlowText} = ${this.flowShouldReceiveText} 元`},outList(){return this.record?this.isMulti?this.record.out_items||[]:this.record.bottle_no?[{bottle_no:this.record.bottle_no,gross:this.record.gross_weight_out,tare:this.record.tare_weight_out,net:this.record.net_weight_out}]:[]:[]},backList(){return this.record?this.isMulti?this.record.back_items||[]:this.record.return_bottle_no?[{bottle_no:this.record.return_bottle_no,gross:this.record.gross_weight_back,tare:this.record.tare_weight_back,net:this.record.net_weight_back}]:[]:[]},depositNumbers(){const t=this.normalizeDepositList(this.customerDeposits);return t.length?t:this.record&&this.record.deposit_bottles_raw?this.normalizeDepositList(this.record.deposit_bottles_raw):[]},unitPriceText(){if(!this.record)return"—";const t=this.toNum(this.record.unit_price);if(!t)return"—";const e=(this.record.price_unit||"kg").toLowerCase();return"kg"===e?`${t} 元/kg`:"m3"===e||"m³"===e?`${t} 元/m³`:`${t} 元/瓶`},paymentStatusText(){return this.record?this.isFlowPrice&&this.record.flow_payment_status?this.record.flow_payment_status:this.record.payment_status||"—":"—"},unitPriceNumber(){if(!this.record)return 0;const t=(this.record.price_unit||"kg").toLowerCase();return"kg"===t||"bottle"===t?this.toNum(this.record.unit_price,0):0},unitPriceNumberText(){return this.unitPriceNumber.toFixed(2)},outNetTotalRaw(){return this.record?"number"==typeof this.record.out_net_total?this.toNum(this.record.out_net_total):this.outList.length?this.outList.reduce(((t,e)=>t+this.toNum(e.net)),0):this.toNum(this.record.net_weight_out,0):0},outNetTotalText(){return this.outNetTotalRaw.toFixed(2)},backNetTotalRaw(){return this.record?"number"==typeof this.record.back_net_total?this.toNum(this.record.back_net_total):this.backList.length?this.backList.reduce(((t,e)=>t+this.toNum(e.net)),0):this.toNum(this.record.net_weight_back,0):0},backNetTotalText(){return this.backNetTotalRaw.toFixed(2)},netTotalRaw(){return this.record?"number"==typeof this.record.total_net_weight?this.toNum(this.record.total_net_weight):this.outNetTotalRaw-this.backNetTotalRaw:0},netTotalText(){return this.netTotalRaw.toFixed(2)},outAmountRaw(){return this.record?"number"==typeof this.record.out_amount?this.toNum(this.record.out_amount):this.isKgPrice?this.outNetTotalRaw*this.unitPriceNumber:this.outList.length*this.unitPriceNumber:0},outAmountText(){return this.outAmountRaw.toFixed(2)},backAmountRaw(){return this.record?"number"==typeof this.record.back_amount?this.toNum(this.record.back_amount):this.isKgPrice?this.backNetTotalRaw*this.unitPriceNumber:0:0},backAmountText(){return this.backAmountRaw.toFixed(2)},isKgPrice(){if(!this.record)return!0;return"kg"===(this.record.price_unit||"kg").toLowerCase()},flowVolumeMeterRaw(){if(!this.record)return 0;const t=this.toNum(this.record.flow_volume_m3,NaN);if(!Number.isNaN(t))return t;const e=this.toNum(this.record.flow_index_prev,NaN),a=this.toNum(this.record.flow_index_curr,NaN);return!Number.isNaN(e)&&!Number.isNaN(a)&&a>=e?a-e:0},flowVolumeMeterText(){return this.flowVolumeMeterRaw.toFixed(3)},unitPriceFlowNumber(){if(!this.record)return 0;if("number"==typeof this.record.flow_unit_price)return this.toNum(this.record.flow_unit_price);const t=(this.record.price_unit||"").toLowerCase();return"m3"===t||"m³"===t?this.toNum(this.record.unit_price):0},unitPriceFlowText(){return this.unitPriceFlowNumber.toFixed(2)},flowShouldReceiveRaw(){return this.record?"number"==typeof this.record.flow_amount_should?this.toNum(this.record.flow_amount_should):this.flowVolumeMeterRaw*this.unitPriceFlowNumber:0},flowShouldReceiveText(){return this.flowShouldReceiveRaw.toFixed(2)},shouldReceiveRaw(){return this.record?this.isFlowPrice?this.flowShouldReceiveRaw:"number"==typeof this.record.should_receive?this.toNum(this.record.should_receive):this.outAmountRaw-this.backAmountRaw:0},shouldReceiveText(){return this.shouldReceiveRaw.toFixed(2)},amountReceivedRaw(){return this.record?this.isFlowPrice&&"number"==typeof this.record.flow_amount_received?this.toNum(this.record.flow_amount_received):this.toNum(this.record.amount_received):0},amountReceivedText(){return this.amountReceivedRaw.toFixed(2)},unpaidRaw(){return this.shouldReceiveRaw-this.amountReceivedRaw},unpaidText(){return this.unpaidRaw.toFixed(2)},vehicleText(){if(!this.record)return"—";if(this.record.car_no)return this.record.car_no;if(this.record.vehicle_id&&this.vehicleList.length){const t=this.vehicleList.find((t=>t._id===this.record.vehicle_id));if(t)return t.plate_no&&t.name?`${t.plate_no} - ${t.name}`:t.plate_no||t.name||"—"}return"—"}},onLoad(s){if(this.id=s&&(s.id||s.sale_id)||"",!this.id)return void(this.errorMsg="缺少销售记录 id");if(!y())return void t({title:"提示",content:"登录已过期，请重新登录",showCancel:!1,success:()=>{e(),a({url:"/pages/login/login"})}});const o=v()||{};this.isAdmin=R(o),this.isAdmin?(this.loadVehicles(),this.fetchDetail()):t({title:"无权限",content:"当前账号无权查看销售记录详情",showCancel:!1,success:()=>{l({delta:1})}})},onShow(){if(!y())return;const e=v()||{};R(e)||t({title:"无权限",content:"当前账号无权查看销售记录详情",showCancel:!1,success:()=>{l()}})},methods:{handleAuthError(l){const s=l&&l.result&&l.result.code,o=l&&l.result&&l.result.msg;return!(401!==s&&!(null==o?void 0:o.includes("未登录"))&&!(null==o?void 0:o.includes("过期")))&&(t({title:"提示",content:o||"登录已过期，请重新登录",showCancel:!1,success:()=>{e(),a({url:"/pages/login/login"})}}),!0)},normalizeDepositList:t=>"string"==typeof t?String(t).split(/[\/\s,，]+/).map((t=>t.trim())).filter(Boolean):(t||[]).map((t=>"string"==typeof t?t.trim():t&&"object"==typeof t?String(t.bottle_no||t.number||"").trim():"")).filter(Boolean),toNum(t,e=0){if(""===t||null==t)return e;const a=Number(t);return isNaN(a)?e:a},formatNum(t){const e=Number(t);return Number.isNaN(e)?"--":e.toFixed(2)},async loadVehicles(){const t=F();if(t)try{const e=await s.callFunction({name:"crm-vehicle",data:{action:"list",token:t,data:{}}});e.result&&0===e.result.code&&(this.vehicleList=e.result.data||[])}catch(e){console.error("loadVehicles error",e)}},async loadCustomerDeposits(t){var e;if(this.customerDeposits=[],t)try{const a=F();if(!a)return;const l=await s.callFunction({name:"crm-sale",data:{action:"customerDeposits",token:a,data:{customerId:t}}});if(this.handleAuthError(l))return;0===(null==(e=l.result)?void 0:e.code)&&Array.isArray(l.result.data)&&(this.customerDeposits=l.result.data)}catch(a){console.error("loadCustomerDeposits error",a)}},async fetchDetail(){var t;const e=F();if(e){this.loading=!0,this.errorMsg="";try{const a=await s.callFunction({name:"crm-sale",data:{action:"get",token:e,data:{id:this.id}}});if(this.handleAuthError(a))return;a.result&&0===a.result.code?(this.record=a.result.data||null,this.record?await this.loadCustomerDeposits(this.record.customer_id||this.record.customerId):this.errorMsg="未找到对应的销售记录"):this.errorMsg=(null==(t=a.result)?void 0:t.msg)||"加载失败"}catch(a){console.error("fetch detail error",a),this.errorMsg="请求出错"}finally{this.loading=!1}}else this.errorMsg="未登录或登录已过期"},goEdit(){this.record&&this.record._id&&o({url:`/pages/sale/edit?id=${this.record._id}`})},goBack(){l({delta:1})}}},[["render",function(t,e,a,l,s,o){const N=r("BackToDashboardBar"),x=T,y=c,v=k;return d(),i(y,{class:"sale-detail-page"},{default:u((()=>[n(y,{class:"sale-detail-inner"},{default:u((()=>[n(N,{"back-to":"/pages/sale/list",text:"返回"}),n(y,{class:"page-header"},{default:u((()=>[n(y,{class:"page-header-left"},{default:u((()=>[n(y,{class:"page-icon"},{default:u((()=>[n(x,{class:"page-icon-text"},{default:u((()=>[f("单")])),_:1})])),_:1}),n(y,{class:"page-header-text"},{default:u((()=>[n(x,{class:"page-title"},{default:u((()=>[f("销售记录详情")])),_:1}),n(x,{class:"page-sub"},{default:u((()=>[f(" 查看本次出瓶、回瓶、存瓶与结算信息 ")])),_:1})])),_:1})])),_:1}),n(y,{class:"page-header-right"},{default:u((()=>[s.isAdmin&&!s.loading&&s.record&&!s.errorMsg?(d(),i(v,{key:0,class:"btn-edit-top",onClick:h(o.goEdit,["stop"])},{default:u((()=>[f(" 编辑 ")])),_:1},8,["onClick"])):_("",!0),n(y,{class:"tag-soft"},{default:u((()=>[n(x,{class:"tag-dot"}),n(x,{class:"tag-text"},{default:u((()=>[f(m(s.record?s.record.date||"日期未知":"加载中..."),1)])),_:1})])),_:1})])),_:1})])),_:1}),s.errorMsg?(d(),i(y,{key:0,class:"card"},{default:u((()=>[n(y,{class:"card-body"},{default:u((()=>[n(x,{style:{color:"#dc2626","font-size":"26rpx"}},{default:u((()=>[f(m(s.errorMsg),1)])),_:1})])),_:1})])),_:1})):_("",!0),s.loading&&!s.errorMsg?(d(),i(y,{key:1,class:"card"},{default:u((()=>[n(y,{class:"card-body"},{default:u((()=>[n(x,{style:{color:"#6b7280","font-size":"26rpx"}},{default:u((()=>[f("加载中...")])),_:1})])),_:1})])),_:1})):_("",!0),s.loading||!s.record||s.errorMsg?_("",!0):(d(),b(g,{key:2},[n(y,{class:"card card-basic"},{default:u((()=>[n(y,{class:"card-header"},{default:u((()=>[n(x,{class:"card-title"},{default:u((()=>[f("基础信息")])),_:1})])),_:1}),n(y,{class:"card-body"},{default:u((()=>[n(y,{class:"info-grid"},{default:u((()=>[n(y,{class:"info-cell"},{default:u((()=>[n(x,{class:"info-label"},{default:u((()=>[f("客户")])),_:1}),n(x,{class:"info-value"},{default:u((()=>[f(m(s.record.customer_name||"—"),1)])),_:1})])),_:1}),n(y,{class:"info-cell"},{default:u((()=>[n(x,{class:"info-label"},{default:u((()=>[f("日期")])),_:1}),n(x,{class:"info-value"},{default:u((()=>[f(m(s.record.date||"—"),1)])),_:1})])),_:1}),n(y,{class:"info-cell"},{default:u((()=>[n(x,{class:"info-label"},{default:u((()=>[f("配送员")])),_:1}),n(x,{class:"info-value"},{default:u((()=>[f(m(s.record.delivery_man||"—"),1)])),_:1})])),_:1}),n(y,{class:"info-cell"},{default:u((()=>[n(x,{class:"info-label"},{default:u((()=>[f("车辆")])),_:1}),n(x,{class:"info-value"},{default:u((()=>[f(m(o.vehicleText),1)])),_:1})])),_:1})])),_:1}),n(y,{class:"info-grid"},{default:u((()=>[n(y,{class:"info-cell"},{default:u((()=>[n(x,{class:"info-label"},{default:u((()=>[f("单价")])),_:1}),n(x,{class:"info-value"},{default:u((()=>[f(m(o.unitPriceText),1)])),_:1})])),_:1}),n(y,{class:"info-cell"},{default:u((()=>[n(x,{class:"info-label"},{default:u((()=>[f("付款状态")])),_:1}),n(x,{class:"info-value"},{default:u((()=>[f(m(o.paymentStatusText),1)])),_:1})])),_:1}),n(y,{class:"info-cell"},{default:u((()=>[n(x,{class:"info-label"},{default:u((()=>[f("本次实收")])),_:1}),n(x,{class:"info-value-strong"},{default:u((()=>[f(m(o.amountReceivedText)+" 元",1)])),_:1})])),_:1}),n(y,{class:"info-cell"},{default:u((()=>[n(x,{class:"info-label"},{default:u((()=>[f("未收金额")])),_:1}),n(x,{class:w(["info-value",{"text-danger":o.unpaidRaw>0}])},{default:u((()=>[f(m(o.unpaidText)+" 元 ",1)])),_:1},8,["class"])])),_:1})])),_:1}),n(y,{class:"deposit-inline-block"},{default:u((()=>[n(x,{class:"info-label"},{default:u((()=>[f("存瓶清单 "),o.depositNumbers.length?(d(),i(x,{key:0},{default:u((()=>[f("（共 "+m(o.depositNumbers.length)+" 只）",1)])),_:1})):_("",!0)])),_:1}),o.depositNumbers.length?(d(),i(y,{key:0,class:"deposit-inline-list"},{default:u((()=>[(d(!0),b(g,null,p(o.depositNumbers,((t,e)=>(d(),i(y,{class:"deposit-inline-chip",key:"dep-inline-"+e},{default:u((()=>[f(m(t),1)])),_:2},1024)))),128))])),_:1})):(d(),i(x,{key:1,class:"info-value info-muted"},{default:u((()=>[f("暂无存瓶记录")])),_:1}))])),_:1})])),_:1})])),_:1}),n(y,{class:"card"},{default:u((()=>[n(y,{class:"card-header"},{default:u((()=>[n(x,{class:"card-title"},{default:u((()=>[f("出瓶明细")])),_:1}),n(x,{class:"card-sub"},{default:u((()=>[f(" 本次送出的瓶子 "),o.outList.length?(d(),i(x,{key:0},{default:u((()=>[f("（共 "+m(o.outList.length)+" 只）",1)])),_:1})):_("",!0)])),_:1})])),_:1}),n(y,{class:"card-body card-body-table"},{default:u((()=>[o.outList.length?(d(),i(y,{key:1},{default:u((()=>[n(y,{class:"table-header"},{default:u((()=>[n(x,{class:"col-no"},{default:u((()=>[f("瓶号")])),_:1}),n(x,{class:"col-num"},{default:u((()=>[f("毛重")])),_:1}),n(x,{class:"col-num"},{default:u((()=>[f("皮重")])),_:1}),n(x,{class:"col-num"},{default:u((()=>[f("净重")])),_:1})])),_:1}),(d(!0),b(g,null,p(o.outList,((t,e)=>(d(),i(y,{key:"out-"+e,class:"table-row"},{default:u((()=>[n(x,{class:"col-no"},{default:u((()=>[f(m(t.bottle_no||"—"),1)])),_:2},1024),n(x,{class:"col-num"},{default:u((()=>[f(m(o.formatNum(t.gross)),1)])),_:2},1024),n(x,{class:"col-num"},{default:u((()=>[f(m(o.formatNum(t.tare)),1)])),_:2},1024),n(x,{class:"col-num"},{default:u((()=>[f(m(o.formatNum(t.net)),1)])),_:2},1024)])),_:2},1024)))),128)),n(y,{class:"table-summary"},{default:u((()=>[n(x,{class:"summary-label"},{default:u((()=>[f("出瓶净重合计：")])),_:1}),n(x,{class:"summary-value"},{default:u((()=>[f(m(o.outNetTotalText)+" kg",1)])),_:1})])),_:1})])),_:1})):(d(),i(y,{key:0,class:"empty-block"},{default:u((()=>[n(x,{class:"empty-text"},{default:u((()=>[f("无出瓶记录")])),_:1})])),_:1}))])),_:1})])),_:1}),n(y,{class:"card"},{default:u((()=>[n(y,{class:"card-header"},{default:u((()=>[n(x,{class:"card-title"},{default:u((()=>[f("回收瓶明细")])),_:1}),n(x,{class:"card-sub"},{default:u((()=>[f(" 本次从客户处回收的瓶子 "),o.backList.length?(d(),i(x,{key:0},{default:u((()=>[f("（共 "+m(o.backList.length)+" 只）",1)])),_:1})):_("",!0)])),_:1})])),_:1}),n(y,{class:"card-body card-body-table"},{default:u((()=>[o.backList.length?(d(),i(y,{key:1},{default:u((()=>[n(y,{class:"table-header"},{default:u((()=>[n(x,{class:"col-no"},{default:u((()=>[f("瓶号")])),_:1}),n(x,{class:"col-num"},{default:u((()=>[f("毛重")])),_:1}),n(x,{class:"col-num"},{default:u((()=>[f("皮重")])),_:1}),n(x,{class:"col-num"},{default:u((()=>[f("净重")])),_:1})])),_:1}),(d(!0),b(g,null,p(o.backList,((t,e)=>(d(),i(y,{key:"back-"+e,class:"table-row"},{default:u((()=>[n(x,{class:"col-no"},{default:u((()=>[f(m(t.bottle_no||"—"),1)])),_:2},1024),n(x,{class:"col-num"},{default:u((()=>[f(m(o.formatNum(t.gross)),1)])),_:2},1024),n(x,{class:"col-num"},{default:u((()=>[f(m(o.formatNum(t.tare)),1)])),_:2},1024),n(x,{class:"col-num"},{default:u((()=>[f(m(o.formatNum(t.net)),1)])),_:2},1024)])),_:2},1024)))),128)),n(y,{class:"table-summary"},{default:u((()=>[n(x,{class:"summary-label"},{default:u((()=>[f("回瓶净重合计：")])),_:1}),n(x,{class:"summary-value"},{default:u((()=>[f(m(o.backNetTotalText)+" kg",1)])),_:1})])),_:1})])),_:1})):(d(),i(y,{key:0,class:"empty-block"},{default:u((()=>[n(x,{class:"empty-text"},{default:u((()=>[f("无回瓶记录")])),_:1})])),_:1}))])),_:1})])),_:1}),n(y,{class:"card"},{default:u((()=>[n(y,{class:"card-header"},{default:u((()=>[n(x,{class:"card-title"},{default:u((()=>[f("存瓶号")])),_:1}),n(x,{class:"card-sub"},{default:u((()=>[f("当前留在客户处的瓶子"),o.depositNumbers.length?(d(),i(x,{key:0},{default:u((()=>[f("（共 "+m(o.depositNumbers.length)+" 只）",1)])),_:1})):_("",!0)])),_:1})])),_:1}),n(y,{class:"card-body"},{default:u((()=>[o.depositNumbers.length?(d(),i(y,{key:1,class:"deposit-list"},{default:u((()=>[(d(!0),b(g,null,p(o.depositNumbers,((t,e)=>(d(),i(y,{class:"deposit-chip",key:"dep-"+e},{default:u((()=>[n(x,{class:"deposit-text"},{default:u((()=>[f(m(t),1)])),_:2},1024)])),_:2},1024)))),128))])),_:1})):(d(),i(y,{key:0,class:"empty-block"},{default:u((()=>[n(x,{class:"empty-text"},{default:u((()=>[f("无单独记录的存瓶号")])),_:1})])),_:1}))])),_:1})])),_:1}),n(y,{class:"card"},{default:u((()=>[n(y,{class:"card-header"},{default:u((()=>[n(x,{class:"card-title"},{default:u((()=>[f(" 结算汇总（"+m(o.isFlowPrice?"流量结算":"重量结算")+"） ",1)])),_:1})])),_:1}),o.isFlowPrice?(d(),i(y,{key:1,class:"card-body"},{default:u((()=>[n(y,{class:"formula-section"},{default:u((()=>[n(y,{class:"formula-block"},{default:u((()=>[n(x,{class:"formula-title"},{default:u((()=>[f("用气公式")])),_:1}),n(y,{class:"formula-line"},{default:u((()=>[n(x,{class:"formula-label"},{default:u((()=>[f("本次用气量")])),_:1}),n(x,{class:"formula-main"},{default:u((()=>[f(m(o.flowUseFormula),1)])),_:1})])),_:1}),o.flowTheoreticalVolumeRaw>0?(d(),i(y,{key:0,class:"formula-line"},{default:u((()=>[n(x,{class:"formula-label"},{default:u((()=>[f("折算用气（按本次出瓶净重）")])),_:1}),n(x,{class:"formula-main"},{default:u((()=>[f(m(o.flowTheoreticalFormula),1)])),_:1})])),_:1})):_("",!0)])),_:1}),n(y,{class:"formula-block"},{default:u((()=>[n(x,{class:"formula-title"},{default:u((()=>[f("金额公式")])),_:1}),n(y,{class:"formula-line"},{default:u((()=>[n(x,{class:"formula-label"},{default:u((()=>[f("流量应收")])),_:1}),n(x,{class:"formula-main"},{default:u((()=>[f(m(o.flowAmountFormula),1)])),_:1})])),_:1})])),_:1})])),_:1}),n(y,{class:"divider"}),n(y,{class:"info-row"},{default:u((()=>[n(x,{class:"info-label"},{default:u((()=>[f("本次用气量")])),_:1}),n(x,{class:"info-value"},{default:u((()=>[f(m(o.flowVolumeMeterText)+" m³",1)])),_:1})])),_:1}),o.flowTheoreticalVolumeRaw>0?(d(),i(y,{key:0,class:"info-row"},{default:u((()=>[n(x,{class:"info-label"},{default:u((()=>[f("折算用气（参考）")])),_:1}),n(x,{class:"info-value"},{default:u((()=>[f(m(o.flowTheoreticalVolumeText)+" m³ ",1)])),_:1})])),_:1})):_("",!0),n(y,{class:"divider"}),n(y,{class:"info-row"},{default:u((()=>[n(x,{class:"info-label-strong"},{default:u((()=>[f("流量应收")])),_:1}),n(x,{class:"info-value-strong"},{default:u((()=>[f(m(o.flowShouldReceiveText)+" 元 ",1)])),_:1})])),_:1}),n(y,{class:"info-row"},{default:u((()=>[n(x,{class:"info-label"},{default:u((()=>[f("本次实收")])),_:1}),n(x,{class:"info-value"},{default:u((()=>[f(m(o.amountReceivedText)+" 元",1)])),_:1})])),_:1}),n(y,{class:"info-row"},{default:u((()=>[n(x,{class:"info-label"},{default:u((()=>[f("未收金额")])),_:1}),n(x,{class:w(["info-value",{"text-danger":o.unpaidRaw>0}])},{default:u((()=>[f(m(o.unpaidText)+" 元 ",1)])),_:1},8,["class"])])),_:1})])),_:1})):(d(),i(y,{key:0,class:"card-body"},{default:u((()=>[n(y,{class:"formula-section"},{default:u((()=>[n(y,{class:"formula-block"},{default:u((()=>[n(x,{class:"formula-title"},{default:u((()=>[f("重量公式")])),_:1}),n(y,{class:"formula-line"},{default:u((()=>[n(x,{class:"formula-label"},{default:u((()=>[f("出瓶净重")])),_:1}),n(x,{class:"formula-main"},{default:u((()=>[f(m(o.outNetFormula),1)])),_:1})])),_:1}),o.backList.length?(d(),i(y,{key:0,class:"formula-line"},{default:u((()=>[n(x,{class:"formula-label"},{default:u((()=>[f("回瓶净重")])),_:1}),n(x,{class:"formula-main"},{default:u((()=>[f(m(o.backNetFormula),1)])),_:1})])),_:1})):_("",!0),n(y,{class:"formula-line"},{default:u((()=>[n(x,{class:"formula-label"},{default:u((()=>[f("净重合计")])),_:1}),n(x,{class:"formula-main"},{default:u((()=>[f(m(o.netTotalFormula),1)])),_:1})])),_:1})])),_:1}),n(y,{class:"formula-block"},{default:u((()=>[n(x,{class:"formula-title"},{default:u((()=>[f("金额公式")])),_:1}),n(y,{class:"formula-line"},{default:u((()=>[n(x,{class:"formula-label"},{default:u((()=>[f("出瓶应收")])),_:1}),n(x,{class:"formula-main"},{default:u((()=>[f(m(o.outAmountFormula),1)])),_:1})])),_:1}),o.isKgPrice&&0!==o.backNetTotalRaw?(d(),i(y,{key:0,class:"formula-line"},{default:u((()=>[n(x,{class:"formula-label"},{default:u((()=>[f("回瓶结算")])),_:1}),n(x,{class:"formula-main"},{default:u((()=>[f(m(o.backAmountFormula),1)])),_:1})])),_:1})):_("",!0),n(y,{class:"formula-line"},{default:u((()=>[n(x,{class:"formula-label"},{default:u((()=>[f("理论应收")])),_:1}),n(x,{class:"formula-main"},{default:u((()=>[f(m(o.shouldReceiveFormula),1)])),_:1})])),_:1})])),_:1})])),_:1}),n(y,{class:"divider"}),n(y,{class:"info-row"},{default:u((()=>[n(x,{class:"info-label"},{default:u((()=>[f("出瓶净重")])),_:1}),n(x,{class:"info-value"},{default:u((()=>[f(m(o.outNetTotalText)+" kg",1)])),_:1})])),_:1}),n(y,{class:"info-row"},{default:u((()=>[n(x,{class:"info-label"},{default:u((()=>[f("回瓶净重")])),_:1}),n(x,{class:"info-value"},{default:u((()=>[f(m(o.backNetTotalText)+" kg",1)])),_:1})])),_:1}),n(y,{class:"info-row"},{default:u((()=>[n(x,{class:"info-label"},{default:u((()=>[f("净重合计")])),_:1}),n(x,{class:"info-value"},{default:u((()=>[f(m(o.netTotalText)+" kg",1)])),_:1})])),_:1}),n(y,{class:"divider"}),n(y,{class:"info-row"},{default:u((()=>[n(x,{class:"info-label"},{default:u((()=>[f("出瓶金额")])),_:1}),n(x,{class:"info-value"},{default:u((()=>[f(m(o.outAmountText)+" 元",1)])),_:1})])),_:1}),n(y,{class:"info-row"},{default:u((()=>[n(x,{class:"info-label"},{default:u((()=>[f("回瓶金额")])),_:1}),n(x,{class:"info-value"},{default:u((()=>[f(m(o.backAmountText)+" 元 ",1),o.backAmountRaw>0?(d(),i(x,{key:0,class:"hint"},{default:u((()=>[f("（退给客户）")])),_:1})):o.backAmountRaw<0?(d(),i(x,{key:1,class:"hint"},{default:u((()=>[f("（客户补差）")])),_:1})):_("",!0)])),_:1})])),_:1}),n(y,{class:"info-row"},{default:u((()=>[n(x,{class:"info-label-strong"},{default:u((()=>[f("理论应收")])),_:1}),n(x,{class:"info-value-strong"},{default:u((()=>[f(m(o.shouldReceiveText)+" 元",1)])),_:1})])),_:1}),n(y,{class:"info-row"},{default:u((()=>[n(x,{class:"info-label"},{default:u((()=>[f("本次实收")])),_:1}),n(x,{class:"info-value"},{default:u((()=>[f(m(o.amountReceivedText)+" 元",1)])),_:1})])),_:1}),n(y,{class:"info-row"},{default:u((()=>[n(x,{class:"info-label"},{default:u((()=>[f("未收金额")])),_:1}),n(x,{class:w(["info-value",{"text-danger":o.unpaidRaw>0}])},{default:u((()=>[f(m(o.unpaidText)+" 元 ",1)])),_:1},8,["class"])])),_:1})])),_:1}))])),_:1}),n(y,{class:"card"},{default:u((()=>[n(y,{class:"card-header"},{default:u((()=>[n(x,{class:"card-title"},{default:u((()=>[f("备注")])),_:1})])),_:1}),n(y,{class:"card-body"},{default:u((()=>[n(x,{class:"remark-text"},{default:u((()=>[f(m(s.record.remark||"暂无备注"),1)])),_:1})])),_:1})])),_:1})],64))])),_:1})])),_:1})}],["__scopeId","data-v-2ba6256b"]]);export{A as default};
