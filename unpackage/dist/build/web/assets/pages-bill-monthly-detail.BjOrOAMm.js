import{s as t,H as e,t as a,J as l,K as s,n as o,v as i,c,w as d,i as n,o as u,d as r,e as m,f as _,p as f,q as h,x as p,y,F as g,g as b,I as k,j as w,B as v}from"./index-B6DdPhlT.js";import{B}from"./BackToDashboardBar.0jhbkRhX.js";import{_ as x,i as N,g as C,e as D,f as I,h as F,j as L}from"./_plugin-vue_export-helper.Dda_PF8M.js";const A=x({components:{BackToDashboardBar:B},data:()=>({loading:!1,canLoad:!0,customerId:"",customerName:"",dateFrom:"",dateTo:"",records:[],flowRecords:[],userInfo:{},payAmountInput:"",writeOffInput:"",distributing:!1,exporting:!1,hasFlowRecords:!1}),filters:{money(t){const e=Number(t);return isNaN(e)?"0.00":e.toFixed(2)}},computed:{stats(){let t=0,e=0,a=0,l=0;return this.records.forEach((s=>{const o=Number(s.amount)||0,i=Number(s.amount_received)||0,c=Number(s.write_off||0);t+=o,e+=i,l+=c,a+=Math.max(o-i-c,0)})),{totalShould:t,totalReceived:e,totalUnpaid:a,totalWriteOff:l}},isAdmin(){return N(this.userInfo)}},onLoad(e){if(this.userInfo=C()||{},D()){if(this.customerId=e.customer_id||"",this.customerName=decodeURIComponent(e.customer_name||""),this.dateFrom=e.date_from||"",this.dateTo=e.date_to||"",!this.customerId&&!this.customerName||!this.dateFrom||!this.dateTo)return t({title:"缺少客户或日期参数",icon:"none"}),void(this.canLoad=!1);this.loadDetail()}},methods:{getValidToken(){const e=I(),a=F();return!e||L(a)?(t({title:"登录已过期，请重新登录",icon:"none"}),D(),""):e},getBottleList(t,e){const a=t=>String(t||"").trim();let l=[];return"out"===e?Array.isArray(t.out_items)&&t.out_items.length?l=t.out_items.map((t=>a(t.bottle_no))).filter(Boolean):t.bottle_no&&(l=[a(t.bottle_no)]):"back"===e?Array.isArray(t.back_items)&&t.back_items.length?l=t.back_items.map((t=>a(t.bottle_no))).filter(Boolean):t.return_bottle_no&&(l=[a(t.return_bottle_no)]):"deposit"===e&&(Array.isArray(t.deposit_items)&&t.deposit_items.length?l=t.deposit_items.map((t=>a(t.bottle_no))).filter(Boolean):t.deposit_bottles_raw&&(l=t.deposit_bottles_raw.split(/[\/、,，\s]+/).map((t=>a(t))).filter(Boolean))),l},displayOutBottles(t){const e=this.getBottleList(t,"out");return e.length?e.join(" / "):"-"},displayBackBottles(t){const e=this.getBottleList(t,"back");return e.length?e.join(" / "):"-"},displayDepositBottles(t){const e=this.getBottleList(t,"deposit");return e.length?e.join(" / "):"-"},onBottleCellClick(t,a){const l=this.getBottleList(t,a);l.length&&(1!==l.length?e({itemList:l,success:t=>{const e=t.tapIndex;e>=0&&e<l.length&&this.goBottleDetail(l[e])}}):this.goBottleDetail(l[0]))},async enrichCarNoFromVehicle(){const t=new Set;this.records.forEach((e=>{!e.car_no&&e.vehicle_id&&t.add(e.vehicle_id)}));if(Array.from(t).length)try{const t=this.getValidToken();if(!t)return;const e=(await a.callFunction({name:"crm-vehicle",data:{action:"list",token:t}})).result||{};if(0!==e.code||!Array.isArray(e.data))return void console.warn("crm-vehicle list failed: ",e);const l=e.data||[],s={};l.forEach((t=>{t&&t._id&&(s[t._id]=t.plate_no||t.car_no||"")})),this.records=this.records.map((t=>!t.car_no&&t.vehicle_id&&s[t.vehicle_id]?{...t,car_no:s[t.vehicle_id]}:t))}catch(e){console.error("enrichCarNoFromVehicle error",e)}},async loadDetail(){if(!this.canLoad)return;const e=this.getValidToken();if(e){this.loading=!0;try{const l=(await a.callFunction({name:"crm-bill",data:{action:"customerDailyDetailByRange",token:e,data:{customer_id:this.customerId||"",customer_name:this.customerName||"",date_from:this.dateFrom,date_to:this.dateTo}}})).result||{};if(0!==l.code)return void t({title:l.msg||"加载明细失败",icon:"none"});const s=l.data||[];this.records=s.map((t=>{const e=Number(t.amount)||0,a=Number(t.amount_received)||0,l=Number(t.write_off||0),s=Math.max(e-a-l,0);return{...t,unpaid:s}}));const o=Array.isArray(l.flow_intervals)?l.flow_intervals:[];this.flowRecords=o.map((t=>{const e=null!=t.unit_price?Number(t.unit_price):null,a=null!=t.amount_should?Number(t.amount_should):0,l=null!=t.amount_received?Number(t.amount_received):0,s=Number(t.write_off||0),o=null!=t.unpaid?Number(t.unpaid):Math.max((a||0)-(l||0)-s,0);return{...t,_display_unit_price:e,_display_should:a,_display_received:l,_display_write_off:s,_display_unpaid:o}})),this.hasFlowRecords=this.flowRecords.length>0,await this.enrichCarNoFromVehicle()}catch(l){console.error("loadDetail error",l),t({title:"加载明细失败",icon:"none"})}finally{this.loading=!1}}},formatNumber(t){const e=Number(t);return isNaN(e)?"-":e.toFixed(2)},async onAutoDistribute(){if(!this.isAdmin)return void t({title:"当前账号无权进行智能分配",icon:"none"});if(!this.records.length)return void t({title:"没有可分配的记录",icon:"none"});const e=Number(this.payAmountInput||0),l=Number(this.writeOffInput||0);if(isNaN(e)||e<0)return void t({title:"请输入正确的收款金额",icon:"none"});if(isNaN(l)||l<0)return void t({title:"抹零不能为负数",icon:"none"});if(0===e&&0===l)return void t({title:"金额和抹零不能都为 0",icon:"none"});const s=this.records.map((t=>t._id)).filter(Boolean);if(!s.length)return void t({title:"记录缺少 ID，无法分配",icon:"none"});const o=this.getValidToken();if(o){this.distributing=!0;try{const i=(await a.callFunction({name:"crm-bill",data:{action:"autoDistributePayment",token:o,data:{record_ids:s,pay_amount:e,write_off_amount:l}}})).result||{};if(0!==i.code)return void t({title:i.msg||"分配失败",icon:"none"});t({title:"分配完成",icon:"success"}),this.payAmountInput="",this.writeOffInput="",this.loadDetail()}catch(i){console.error("autoDistributePayment error",i),t({title:"分配失败，请稍后重试",icon:"none"})}finally{this.distributing=!1}}},async onExport(){if(!this.records.length)return void t({title:"没有可导出的数据",icon:"none"});const e=this.getValidToken();if(e){this.exporting=!0;try{const o=(await a.callFunction({name:"crm-bill",data:{action:"exportCustomerDailyDetailExcel",token:e,data:{customer_id:this.customerId||"",customer_name:this.customerName||"",date_from:this.dateFrom,date_to:this.dateTo}}})).result||{};if(0!==o.code||!o.url)return void t({title:o.msg||"导出失败",icon:"none"});const i=o.url;l({url:i,success:e=>{200===e.statusCode?s?s({filePath:e.tempFilePath,success:()=>{}}):t({title:"已下载，可在本机查看",icon:"none"}):t({title:"下载失败",icon:"none"})},fail:()=>{t({title:"下载失败",icon:"none"})}})}catch(o){console.error("exportCustomerDailyDetailExcel error",o),t({title:"导出失败",icon:"none"})}finally{this.exporting=!1}}},goBottleDetail(t){const e=(t||"").trim();e&&o({url:`/pages/bottle/detail?number=${encodeURIComponent(e)}`})},goSaleDetail(e){const a=e._id||e.sale_id;if(!a)return t({title:"缺少销售记录ID",icon:"none"});o({url:`/pages/sale/detail?id=${a}`})}}},[["render",function(t,e,a,l,s,o){const B=i("BackToDashboardBar"),x=b,N=n,C=k,D=w;return u(),c(N,{class:"page"},{default:d((()=>[r(N,{class:"inner"},{default:d((()=>[r(B,{"back-to":"/pages/bill/monthly",text:"返回"}),r(N,{class:"page-header"},{default:d((()=>[r(N,{class:"page-header-left"},{default:d((()=>[r(N,{class:"page-icon"},{default:d((()=>[r(x,{class:"page-icon-text"},{default:d((()=>[m("日")])),_:1})])),_:1}),r(N,{class:"page-header-text"},{default:d((()=>[r(x,{class:"page-title"},{default:d((()=>[m(_(s.customerName||"未知客户")+" · "+_(s.dateFrom)+" ~ "+_(s.dateTo),1)])),_:1}),r(x,{class:"page-sub"},{default:d((()=>[m(" 时间范围内所有销售记录明细（含瓶号、金额、抹零与收款状态） ")])),_:1})])),_:1})])),_:1})])),_:1}),r(N,{class:"card card-summary"},{default:d((()=>[r(N,{class:"summary-row"},{default:d((()=>[r(N,{class:"summary-item"},{default:d((()=>[r(x,{class:"summary-label"},{default:d((()=>[m("应收合计")])),_:1}),r(N,{class:"summary-value-row"},{default:d((()=>[r(x,{class:"summary-value"},{default:d((()=>[m(_(o.stats.totalShould|t.money),1)])),_:1}),r(x,{class:"summary-unit"},{default:d((()=>[m("元")])),_:1})])),_:1})])),_:1}),r(N,{class:"summary-item"},{default:d((()=>[r(x,{class:"summary-label"},{default:d((()=>[m("实收合计")])),_:1}),r(N,{class:"summary-value-row"},{default:d((()=>[r(x,{class:"summary-value"},{default:d((()=>[m(_(o.stats.totalReceived|t.money),1)])),_:1}),r(x,{class:"summary-unit"},{default:d((()=>[m("元")])),_:1})])),_:1})])),_:1}),r(N,{class:"summary-item"},{default:d((()=>[r(x,{class:"summary-label"},{default:d((()=>[m("抹零合计")])),_:1}),r(N,{class:"summary-value-row"},{default:d((()=>[r(x,{class:"summary-value"},{default:d((()=>[m(_(o.stats.totalWriteOff|t.money),1)])),_:1}),r(x,{class:"summary-unit"},{default:d((()=>[m("元")])),_:1})])),_:1})])),_:1}),r(N,{class:"summary-item"},{default:d((()=>[r(x,{class:"summary-label"},{default:d((()=>[m("未收合计")])),_:1}),r(N,{class:"summary-value-row"},{default:d((()=>[r(x,{class:f(["summary-value",o.stats.totalUnpaid>0?"text-danger":"text-normal"])},{default:d((()=>[m(_(o.stats.totalUnpaid|t.money),1)])),_:1},8,["class"]),r(x,{class:"summary-unit"},{default:d((()=>[m("元")])),_:1})])),_:1})])),_:1}),r(N,{class:"summary-item"},{default:d((()=>[r(x,{class:"summary-label"},{default:d((()=>[m("记录条数")])),_:1}),r(N,{class:"summary-value-row"},{default:d((()=>[r(x,{class:"summary-value"},{default:d((()=>[m(_(s.records.length),1)])),_:1}),r(x,{class:"summary-unit"},{default:d((()=>[m("条")])),_:1})])),_:1})])),_:1})])),_:1})])),_:1}),r(N,{class:"card card-table"},{default:d((()=>[r(N,{class:"card-header"},{default:d((()=>[r(x,{class:"card-title"},{default:d((()=>[m("销售记录明细")])),_:1}),r(x,{class:"card-sub"},{default:d((()=>[m(" 点击瓶号可查看瓶子详情；可通过智能分配调整实收；支持导出 Excel "),s.hasFlowRecords?(u(),c(x,{key:0,class:"tag-flow"},{default:d((()=>[m(" （含流量结算记录） ")])),_:1})):h("",!0)])),_:1})])),_:1}),s.records.length?(u(),c(N,{key:0,class:"auto-card"},{default:d((()=>[r(N,{class:"auto-row"},{default:d((()=>[r(N,{class:"auto-field"},{default:d((()=>[r(x,{class:"auto-label"},{default:d((()=>[m("本次收款金额")])),_:1}),r(N,{class:"auto-input-wrapper"},{default:d((()=>[r(C,{class:"auto-input",modelValue:s.payAmountInput,"onUpdate:modelValue":e[0]||(e[0]=t=>s.payAmountInput=t),type:"digit",placeholder:"例如 3310"},null,8,["modelValue"])])),_:1})])),_:1}),r(N,{class:"auto-field"},{default:d((()=>[r(x,{class:"auto-label"},{default:d((()=>[m("本次抹零")])),_:1}),r(N,{class:"auto-input-wrapper"},{default:d((()=>[r(C,{class:"auto-input",modelValue:s.writeOffInput,"onUpdate:modelValue":e[1]||(e[1]=t=>s.writeOffInput=t),type:"digit",placeholder:"例如 8"},null,8,["modelValue"])])),_:1})])),_:1})])),_:1}),r(N,{class:"auto-row auto-row-bottom"},{default:d((()=>[r(D,{class:"btn-soft btn-export",disabled:s.exporting,onClick:o.onExport},{default:d((()=>[s.exporting?(u(),c(x,{key:1},{default:d((()=>[m("导出中…")])),_:1})):(u(),c(x,{key:0},{default:d((()=>[m("导出 Excel")])),_:1}))])),_:1},8,["disabled","onClick"]),o.isAdmin?(u(),c(D,{key:0,class:"btn-primary",disabled:s.distributing,onClick:o.onAutoDistribute},{default:d((()=>[s.distributing?(u(),c(x,{key:1},{default:d((()=>[m("分配中…")])),_:1})):(u(),c(x,{key:0},{default:d((()=>[m("智能分配到下方记录")])),_:1}))])),_:1},8,["disabled","onClick"])):h("",!0)])),_:1})])),_:1})):h("",!0),s.loading?(u(),c(N,{key:1,class:"list-loading"},{default:d((()=>[r(x,{class:"loading-text"},{default:d((()=>[m("加载中…")])),_:1})])),_:1})):0===s.records.length?(u(),c(N,{key:2,class:"empty"},{default:d((()=>[r(x,{class:"empty-main"},{default:d((()=>[m("该时间段暂无销售记录")])),_:1}),r(x,{class:"empty-sub"},{default:d((()=>[m("可返回上一页选择其他日期或客户")])),_:1})])),_:1})):(u(),c(N,{key:3,class:"table-wrapper"},{default:d((()=>[r(N,{class:"table-header"},{default:d((()=>[r(x,{class:"th col-date"},{default:d((()=>[m("日期")])),_:1}),r(x,{class:"th col-bottle"},{default:d((()=>[m("出瓶号")])),_:1}),r(x,{class:"th col-bottle"},{default:d((()=>[m("回瓶号")])),_:1}),r(x,{class:"th col-deposit"},{default:d((()=>[m("存瓶号")])),_:1}),r(x,{class:"th col-weight"},{default:d((()=>[m("出瓶净重")])),_:1}),r(x,{class:"th col-weight"},{default:d((()=>[m("回瓶净重")])),_:1}),r(x,{class:"th col-price"},{default:d((()=>[m("单价")])),_:1}),r(x,{class:"th col-amount"},{default:d((()=>[m("应收")])),_:1}),r(x,{class:"th col-amount"},{default:d((()=>[m("实收")])),_:1}),r(x,{class:"th col-amount"},{default:d((()=>[m("抹零")])),_:1}),r(x,{class:"th col-amount"},{default:d((()=>[m("未收")])),_:1}),r(x,{class:"th col-delivery"},{default:d((()=>[m("配送员")])),_:1}),r(x,{class:"th col-car"},{default:d((()=>[m("车号")])),_:1}),r(x,{class:"th col-status"},{default:d((()=>[m("收款状态")])),_:1}),r(x,{class:"th col-op"},{default:d((()=>[m("详情")])),_:1})])),_:1}),(u(!0),p(g,null,y(s.records,(e=>(u(),c(N,{key:e._id,class:f(["table-row",{"row-unpaid":e.unpaid>0,"row-partial":e.amount_received>0&&e.unpaid>0}])},{default:d((()=>[r(x,{class:"td col-date"},{default:d((()=>[m(_(e.date||"-"),1)])),_:2},1024),r(N,{class:"td col-bottle"},{default:d((()=>[(u(!0),p(g,null,y(o.getBottleList(e,"out").slice(0,2),((t,a)=>(u(),p(g,{key:"o"+a},[r(x,{class:"td-link",onClick:v((e=>o.goBottleDetail(t)),["stop"])},{default:d((()=>[m(_(t),1)])),_:2},1032,["onClick"]),a<o.getBottleList(e,"out").slice(0,2).length-1?(u(),c(x,{key:0},{default:d((()=>[m(" / ")])),_:1})):h("",!0)],64)))),128)),o.getBottleList(e,"out").length>2?(u(),c(x,{key:0,class:"td-link",onClick:v((t=>o.onBottleCellClick(e,"out")),["stop"])},{default:d((()=>[m(" / … ")])),_:2},1032,["onClick"])):h("",!0),0===o.getBottleList(e,"out").length?(u(),c(x,{key:1},{default:d((()=>[m("-")])),_:1})):h("",!0)])),_:2},1024),r(N,{class:"td col-bottle"},{default:d((()=>[(u(!0),p(g,null,y(o.getBottleList(e,"back").slice(0,2),((t,a)=>(u(),p(g,{key:"b"+a},[r(x,{class:"td-link",onClick:v((e=>o.goBottleDetail(t)),["stop"])},{default:d((()=>[m(_(t),1)])),_:2},1032,["onClick"]),a<o.getBottleList(e,"back").slice(0,2).length-1?(u(),c(x,{key:0},{default:d((()=>[m(" / ")])),_:1})):h("",!0)],64)))),128)),o.getBottleList(e,"back").length>2?(u(),c(x,{key:0,class:"td-link",onClick:v((t=>o.onBottleCellClick(e,"back")),["stop"])},{default:d((()=>[m(" / … ")])),_:2},1032,["onClick"])):h("",!0),0===o.getBottleList(e,"back").length?(u(),c(x,{key:1},{default:d((()=>[m("-")])),_:1})):h("",!0)])),_:2},1024),r(N,{class:"td col-deposit"},{default:d((()=>[(u(!0),p(g,null,y(o.getBottleList(e,"deposit").slice(0,2),((t,a)=>(u(),p(g,{key:"d"+a},[r(x,{class:"td-link",onClick:v((e=>o.goBottleDetail(t)),["stop"])},{default:d((()=>[m(_(t),1)])),_:2},1032,["onClick"]),a<o.getBottleList(e,"deposit").slice(0,2).length-1?(u(),c(x,{key:0},{default:d((()=>[m(" / ")])),_:1})):h("",!0)],64)))),128)),o.getBottleList(e,"deposit").length>2?(u(),c(x,{key:0,class:"td-link",onClick:v((t=>o.onBottleCellClick(e,"deposit")),["stop"])},{default:d((()=>[m(" / … ")])),_:2},1032,["onClick"])):h("",!0),0===o.getBottleList(e,"deposit").length?(u(),c(x,{key:1},{default:d((()=>[m("-")])),_:1})):h("",!0)])),_:2},1024),r(x,{class:"td col-weight"},{default:d((()=>[m(_(o.formatNumber(e.out_net_total??e.net_weight_out))+"kg ",1)])),_:2},1024),r(x,{class:"td col-weight"},{default:d((()=>[m(_(o.formatNumber(e.back_net_total??e.net_weight_back))+"kg ",1)])),_:2},1024),r(x,{class:"td col-price"},{default:d((()=>[null!=e.unit_price?(u(),c(x,{key:0},{default:d((()=>[m(_(Number(e.unit_price).toFixed(2))+" 元/"+_("bottle"===e.price_unit?"瓶":"m3"===e.price_unit?"m³":"kg"),1)])),_:2},1024)):(u(),c(x,{key:1},{default:d((()=>[m("-")])),_:1}))])),_:2},1024),r(x,{class:"td col-amount"},{default:d((()=>[m(_(e.amount|t.money),1)])),_:2},1024),r(x,{class:"td col-amount"},{default:d((()=>[m(_(e.amount_received|t.money),1)])),_:2},1024),r(x,{class:"td col-amount"},{default:d((()=>[m(_(e.write_off|t.money),1)])),_:2},1024),r(x,{class:f(["td col-amount",e.unpaid>0?"text-danger":"text-normal"])},{default:d((()=>[m(_(e.unpaid|t.money),1)])),_:2},1032,["class"]),r(x,{class:"td col-delivery"},{default:d((()=>[m(_(e.delivery_man||"—"),1)])),_:2},1024),r(x,{class:"td col-car"},{default:d((()=>[m(_(e.car_no||"—"),1)])),_:2},1024),r(x,{class:"td col-status"},{default:d((()=>[m(_(e.payment_status||"—"),1)])),_:2},1024),r(N,{class:"td col-op"},{default:d((()=>[r(x,{class:"td-link",onClick:t=>o.goSaleDetail(e)},{default:d((()=>[m("详情")])),_:2},1032,["onClick"])])),_:2},1024)])),_:2},1032,["class"])))),128))])),_:1})),s.hasFlowRecords&&s.flowRecords.length?(u(),c(N,{key:4,class:"card card-table card-flow"},{default:d((()=>[r(N,{class:"card-header"},{default:d((()=>[r(x,{class:"card-title"},{default:d((()=>[m("流量结算明细")])),_:1}),r(x,{class:"card-sub"},{default:d((()=>[m("按抄表区间计算，仅展示单价为元/m³的记录")])),_:1})])),_:1}),r(N,{class:"table-wrapper"},{default:d((()=>[r(N,{class:"table-header"},{default:d((()=>[r(x,{class:"th col-date"},{default:d((()=>[m("抄表日期（区间结束）")])),_:1}),r(x,{class:"th col-flow-index"},{default:d((()=>[m("上次表数")])),_:1}),r(x,{class:"th col-flow-index"},{default:d((()=>[m("本次表数")])),_:1}),r(x,{class:"th col-flow-volume"},{default:d((()=>[m("用气量(m³)")])),_:1}),r(x,{class:"th col-flow-volume"},{default:d((()=>[m("理论用气量(m³)")])),_:1}),r(x,{class:"th col-flow-amount"},{default:d((()=>[m("单价")])),_:1}),r(x,{class:"th col-flow-amount"},{default:d((()=>[m("理论应收")])),_:1}),r(x,{class:"th col-flow-amount"},{default:d((()=>[m("实收")])),_:1}),r(x,{class:"th col-flow-amount"},{default:d((()=>[m("抹零")])),_:1}),r(x,{class:"th col-flow-amount"},{default:d((()=>[m("未收")])),_:1}),r(x,{class:"th col-flow-status"},{default:d((()=>[m("状态")])),_:1})])),_:1}),(u(!0),p(g,null,y(s.flowRecords,(e=>(u(),c(N,{key:"f"+e._id,class:"table-row"},{default:d((()=>[r(x,{class:"td col-date"},{default:d((()=>[m(_(e.record_date),1)])),_:2},1024),r(x,{class:"td col-flow-index"},{default:d((()=>[m(_(o.formatNumber(e.period_start_reading)),1)])),_:2},1024),r(x,{class:"td col-flow-index"},{default:d((()=>[m(_(o.formatNumber(e.period_end_reading)),1)])),_:2},1024),r(x,{class:"td col-flow-volume"},{default:d((()=>[m(_(o.formatNumber(e.consumption_m3)),1)])),_:2},1024),r(x,{class:"td col-flow-volume"},{default:d((()=>[m(_(o.formatNumber(e.theoretical_m3)),1)])),_:2},1024),r(x,{class:"td col-flow-amount"},{default:d((()=>[m(_(null!=e._display_unit_price?e._display_unit_price.toFixed(2):"-"),1)])),_:2},1024),r(x,{class:"td col-flow-amount"},{default:d((()=>[m(_(e._display_should|t.money),1)])),_:2},1024),r(x,{class:"td col-flow-amount"},{default:d((()=>[m(_(e._display_received|t.money),1)])),_:2},1024),r(x,{class:"td col-flow-amount"},{default:d((()=>[m(_(e._display_write_off|t.money),1)])),_:2},1024),r(x,{class:f(["td col-flow-amount",e._display_unpaid>0?"text-danger":"text-normal"])},{default:d((()=>[m(_(e._display_unpaid|t.money),1)])),_:2},1032,["class"]),r(x,{class:"td col-flow-status"},{default:d((()=>[m(_(e.payment_status||"—"),1)])),_:2},1024)])),_:2},1024)))),128))])),_:1})])),_:1})):h("",!0)])),_:1}),!s.loading&&s.records.length>0?(u(),c(N,{key:0,class:"footer-note"},{default:d((()=>[r(x,{class:"footer-text"},{default:d((()=>[m(" 共 "+_(s.records.length)+" 条，应收 "+_(o.stats.totalShould|t.money)+" 元， 实收 "+_(o.stats.totalReceived|t.money)+" 元，抹零 "+_(o.stats.totalWriteOff|t.money)+" 元， 未收 ",1),r(x,{class:f(o.stats.totalUnpaid>0?"text-danger":"text-normal")},{default:d((()=>[m(_(o.stats.totalUnpaid|t.money),1)])),_:1},8,["class"]),m(" 元。 ")])),_:1})])),_:1})):h("",!0)])),_:1})])),_:1})}],["__scopeId","data-v-bcfdd24d"]]);export{A as default};
