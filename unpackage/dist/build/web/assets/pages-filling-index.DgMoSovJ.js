import{j as t,t as e,s as a,k as l,q as s,c as o,w as i,i as n,o as r,d as c,e as u,m as d,l as f,p as m,u as g,v as h,F as _,f as b,x as y,I as k,D as p,g as w,A as R}from"./index-C85BGToL.js";import{B as S}from"./BackToDashboardBar.BBeceW6P.js";import{e as B,g as v}from"./auth.yulpUJA0.js";import{_ as x}from"./_plugin-vue_export-helper.BCo6x5W8.js";const F=x({components:{BackToDashboardBar:S},data:()=>({userInfo:{},filterPreset:"month",dateRange:{start:"",end:""},loadingSummary:!1,summary:{inbound_total:0,fill_total:0,sale_total:0},loadingList:!1,fillingList:[],form:{bottle_no:"",tare_fill:"",gross_fill:"",operator:"",remark:""},submitting:!1,diffThreshold:5,statusTextMap:{in_station:"在站",at_customer:"在客户",repairing:"维修",scrapped:"报废",lost:"丢失",unknown:"未知"},bottleSuggestions:[],bottleSearchCache:{},bottleSearchPending:{},debouncedBottleSuggest:null,bottleExists:null,lastBottleInfo:null}),computed:{netFillRaw(){const t=Number(this.form.tare_fill),e=Number(this.form.gross_fill);return isNaN(t)||isNaN(e)?0:+(e-t)},netFillText(){return this.netFillRaw.toFixed(2)},diffInboundFillRaw(){const{inbound_total:t,fill_total:e}=this.summary;return+(Number(t||0)-Number(e||0))},diffFillSaleRaw(){const{fill_total:t,sale_total:e}=this.summary;return+(Number(t||0)-Number(e||0))},diffInboundSaleRaw(){const{inbound_total:t,sale_total:e}=this.summary;return+(Number(t||0)-Number(e||0))},showTareWarning(){if(!this.lastBottleInfo)return!1;const t=Number(this.lastBottleInfo.tare_weight),e=Number(this.form.tare_fill);return!isNaN(t)&&!isNaN(e)&&Math.abs(e-t)>=3},effectiveLastBackNet(){const t=this.lastBottleInfo;if(!t)return null;const e=t.last_back_net_weight;if(null!=e)return Number(e);const a=t.last_net_weight;return null!=a?Number(a):null}},onLoad(){B()&&(this.userInfo=v()||{},this.initMonthRange(),this.fetchAll(),this.debouncedBottleSuggest=function(t,e=200){let a=null;return function(...l){clearTimeout(a),a=setTimeout((()=>{t.apply(this,l)}),e)}}(this.doBottleSuggest,200))},methods:{bottleStatusText(t){return this.statusTextMap[t]||"未知状态"},changePreset(t){this.filterPreset===t&&"custom"!==t||(this.filterPreset=t,"today"===t?(this.initTodayRange(),this.fetchAll()):"week"===t?(this.initWeekRange(),this.fetchAll()):"month"===t&&(this.initMonthRange(),this.fetchAll()),"custom"===t&&this.dateRange.start&&this.dateRange.end&&this.fetchAll())},onDateChange(t,e){const a=t.detail.value;this.dateRange[e]=a,this.dateRange.start&&this.dateRange.end&&this.fetchAll()},initTodayRange(){const t=new Date,e=this.formatDate(t);this.dateRange.start=e,this.dateRange.end=e},initWeekRange(){const t=new Date,e=t.getDay()||7,a=new Date(t.getFullYear(),t.getMonth(),t.getDate()-e+1);this.dateRange.start=this.formatDate(a),this.dateRange.end=this.formatDate(t)},initMonthRange(){const t=new Date,e=new Date(t.getFullYear(),t.getMonth(),1);this.dateRange.start=this.formatDate(e),this.dateRange.end=this.formatDate(t)},formatDate:t=>`${t.getFullYear()}-${(t.getMonth()+1).toString().padStart(2,"0")}-${t.getDate().toString().padStart(2,"0")}`,formatKg(t){const e=Number(t);return isNaN(e)?"0.00":e.toFixed(2)},fetchAll(){this.fetchSummary(),this.fetchList()},async fetchSummary(){const a=t("crm_token")||t("token")||"";if(a&&this.dateRange.start&&this.dateRange.end){this.loadingSummary=!0;try{const t=(await e.callFunction({name:"crm-filling",data:{action:"summary",token:a,data:{start_date:this.dateRange.start,end_date:this.dateRange.end}}})).result||{};0===t.code&&t.data?this.summary=Object.assign({},this.summary,t.data||{}):console.warn("fetchSummary error:",t.msg)}catch(l){console.error("fetchSummary exception:",l)}finally{this.loadingSummary=!1}}},async fetchList(){const a=t("crm_token")||t("token")||"";if(a&&this.dateRange.start&&this.dateRange.end){this.loadingList=!0;try{const t=(await e.callFunction({name:"crm-filling",data:{action:"list",token:a,data:{page:1,pageSize:100,start_date:this.dateRange.start,end_date:this.dateRange.end}}})).result||{};0===t.code&&Array.isArray(t.data)?this.fillingList=t.data:(console.warn("fetchList error:",t.msg),this.fillingList=[])}catch(l){console.error("fetchList exception:",l),this.fillingList=[]}finally{this.loadingList=!1}}},async searchBottle(a){const l=(a||"").trim();if(!l)return[];if(this.bottleSearchCache[l])return this.bottleSearchCache[l];if(this.bottleSearchPending[l])return this.bottleSearchPending[l];const s=t("crm_token")||t("token")||"",o=e.callFunction({name:"crm-bottle",data:{action:"search",token:s,data:{keyword:l,limit:20}}}).then((t=>{const e=t.result&&t.result.data||[];return this.$set(this.bottleSearchCache,l,e),delete this.bottleSearchPending[l],e})).catch((t=>(console.error("searchBottle error",t),delete this.bottleSearchPending[l],[])));return this.bottleSearchPending[l]=o,o},async doBottleSuggest(t){const e=await this.searchBottle(t);(this.form.bottle_no||"").trim()===(t||"").trim()&&(this.bottleSuggestions=e)},onBottleInput(t){const e=(t.detail.value||"").trim();this.form.bottle_no=e,this.bottleExists=null,this.lastBottleInfo=null,e?this.debouncedBottleSuggest&&this.debouncedBottleSuggest(e):this.bottleSuggestions=[]},async onSelectBottle(a){if(a){this.form.bottle_no=a.number||"",null!=a.tare_weight&&""===this.form.tare_fill&&(this.form.tare_fill=String(a.tare_weight)),this.bottleExists=!0,this.bottleSuggestions=[];try{const l=t("crm_token")||t("token")||"",s=await e.callFunction({name:"crm-bottle",data:{action:"detail",token:l,data:{number:a.number}}}),o=s.result&&s.result.data;o&&(this.lastBottleInfo=o)}catch(l){console.error("load bottle detail after select error",l)}}},async onBottleBlur(){const a=(this.form.bottle_no||"").trim();if(!a)return;if(this.bottleSuggestions&&this.bottleSuggestions.length)return;const l=t("crm_token")||t("token")||"";try{const t=await e.callFunction({name:"crm-bottle",data:{action:"getByNumber",token:l,data:{number:a}}}),s=t.result&&t.result.data;s?(this.bottleExists=!0,this.form.tare_fill||null==s.tare_weight||(this.form.tare_fill=String(s.tare_weight)),this.lastBottleInfo=s):(this.bottleExists=!1,this.lastBottleInfo=null)}catch(s){console.error("onBottleBlur getByNumber error",s)}},async doCreateFilling(t,a,l){const s=l-a;return(await e.callFunction({name:"crm-filling",data:{action:"create",token:t,data:{bottle_no:this.form.bottle_no,tare_fill:a,gross_fill:l,net_fill:s,operator:this.form.operator||this.userInfo&&this.userInfo.username||"",remark:this.form.remark||""}}})).result||{}},async submitForm(){if(!this.form.bottle_no)return void a({title:"请填写瓶号",icon:"none"});const s=Number(this.form.tare_fill),o=Number(this.form.gross_fill);if(isNaN(s)||isNaN(o))return void a({title:"请正确填写皮重和毛重",icon:"none"});if(o<=s)return void a({title:"毛重要大于皮重",icon:"none"});const i=t("crm_token")||t("token")||"";if(!i)return void a({title:"登录已过期，请重新登录",icon:"none"});this.submitting=!0;const n=(this.form.bottle_no||"").trim();try{let t=this.bottleExists;if(null==t)try{const a=await e.callFunction({name:"crm-bottle",data:{action:"getByNumber",token:i,data:{number:n}}});t=!!(a.result&&a.result.data)}catch(r){console.error("submitForm getByNumber error",r)}if(t){const t=await this.doCreateFilling(i,s,o);return void(0===t.code?(a({title:"已保存",icon:"success"}),this.resetForm(),this.fetchAll()):a({title:t.msg||"保存失败",icon:"none"}))}l({title:"瓶号未建档",content:`瓶号 ${n} 在瓶子档案中不存在。\n是否根据本次灌装皮重 ${s}kg 自动创建瓶子并保存灌装记录？`,cancelText:"只保存灌装",confirmText:"创建并保存",success:async t=>{if(t.confirm){try{const t=(await e.callFunction({name:"crm-bottle",data:{action:"quickCreate",token:i,data:{number:n,tare_weight:s,remark:"由灌装页面自动建档"}}})).result||{};if(0!==t.code)return a({title:t.msg||"建档失败",icon:"none"}),void(this.submitting=!1)}catch(r){return console.error("quickCreate from filling error",r),a({title:"建档失败",icon:"none"}),void(this.submitting=!1)}const t=await this.doCreateFilling(i,s,o);0===t.code?(a({title:"已建档并保存",icon:"success"}),this.resetForm(),this.fetchAll()):a({title:t.msg||"保存失败",icon:"none"})}else if(t.cancel){const t=await this.doCreateFilling(i,s,o);0===t.code?(a({title:"已保存",icon:"success"}),this.resetForm(),this.fetchAll()):a({title:t.msg||"保存失败",icon:"none"})}this.submitting=!1},fail:()=>{this.submitting=!1}})}catch(r){console.error("submitForm exception:",r),a({title:"请求出错",icon:"none"}),this.submitting=!1}},resetForm(){this.form={bottle_no:"",tare_fill:"",gross_fill:"",operator:"",remark:""},this.bottleSuggestions=[],this.bottleExists=null,this.lastBottleInfo=null},async exportFilling(){const l=t("crm_token")||t("token")||"";if(l)if(this.dateRange.start&&this.dateRange.end)try{const t=await e.callFunction({name:"crm-filling",data:{action:"export",token:l,data:{start_date:this.dateRange.start,end_date:this.dateRange.end}}}),s=(t.result||{}).data||[];if(!s.length)return void a({title:"当前时间段无数据",icon:"none"});const o=["日期","瓶号","灌装前皮重(kg)","灌装后毛重(kg)","灌装净重(kg)","操作员","备注","铭牌皮重(kg)","上次客户","上次出瓶日期","上次回瓶日期","上次回瓶毛重(kg)","上次回瓶净重(kg)","上次回瓶差值(kg)","本次皮重-上次回瓶毛重(kg)","本次皮重-铭牌皮重(kg)"],i=s.map((t=>[t.date||"",t.bottle_no||"",null!=t.tare_fill?t.tare_fill:"",null!=t.gross_fill?t.gross_fill:"",null!=t.net_fill?t.net_fill:"",t.operator||"",(t.remark||"").replace(/\r?\n/g," "),null!=t.tare_weight?t.tare_weight:"",t.last_customer_name||"",t.last_out_date||"",t.last_back_date||"",null!=t.last_gross_weight?t.last_gross_weight:"",null!=t.last_net_weight?t.last_net_weight:"",null!=t.last_return_diff?t.last_return_diff:"",null!=t.diff_tare_vs_last_gross?t.diff_tare_vs_last_gross:"",null!=t.diff_tare_vs_tare_weight?t.diff_tare_vs_tare_weight:""].map((t=>{const e=String(t);return e.includes(",")||e.includes('"')?`"${e.replace(/"/g,'""')}"`:e})).join(","))),n=[o.join(","),...i].join("\n"),r=`灌装记录导出_${this.dateRange.start}_${this.dateRange.end}.csv`,c=new Blob([n],{type:"text/csv;charset=utf-8;"}),u=window.URL.createObjectURL(c),d=document.createElement("a");d.href=u,d.download=r,document.body.appendChild(d),d.click(),document.body.removeChild(d),window.URL.revokeObjectURL(u),a({title:"导出已开始",icon:"success"})}catch(s){console.error("exportFilling exception:",s),a({title:"导出失败",icon:"none"})}else a({title:"请先选择导出时间范围",icon:"none"});else a({title:"登录已过期，请重新登录",icon:"none"})}}},[["render",function(t,e,a,l,S,B){const v=s("BackToDashboardBar"),x=b,F=n,N=y,I=k,C=p,L=w;return r(),o(F,{class:"filling-page"},{default:i((()=>[c(F,{class:"filling-inner"},{default:i((()=>[c(v,{"back-to":"/pages/dashboard/index",text:"返回工作台"}),c(F,{class:"page-header"},{default:i((()=>[c(F,{class:"page-header-left"},{default:i((()=>[c(F,{class:"page-icon"},{default:i((()=>[c(x,{class:"page-icon-text"},{default:i((()=>[u("灌")])),_:1})])),_:1}),c(F,{class:"page-header-text"},{default:i((()=>[c(x,{class:"page-title"},{default:i((()=>[u("灌装管理")])),_:1}),c(x,{class:"page-sub"},{default:i((()=>[u(" 记录站上每一瓶的灌装数据，对比进站、销售，追踪气量损耗 ")])),_:1})])),_:1})])),_:1})])),_:1}),c(F,{class:"card card-summary"},{default:i((()=>[c(F,{class:"filter-row"},{default:i((()=>[c(F,{class:"filter-tabs"},{default:i((()=>[c(F,{class:d(["filter-tab",{active:"today"===S.filterPreset}]),onClick:e[0]||(e[0]=t=>B.changePreset("today"))},{default:i((()=>[u("今日")])),_:1},8,["class"]),c(F,{class:d(["filter-tab",{active:"week"===S.filterPreset}]),onClick:e[1]||(e[1]=t=>B.changePreset("week"))},{default:i((()=>[u("本周")])),_:1},8,["class"]),c(F,{class:d(["filter-tab",{active:"month"===S.filterPreset}]),onClick:e[2]||(e[2]=t=>B.changePreset("month"))},{default:i((()=>[u("本月")])),_:1},8,["class"]),c(F,{class:d(["filter-tab",{active:"custom"===S.filterPreset}]),onClick:e[3]||(e[3]=t=>B.changePreset("custom"))},{default:i((()=>[u("自定义")])),_:1},8,["class"])])),_:1}),"custom"===S.filterPreset?(r(),o(F,{key:0,class:"filter-dates"},{default:i((()=>[c(N,{mode:"date",value:S.dateRange.start,onChange:e[4]||(e[4]=t=>B.onDateChange(t,"start"))},{default:i((()=>[c(F,{class:"date-input"},{default:i((()=>[c(x,{class:"date-label"},{default:i((()=>[u("开始")])),_:1}),c(x,{class:"date-value"},{default:i((()=>[u(f(S.dateRange.start||"选择日期"),1)])),_:1})])),_:1})])),_:1},8,["value"]),c(x,{class:"date-sep"},{default:i((()=>[u("-")])),_:1}),c(N,{mode:"date",value:S.dateRange.end,onChange:e[5]||(e[5]=t=>B.onDateChange(t,"end"))},{default:i((()=>[c(F,{class:"date-input"},{default:i((()=>[c(x,{class:"date-label"},{default:i((()=>[u("结束")])),_:1}),c(x,{class:"date-value"},{default:i((()=>[u(f(S.dateRange.end||"选择日期"),1)])),_:1})])),_:1})])),_:1},8,["value"])])),_:1})):m("",!0)])),_:1}),S.loadingSummary?(r(),o(F,{key:1,class:"summary-row loading"},{default:i((()=>[c(x,{class:"loading-text"},{default:i((()=>[u("正在统计灌装与损耗数据...")])),_:1})])),_:1})):(r(),o(F,{key:0,class:"summary-row"},{default:i((()=>[c(F,{class:"summary-card"},{default:i((()=>[c(F,{class:"summary-label"},{default:i((()=>[u("进站总量")])),_:1}),c(F,{class:"summary-value-row"},{default:i((()=>[c(x,{class:"summary-value"},{default:i((()=>[u(f(B.formatKg(S.summary.inbound_total)),1)])),_:1}),c(x,{class:"summary-unit"},{default:i((()=>[u("kg")])),_:1})])),_:1}),c(x,{class:"summary-tip"},{default:i((()=>[u("期间所有入库天然气净重合计")])),_:1})])),_:1}),c(F,{class:"summary-card"},{default:i((()=>[c(F,{class:"summary-label"},{default:i((()=>[u("灌装总量")])),_:1}),c(F,{class:"summary-value-row"},{default:i((()=>[c(x,{class:"summary-value"},{default:i((()=>[u(f(B.formatKg(S.summary.fill_total)),1)])),_:1}),c(x,{class:"summary-unit"},{default:i((()=>[u("kg")])),_:1})])),_:1}),c(x,{class:"summary-tip"},{default:i((()=>[u("所有灌装记录净重合计")])),_:1})])),_:1}),c(F,{class:"summary-card"},{default:i((()=>[c(F,{class:"summary-label"},{default:i((()=>[u("销售出站总量")])),_:1}),c(F,{class:"summary-value-row"},{default:i((()=>[c(x,{class:"summary-value"},{default:i((()=>[u(f(B.formatKg(S.summary.sale_total)),1)])),_:1}),c(x,{class:"summary-unit"},{default:i((()=>[u("kg")])),_:1})])),_:1}),c(x,{class:"summary-tip"},{default:i((()=>[u("对应期间销售出瓶净重合计")])),_:1})])),_:1})])),_:1})),S.loadingSummary?m("",!0):(r(),o(F,{key:2,class:"diff-row"},{default:i((()=>[c(F,{class:"diff-item"},{default:i((()=>[c(x,{class:"diff-label"},{default:i((()=>[u("进站 → 灌装 差值")])),_:1}),c(x,{class:d(["diff-value",{danger:Math.abs(B.diffInboundFillRaw)>S.diffThreshold}])},{default:i((()=>[u(f(B.formatKg(B.diffInboundFillRaw))+" kg ",1)])),_:1},8,["class"])])),_:1}),c(F,{class:"diff-item"},{default:i((()=>[c(x,{class:"diff-label"},{default:i((()=>[u("灌装 → 销售 差值")])),_:1}),c(x,{class:d(["diff-value",{danger:Math.abs(B.diffFillSaleRaw)>S.diffThreshold}])},{default:i((()=>[u(f(B.formatKg(B.diffFillSaleRaw))+" kg ",1)])),_:1},8,["class"])])),_:1}),c(F,{class:"diff-item"},{default:i((()=>[c(x,{class:"diff-label"},{default:i((()=>[u("进站 → 销售 总差值")])),_:1}),c(x,{class:d(["diff-value",{danger:Math.abs(B.diffInboundSaleRaw)>S.diffThreshold}])},{default:i((()=>[u(f(B.formatKg(B.diffInboundSaleRaw))+" kg ",1)])),_:1},8,["class"])])),_:1})])),_:1}))])),_:1}),c(F,{class:"layout-main"},{default:i((()=>[c(F,{class:"col-left"},{default:i((()=>[c(F,{class:"card"},{default:i((()=>[c(F,{class:"card-header"},{default:i((()=>[c(x,{class:"card-title"},{default:i((()=>[u("新增灌装记录")])),_:1})])),_:1}),c(F,{class:"form-body"},{default:i((()=>[c(F,{class:"form-row"},{default:i((()=>[c(x,{class:"form-label"},{default:i((()=>[u("瓶号")])),_:1}),c(F,{class:"input-with-suggest"},{default:i((()=>[c(I,{class:"form-input",modelValue:S.form.bottle_no,"onUpdate:modelValue":e[6]||(e[6]=t=>S.form.bottle_no=t),modelModifiers:{trim:!0},placeholder:"请输入瓶号，如 217，支持模糊搜索",onInput:B.onBottleInput,onBlur:B.onBottleBlur},null,8,["modelValue","onInput","onBlur"]),S.bottleSuggestions&&S.bottleSuggestions.length?(r(),o(F,{key:0,class:"bottle-suggest"},{default:i((()=>[(r(!0),g(_,null,h(S.bottleSuggestions,(t=>(r(),o(F,{key:t._id||t.number,class:"suggest-item",onClick:R((e=>B.onSelectBottle(t)),["stop"])},{default:i((()=>[c(x,{class:"suggest-no"},{default:i((()=>[u(f(t.number),1)])),_:2},1024),c(x,{class:"suggest-sub"},{default:i((()=>[u(" 皮重 "+f(null!=t.tare_weight?t.tare_weight:"-")+"kg · "+f(B.bottleStatusText(t.status)),1)])),_:2},1024)])),_:2},1032,["onClick"])))),128))])),_:1})):m("",!0)])),_:1})])),_:1}),S.lastBottleInfo?(r(),o(F,{key:0,class:"last-bottle-info"},{default:i((()=>[c(x,{class:"last-info-text"},{default:i((()=>[u(" 上次客户："+f(S.lastBottleInfo.last_customer_name||"—")+"； 上次回瓶净重： "+f(null!=B.effectiveLastBackNet?B.formatKg(B.effectiveLastBackNet):"-")+"kg； 本次灌装皮重参考： "+f(null!=S.lastBottleInfo.last_gross_weight?B.formatKg(S.lastBottleInfo.last_gross_weight):"-")+"kg； 瓶子铭牌皮重： "+f(null!=S.lastBottleInfo.tare_weight?B.formatKg(S.lastBottleInfo.tare_weight):"-")+"kg ",1)])),_:1}),B.showTareWarning?(r(),o(F,{key:0,style:{color:"#d9534f","font-size":"26rpx","margin-top":"4rpx"}},{default:i((()=>[u(" ⚠ 与铭牌皮重差异较大，请核实瓶子是否称重异常 ")])),_:1})):m("",!0)])),_:1})):m("",!0),c(F,{class:"form-row"},{default:i((()=>[c(x,{class:"form-label"},{default:i((()=>[u("灌装前皮重 (kg)")])),_:1}),c(I,{class:"form-input",modelValue:S.form.tare_fill,"onUpdate:modelValue":e[7]||(e[7]=t=>S.form.tare_fill=t),type:"digit",placeholder:"站上称的空瓶重量"},null,8,["modelValue"])])),_:1}),c(F,{class:"form-row"},{default:i((()=>[c(x,{class:"form-label"},{default:i((()=>[u("灌装后毛重 (kg)")])),_:1}),c(I,{class:"form-input",modelValue:S.form.gross_fill,"onUpdate:modelValue":e[8]||(e[8]=t=>S.form.gross_fill=t),type:"digit",placeholder:"灌装后称的毛重"},null,8,["modelValue"])])),_:1}),c(F,{class:"form-row"},{default:i((()=>[c(x,{class:"form-label"},{default:i((()=>[u("灌装净重 (kg)")])),_:1}),c(F,{class:"form-static"},{default:i((()=>[c(x,{class:d({"net-value":!0,danger:B.netFillRaw<=0})},{default:i((()=>[u(f(B.netFillText),1)])),_:1},8,["class"]),B.netFillRaw<=0?(r(),o(x,{key:0,class:"form-hint"},{default:i((()=>[u(" 净重≤0，请检查皮重/毛重是否录反 ")])),_:1})):m("",!0)])),_:1})])),_:1}),c(F,{class:"form-row"},{default:i((()=>[c(x,{class:"form-label"},{default:i((()=>[u("操作员")])),_:1}),c(I,{class:"form-input",modelValue:S.form.operator,"onUpdate:modelValue":e[9]||(e[9]=t=>S.form.operator=t),modelModifiers:{trim:!0},placeholder:"可不填，默认当前账号"},null,8,["modelValue"])])),_:1}),c(F,{class:"form-row"},{default:i((()=>[c(x,{class:"form-label"},{default:i((()=>[u("备注")])),_:1}),c(C,{class:"form-textarea",modelValue:S.form.remark,"onUpdate:modelValue":e[10]||(e[10]=t=>S.form.remark=t),modelModifiers:{trim:!0},"auto-height":"",placeholder:"可记录本次灌装的特殊情况、批次等信息"},null,8,["modelValue"])])),_:1}),c(F,{class:"form-actions"},{default:i((()=>[c(L,{class:"btn-primary",loading:S.submitting,onClick:B.submitForm},{default:i((()=>[u(" 提交灌装记录 ")])),_:1},8,["loading","onClick"])])),_:1})])),_:1})])),_:1})])),_:1}),c(F,{class:"col-right"},{default:i((()=>[c(F,{class:"card"},{default:i((()=>[c(F,{class:"card-header card-header-with-actions"},{default:i((()=>[c(F,{class:"card-header-main"},{default:i((()=>[c(x,{class:"card-title"},{default:i((()=>[u("灌装记录")])),_:1}),c(x,{class:"card-sub"},{default:i((()=>[u(" 显示当前时间段内的灌装记录，默认按时间倒序 ")])),_:1})])),_:1}),c(L,{class:"btn-secondary btn-export",onClick:B.exportFilling},{default:i((()=>[u(" 导出 ")])),_:1},8,["onClick"])])),_:1}),S.loadingList?(r(),o(F,{key:0,class:"list-empty"},{default:i((()=>[c(x,{class:"empty-text"},{default:i((()=>[u("正在加载灌装记录...")])),_:1})])),_:1})):S.fillingList.length?(r(),o(F,{key:2,class:"filling-list"},{default:i((()=>[c(F,{class:"list-header"},{default:i((()=>[c(x,{class:"col-time"},{default:i((()=>[u("日期")])),_:1}),c(x,{class:"col-bottle"},{default:i((()=>[u("瓶号")])),_:1}),c(x,{class:"col-num"},{default:i((()=>[u("皮重")])),_:1}),c(x,{class:"col-num"},{default:i((()=>[u("毛重")])),_:1}),c(x,{class:"col-num"},{default:i((()=>[u("净重")])),_:1}),c(x,{class:"col-operator"},{default:i((()=>[u("操作员")])),_:1})])),_:1}),(r(!0),g(_,null,h(S.fillingList,(t=>(r(),o(F,{key:t._id,class:"list-row"},{default:i((()=>[c(x,{class:"col-time"},{default:i((()=>[u(f(t.date||"--"),1)])),_:2},1024),c(x,{class:"col-bottle"},{default:i((()=>[u(f(t.bottle_no||"--"),1)])),_:2},1024),c(x,{class:"col-num"},{default:i((()=>[u(f(B.formatKg(t.tare_fill)),1)])),_:2},1024),c(x,{class:"col-num"},{default:i((()=>[u(f(B.formatKg(t.gross_fill)),1)])),_:2},1024),c(x,{class:"col-num"},{default:i((()=>[u(f(B.formatKg(t.net_fill)),1)])),_:2},1024),c(x,{class:"col-operator"},{default:i((()=>[u(f(t.operator||"-"),1)])),_:2},1024)])),_:2},1024)))),128))])),_:1})):(r(),o(F,{key:1,class:"list-empty"},{default:i((()=>[c(x,{class:"empty-text"},{default:i((()=>[u(" 当前时间段内暂无灌装记录，录入一条试试。 ")])),_:1})])),_:1}))])),_:1})])),_:1})])),_:1})])),_:1})])),_:1})}],["__scopeId","data-v-9756b744"]]);export{F as default};
