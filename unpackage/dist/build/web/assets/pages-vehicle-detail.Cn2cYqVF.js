import{s as a,v as e,c as t,w as i,i as l,o as n,d as s,e as d,f as r,q as o,p as c,x as u,y as m,F as f,g as _,j as h,I as p,z as g,D as v}from"./index-B6DdPhlT.js";import{B as k}from"./BackToDashboardBar.0jhbkRhX.js";import{_ as b,i as y,e as F,g as N}from"./_plugin-vue_export-helper.Dda_PF8M.js";import{c as w}from"./request.DMeHGM82.js";import{n as M,c as C}from"./plate.CWEuA0zK.js";const P={fuel:["汽油加注","柴油加注","天然气加注","尿素","加氟"],service:["保养","维修","年检","更换轮胎","保险"]};function x(a="fuel"){return{mode:a,date:"",project:(P[a]||[])[0]||"",part:"",unitPrice:"",quantity:"",amount:"",mileage:"",staff:"",remark:""}}function V(a){const e=(a.date||"").trim(),t=(a.project||"").trim();if(!e||!t)return null;const i=Number(a.unitPrice),l=Number(a.quantity),n=Number.isNaN(l)||l<=0?1:l,s=function({unitPrice:a,quantity:e,amountInput:t}){const i=Number(a),l=Number(e),n=Number.isNaN(l)||l<=0?1:l,s="string"==typeof t?t.trim():t,d=""===s||null==s?NaN:Number(s),r=Number.isNaN(i)?0:i*n;return Number.isNaN(d)?r:d}({unitPrice:i,quantity:n,amountInput:a.amount});return{local_id:`maintain-${Date.now()}-${Math.random().toString(16).slice(2)}`,date:e,project:t,part:(a.part||"").trim(),unit_price:Number.isNaN(i)?0:Number(i.toFixed(2)),quantity:n,amount:Number(s.toFixed(2)),mileage:(a.mileage||"").trim(),staff:(a.staff||"").trim(),remark:(a.remark||"").trim()}}const I=b({components:{BackToDashboardBar:k},data:()=>({vehicleId:"",vehicle:{},userInfo:{},loading:!1,saving:!1,editMode:!1,editForm:{plate_no:"",name:"",insurance_due_date:"",inspection_due_date:"",remark:""},maintainList:[],maintainForm:x("fuel"),projectOptions:P,maintainSaving:!1,deliveryList:[],staffPickerIndex:-1}),computed:{isAdmin(){return y(this.userInfo)},maintainTotal(){return this.maintainList.reduce(((a,e)=>a+(Number(e.amount)||0)),0).toFixed(2)},currentProjectOptions(){const a=this.projectOptions||{},e="service"===this.maintainForm.mode?a.service:a.fuel;return Array.isArray(e)&&e.length?e:[]},insuranceBadge(){return this.buildDueBadge(this.vehicle.insurance_due_date)},inspectionBadge(){return this.buildDueBadge(this.vehicle.inspection_due_date)},staffPickerRange(){return(this.deliveryList||[]).map((a=>{const e=a.name||a.real_name||"未命名";return a.phone?`${e}（${a.phone}）`:e}))}},onLoad(a){F()&&(this.userInfo=N()||{},this.vehicleId=a&&a.id?a.id:"",this.loadDeliveryList(),this.loadDetail())},methods:{normalizeAndValidatePlate:a=>M(a),onPlateInput(a){this.editForm.plate_no=C(a.detail&&a.detail.value)},async loadDetail(){if(this.vehicleId){this.loading=!0;try{const a=await w("crm-vehicle",{action:"detail",data:{id:this.vehicleId}});if(0!==a.code)return;const e=a.data||{};this.vehicle={...e,maintain_total_amount:Number(e.maintain_total_amount||0).toFixed(2)},this.maintainList=this.withLocalIds(e.maintain_logs||[]),this.editMode||(this.editForm={plate_no:e.plate_no||"",name:e.name||"",insurance_due_date:e.insurance_due_date||"",inspection_due_date:e.inspection_due_date||"",remark:e.remark||""})}catch(e){console.error("crm-vehicle detail error",e),a({title:"请求出错",icon:"none"})}finally{this.loading=!1}}},toggleEdit(){if(!this.isAdmin)return a({title:"当前账号无权限编辑车辆",icon:"none"});this.editMode=!this.editMode,this.editMode&&(this.editForm={plate_no:this.vehicle.plate_no||"",name:this.vehicle.name||"",insurance_due_date:this.vehicle.insurance_due_date||"",inspection_due_date:this.vehicle.inspection_due_date||"",remark:this.vehicle.remark||""})},cancelEdit(){this.editMode=!1,this.editForm={plate_no:this.vehicle.plate_no||"",name:this.vehicle.name||"",insurance_due_date:this.vehicle.insurance_due_date||"",inspection_due_date:this.vehicle.inspection_due_date||"",remark:this.vehicle.remark||""}},onDatePick(a,e){this.editForm[a]=e&&e.detail&&e.detail.value||""},async submitEdit(){if(!this.isAdmin)return a({title:"当前账号无权限编辑车辆",icon:"none"});const e=this.normalizeAndValidatePlate(this.editForm.plate_no);if(""===e)return a({title:"请填写车牌号",icon:"none"});if(null===e)return a({title:"车牌号格式不正确",icon:"none"});this.saving=!0;try{if(0!==(await w("crm-vehicle",{action:"update",data:{id:this.vehicle._id,plate_no:e,name:(this.editForm.name||"").trim(),insurance_due_date:this.editForm.insurance_due_date||"",inspection_due_date:this.editForm.inspection_due_date||"",remark:(this.editForm.remark||"").trim()}})).code)return;a({title:"保存成功",icon:"none"}),this.editMode=!1,await this.loadDetail()}catch(t){console.error("crm-vehicle update error",t),a({title:"请求出错",icon:"none"})}finally{this.saving=!1}},async loadDeliveryList(){try{const a=await w("crm-delivery",{action:"list",data:{}});if(0!==a.code)return;this.deliveryList=a.data||[],this.syncStaffPicker()}catch(e){console.error("crm-delivery list error",e),a({title:"配送员列表加载失败",icon:"none"})}},syncStaffPicker(){const a=(this.maintainForm&&this.maintainForm.staff?this.maintainForm.staff:"").trim();if(!a)return void(this.staffPickerIndex=-1);const e=(this.deliveryList||[]).findIndex((e=>{const t=(e.name||e.real_name||"").trim();return t&&t===a}));this.staffPickerIndex=e},switchMaintainMode(a){this.maintainForm=x(a),this.staffPickerIndex=-1},resetMaintainForm(a){const e=a||this.maintainForm.mode||"fuel";this.maintainForm=x(e),this.staffPickerIndex=-1},onMaintainDateChange(a){this.maintainForm.date=a.detail&&a.detail.value||""},onMaintainProjectChange(a){const e=Number(a.detail&&a.detail.value);if(Number.isNaN(e))return;const t=this.currentProjectOptions;this.maintainForm.project=t[e]||""},onStaffPickerChange(a){const e=Number(a.detail&&a.detail.value);if(Number.isNaN(e))return;const t=(this.deliveryList||[])[e];t&&(this.staffPickerIndex=e,this.maintainForm.staff=(t.name||t.real_name||t.phone||"").trim())},addMaintainEntry(){if(!this.isAdmin)return a({title:"当前账号无权限维护记录",icon:"none"});if(!this.maintainForm.date)return a({title:"请选择时间",icon:"none"});if(!this.maintainForm.project)return a({title:"请选择项目",icon:"none"});const e=V(this.maintainForm);e&&(this.maintainList=[e,...this.maintainList],this.resetMaintainForm(this.maintainForm.mode))},removeMaintain(a){this.maintainList=this.maintainList.filter((e=>e!==a))},formatMoney:a=>function(a){const e=Number(a);return Number.isNaN(e)?"0.00":e.toFixed(2)}(a),async saveMaintain(){if(!this.isAdmin)return a({title:"当前账号无权限维护记录",icon:"none"});if(!this.vehicle._id)return a({title:"请先选择车辆",icon:"none"});this.maintainSaving=!0;try{if(0!==(await w("crm-vehicle",{action:"update",data:{id:this.vehicle._id,maintain_logs:this.maintainList}})).code)return;a({title:"记录已保存",icon:"none"}),await this.loadDetail()}catch(e){console.error("crm-vehicle maintain save error",e),a({title:"请求出错",icon:"none"})}finally{this.maintainSaving=!1}},withLocalIds:a=>(a||[]).map(((a,e)=>({...a,local_id:a.local_id||a._id||`maintain-${e}-${Date.now()}`}))),buildDueBadge(a){if(!a)return null;const e=new Date(`${a}T00:00:00`).getTime();if(Number.isNaN(e))return null;const t=new Date,i=new Date(`${t.getFullYear()}-${String(t.getMonth()+1).padStart(2,"0")}-${String(t.getDate()).padStart(2,"0")}T00:00:00`).getTime(),l=Math.floor((e-i)/864e5);return l<0?{text:"已过期",type:"danger"}:l<=30?{text:`剩余 ${l} 天`,type:"warning"}:{text:"已设置",type:"info"}}}},[["render",function(a,k,b,y,F,N){const w=e("BackToDashboardBar"),M=_,C=l,P=h,x=p,V=g,I=v;return n(),t(C,{class:"vehicle-detail-page"},{default:i((()=>[s(w,{"back-to":"/pages/vehicle/list",text:"返回车辆列表"}),s(C,{class:"card"},{default:i((()=>[s(C,{class:"card-body header-body"},{default:i((()=>[s(C,{class:"plate-tag large"},{default:i((()=>[s(M,{class:"plate-text"},{default:i((()=>[d(r(F.vehicle.plate_no||"未填车牌"),1)])),_:1})])),_:1}),s(C,{class:"title-block"},{default:i((()=>[s(M,{class:"page-title"},{default:i((()=>[d(r(F.vehicle.name||"未命名车辆"),1)])),_:1}),s(M,{class:"page-sub"},{default:i((()=>[d(r(F.vehicle.remark||"暂无备注"),1)])),_:1})])),_:1}),s(C,{class:"summary"},{default:i((()=>[s(C,{class:"summary-item"},{default:i((()=>[s(M,{class:"summary-label"},{default:i((()=>[d("加油/保养/维修次数")])),_:1}),s(M,{class:"summary-value"},{default:i((()=>[d(r(F.maintainList.length),1)])),_:1})])),_:1}),s(C,{class:"summary-item"},{default:i((()=>[s(M,{class:"summary-label"},{default:i((()=>[d("累计金额")])),_:1}),s(M,{class:"summary-value price"},{default:i((()=>[d("￥"+r(N.maintainTotal),1)])),_:1})])),_:1})])),_:1}),N.isAdmin?(n(),t(C,{key:0,class:"header-actions"},{default:i((()=>[s(P,{class:"btn-soft",size:"mini",onClick:N.toggleEdit},{default:i((()=>[d(r(F.editMode?"取消编辑":"编辑车辆"),1)])),_:1},8,["onClick"])])),_:1})):o("",!0)])),_:1})])),_:1}),s(C,{class:"card"},{default:i((()=>[s(C,{class:"card-header"},{default:i((()=>[s(M,{class:"card-title"},{default:i((()=>[d("基础信息")])),_:1})])),_:1}),s(C,{class:"card-body"},{default:i((()=>[F.editMode?(n(),t(C,{key:1,class:"form-body"},{default:i((()=>[s(C,{class:"form-item"},{default:i((()=>[s(M,{class:"label"},{default:i((()=>[d("* 车牌号")])),_:1}),s(C,{class:"input-wrapper"},{default:i((()=>[s(x,{class:"input",value:F.editForm.plate_no,placeholder:"例如 浙A12345",maxlength:"10",onInput:N.onPlateInput},null,8,["value","onInput"])])),_:1}),s(M,{class:"helper"},{default:i((()=>[d("支持大写字母/数字/汉字/短横线，5-10 位")])),_:1})])),_:1}),s(C,{class:"form-item"},{default:i((()=>[s(M,{class:"label"},{default:i((()=>[d("车辆名称")])),_:1}),s(C,{class:"input-wrapper"},{default:i((()=>[s(x,{class:"input",modelValue:F.editForm.name,"onUpdate:modelValue":k[0]||(k[0]=a=>F.editForm.name=a),modelModifiers:{trim:!0},placeholder:"例如 1 号配送车"},null,8,["modelValue"])])),_:1})])),_:1}),s(C,{class:"form-item"},{default:i((()=>[s(M,{class:"label"},{default:i((()=>[d("保险续期时间")])),_:1}),s(V,{mode:"date",value:F.editForm.insurance_due_date,onChange:k[1]||(k[1]=a=>N.onDatePick("insurance_due_date",a))},{default:i((()=>[s(C,{class:"input-wrapper picker-wrapper"},{default:i((()=>[s(M,{class:"picker-text"},{default:i((()=>[d(r(F.editForm.insurance_due_date||"请选择日期"),1)])),_:1})])),_:1})])),_:1},8,["value"])])),_:1}),s(C,{class:"form-item"},{default:i((()=>[s(M,{class:"label"},{default:i((()=>[d("年检时间")])),_:1}),s(V,{mode:"date",value:F.editForm.inspection_due_date,onChange:k[2]||(k[2]=a=>N.onDatePick("inspection_due_date",a))},{default:i((()=>[s(C,{class:"input-wrapper picker-wrapper"},{default:i((()=>[s(M,{class:"picker-text"},{default:i((()=>[d(r(F.editForm.inspection_due_date||"请选择日期"),1)])),_:1})])),_:1})])),_:1},8,["value"])])),_:1}),s(C,{class:"form-item"},{default:i((()=>[s(M,{class:"label"},{default:i((()=>[d("备注")])),_:1}),s(C,{class:"input-wrapper"},{default:i((()=>[s(I,{class:"textarea",modelValue:F.editForm.remark,"onUpdate:modelValue":k[3]||(k[3]=a=>F.editForm.remark=a),modelModifiers:{trim:!0},placeholder:"可补充车辆类型、吨位、使用范围等信息"},null,8,["modelValue"])])),_:1})])),_:1}),s(C,{class:"form-actions"},{default:i((()=>[s(P,{class:"btn-soft",onClick:N.cancelEdit,disabled:F.saving},{default:i((()=>[d("取消")])),_:1},8,["onClick","disabled"]),s(P,{class:"btn-primary",onClick:N.submitEdit,disabled:F.saving},{default:i((()=>[d(r(F.saving?"保存中…":"保存车辆"),1)])),_:1},8,["onClick","disabled"])])),_:1})])),_:1})):(n(),t(C,{key:0,class:"info-grid"},{default:i((()=>[s(C,{class:"info-row"},{default:i((()=>[s(M,{class:"label"},{default:i((()=>[d("车牌号")])),_:1}),s(M,{class:"value"},{default:i((()=>[d(r(F.vehicle.plate_no||"-"),1)])),_:1})])),_:1}),s(C,{class:"info-row"},{default:i((()=>[s(M,{class:"label"},{default:i((()=>[d("车辆名称")])),_:1}),s(M,{class:"value"},{default:i((()=>[d(r(F.vehicle.name||"未命名车辆"),1)])),_:1})])),_:1}),s(C,{class:"info-row"},{default:i((()=>[s(M,{class:"label"},{default:i((()=>[d("保险续期")])),_:1}),s(C,{class:"value with-tag"},{default:i((()=>[s(M,null,{default:i((()=>[d(r(F.vehicle.insurance_due_date||"未设置"),1)])),_:1}),N.insuranceBadge?(n(),t(M,{key:0,class:c(["due-tag",N.insuranceBadge.type])},{default:i((()=>[d(r(N.insuranceBadge.text),1)])),_:1},8,["class"])):o("",!0)])),_:1})])),_:1}),s(C,{class:"info-row"},{default:i((()=>[s(M,{class:"label"},{default:i((()=>[d("年检时间")])),_:1}),s(C,{class:"value with-tag"},{default:i((()=>[s(M,null,{default:i((()=>[d(r(F.vehicle.inspection_due_date||"未设置"),1)])),_:1}),N.inspectionBadge?(n(),t(M,{key:0,class:c(["due-tag",N.inspectionBadge.type])},{default:i((()=>[d(r(N.inspectionBadge.text),1)])),_:1},8,["class"])):o("",!0)])),_:1})])),_:1}),s(C,{class:"info-row"},{default:i((()=>[s(M,{class:"label"},{default:i((()=>[d("备注")])),_:1}),s(M,{class:"value"},{default:i((()=>[d(r(F.vehicle.remark||"暂无备注"),1)])),_:1})])),_:1})])),_:1}))])),_:1})])),_:1}),s(C,{class:"card"},{default:i((()=>[s(C,{class:"card-header"},{default:i((()=>[s(M,{class:"card-title"},{default:i((()=>[d("加油 / 保养 / 维修记录")])),_:1}),s(M,{class:"card-sub"},{default:i((()=>[d("时间与项目需通过选择器填写，其他项可选填")])),_:1})])),_:1}),s(C,{class:"card-body"},{default:i((()=>[s(C,{class:"maintain-switch"},{default:i((()=>[s(C,{class:c(["maintain-tab",{active:"fuel"===F.maintainForm.mode}]),onClick:k[4]||(k[4]=a=>N.switchMaintainMode("fuel"))},{default:i((()=>[s(M,null,{default:i((()=>[d("加油")])),_:1})])),_:1},8,["class"]),s(C,{class:c(["maintain-tab",{active:"service"===F.maintainForm.mode}]),onClick:k[5]||(k[5]=a=>N.switchMaintainMode("service"))},{default:i((()=>[s(M,null,{default:i((()=>[d("保养 / 维修")])),_:1})])),_:1},8,["class"])])),_:1}),s(C,{class:c(["maintain-card",F.maintainForm.mode])},{default:i((()=>[s(C,{class:"maintain-card-title"},{default:i((()=>[s(M,null,{default:i((()=>[d(r("fuel"===F.maintainForm.mode?"加油记录":"保养 / 维修记录"),1)])),_:1}),s(M,{class:"card-tip"},{default:i((()=>[d("请选择日期与项目，其他可选填")])),_:1})])),_:1}),s(C,{class:"maintain-form-row"},{default:i((()=>[s(C,{class:"maintain-field"},{default:i((()=>[s(M,{class:"label"},{default:i((()=>[d("时间")])),_:1}),s(V,{mode:"date",value:F.maintainForm.date,onChange:N.onMaintainDateChange},{default:i((()=>[s(C,{class:c(["picker-input",{placeholder:!F.maintainForm.date}])},{default:i((()=>[d(r(F.maintainForm.date||"点击选择日期"),1)])),_:1},8,["class"])])),_:1},8,["value","onChange"])])),_:1}),s(C,{class:"maintain-field"},{default:i((()=>[s(M,{class:"label"},{default:i((()=>[d("项目")])),_:1}),s(V,{mode:"selector",range:N.currentProjectOptions,onChange:N.onMaintainProjectChange},{default:i((()=>[s(C,{class:"picker-input"},{default:i((()=>[d(r(F.maintainForm.project||"请选择项目"),1)])),_:1})])),_:1},8,["range","onChange"])])),_:1})])),_:1}),"fuel"===F.maintainForm.mode?(n(),t(C,{key:0,class:"maintain-form-row"},{default:i((()=>[s(C,{class:"maintain-field"},{default:i((()=>[s(M,{class:"label"},{default:i((()=>[d("油品 / 加油位置")])),_:1}),s(x,{class:"input",modelValue:F.maintainForm.part,"onUpdate:modelValue":k[6]||(k[6]=a=>F.maintainForm.part=a),placeholder:"例如 92# 汽油 / XX 加油站"},null,8,["modelValue"])])),_:1}),s(C,{class:"maintain-field"},{default:i((()=>[s(M,{class:"label"},{default:i((()=>[d("加油人")])),_:1}),s(V,{mode:"selector",range:N.staffPickerRange,value:F.staffPickerIndex,onChange:N.onStaffPickerChange},{default:i((()=>[s(C,{class:c(["picker-input",{placeholder:!F.maintainForm.staff}])},{default:i((()=>[d(r(F.maintainForm.staff||"选择配送员"),1)])),_:1},8,["class"])])),_:1},8,["range","value","onChange"])])),_:1})])),_:1})):(n(),t(C,{key:1,class:"maintain-form-row"},{default:i((()=>[s(C,{class:"maintain-field"},{default:i((()=>[s(M,{class:"label"},{default:i((()=>[d("配件 / 耗材")])),_:1}),s(x,{class:"input",modelValue:F.maintainForm.part,"onUpdate:modelValue":k[7]||(k[7]=a=>F.maintainForm.part=a),placeholder:"例如 机油滤芯 / 火花塞"},null,8,["modelValue"])])),_:1}),s(C,{class:"maintain-field"},{default:i((()=>[s(M,{class:"label"},{default:i((()=>[d("维修 / 保养人员")])),_:1}),s(V,{mode:"selector",range:N.staffPickerRange,value:F.staffPickerIndex,onChange:N.onStaffPickerChange},{default:i((()=>[s(C,{class:c(["picker-input",{placeholder:!F.maintainForm.staff}])},{default:i((()=>[d(r(F.maintainForm.staff||"选择配送员"),1)])),_:1},8,["class"])])),_:1},8,["range","value","onChange"])])),_:1})])),_:1})),s(C,{class:"maintain-form-row"},{default:i((()=>[s(C,{class:"maintain-field short"},{default:i((()=>[s(M,{class:"label"},{default:i((()=>[d("单价")])),_:1}),s(x,{class:"input",type:"digit",modelValue:F.maintainForm.unitPrice,"onUpdate:modelValue":k[8]||(k[8]=a=>F.maintainForm.unitPrice=a),placeholder:"数字"},null,8,["modelValue"])])),_:1}),s(C,{class:"maintain-field short"},{default:i((()=>[s(M,{class:"label"},{default:i((()=>[d("数量")])),_:1}),s(x,{class:"input",type:"digit",modelValue:F.maintainForm.quantity,"onUpdate:modelValue":k[9]||(k[9]=a=>F.maintainForm.quantity=a),placeholder:"1"},null,8,["modelValue"])])),_:1}),s(C,{class:"maintain-field short"},{default:i((()=>[s(M,{class:"label"},{default:i((()=>[d("公里数")])),_:1}),s(x,{class:"input",type:"digit",modelValue:F.maintainForm.mileage,"onUpdate:modelValue":k[10]||(k[10]=a=>F.maintainForm.mileage=a),placeholder:"车辆里程"},null,8,["modelValue"])])),_:1}),s(C,{class:"maintain-field short"},{default:i((()=>[s(M,{class:"label"},{default:i((()=>[d("金额")])),_:1}),s(x,{class:"input",type:"digit",modelValue:F.maintainForm.amount,"onUpdate:modelValue":k[11]||(k[11]=a=>F.maintainForm.amount=a),placeholder:"自动按单价*数量"},null,8,["modelValue"])])),_:1})])),_:1}),s(C,{class:"maintain-form-row"},{default:i((()=>[s(C,{class:"maintain-field"},{default:i((()=>[s(M,{class:"label"},{default:i((()=>[d("备注")])),_:1}),s(I,{class:"textarea",modelValue:F.maintainForm.remark,"onUpdate:modelValue":k[12]||(k[12]=a=>F.maintainForm.remark=a),placeholder:"例如：更换刹车片，附开票时间"},null,8,["modelValue"])])),_:1})])),_:1}),s(C,{class:"maintain-actions"},{default:i((()=>[s(P,{class:"btn-soft",onClick:N.resetMaintainForm},{default:i((()=>[d("清空当前输入")])),_:1},8,["onClick"]),s(P,{class:"btn-primary",onClick:N.addMaintainEntry},{default:i((()=>[d("加入记录")])),_:1},8,["onClick"])])),_:1})])),_:1},8,["class"]),F.maintainList.length?(n(),t(C,{key:0,class:"maintain-list"},{default:i((()=>[s(C,{class:"maintain-list-head"},{default:i((()=>[s(M,{class:"cell time"},{default:i((()=>[d("时间")])),_:1}),s(M,{class:"cell project"},{default:i((()=>[d("项目")])),_:1}),s(M,{class:"cell part"},{default:i((()=>[d("配件/耗材")])),_:1}),s(M,{class:"cell price"},{default:i((()=>[d("单价")])),_:1}),s(M,{class:"cell qty"},{default:i((()=>[d("数量")])),_:1}),s(M,{class:"cell amount"},{default:i((()=>[d("金额")])),_:1}),s(M,{class:"cell mileage"},{default:i((()=>[d("公里数")])),_:1}),s(M,{class:"cell staff"},{default:i((()=>[d("人员")])),_:1}),s(M,{class:"cell remark"},{default:i((()=>[d("备注")])),_:1}),s(M,{class:"cell op"},{default:i((()=>[d("操作")])),_:1})])),_:1}),(n(!0),u(f,null,m(F.maintainList,(a=>(n(),t(C,{key:a._id||a.local_id,class:"maintain-list-row"},{default:i((()=>[s(M,{class:"cell time"},{default:i((()=>[d(r(a.date||"-"),1)])),_:2},1024),s(M,{class:"cell project"},{default:i((()=>[d(r(a.project||"-"),1)])),_:2},1024),s(M,{class:"cell part"},{default:i((()=>[d(r(a.part||"-"),1)])),_:2},1024),s(M,{class:"cell price"},{default:i((()=>[d(r(N.formatMoney(a.unit_price)),1)])),_:2},1024),s(M,{class:"cell qty"},{default:i((()=>[d(r(a.quantity||0),1)])),_:2},1024),s(M,{class:"cell amount"},{default:i((()=>[d(r(N.formatMoney(a.amount)),1)])),_:2},1024),s(M,{class:"cell mileage"},{default:i((()=>[d(r(a.mileage||"-"),1)])),_:2},1024),s(M,{class:"cell staff"},{default:i((()=>[d(r(a.staff||"-"),1)])),_:2},1024),s(M,{class:"cell remark"},{default:i((()=>[d(r(a.remark||"-"),1)])),_:2},1024),s(M,{class:"cell op"},{default:i((()=>[s(M,{class:"action-link danger",onClick:e=>N.removeMaintain(a)},{default:i((()=>[d("删除")])),_:2},1032,["onClick"])])),_:2},1024)])),_:2},1024)))),128))])),_:1})):(n(),t(C,{key:1,class:"list-empty"},{default:i((()=>[s(M,{class:"empty-text"},{default:i((()=>[d("暂无加油/保养/维修记录，可在上方填写后加入")])),_:1})])),_:1})),s(C,{class:"maintain-footer"},{default:i((()=>[s(P,{class:"btn-soft",onClick:N.loadDetail,disabled:F.maintainSaving},{default:i((()=>[d("刷新")])),_:1},8,["onClick","disabled"]),s(P,{class:"btn-primary",onClick:N.saveMaintain,disabled:F.maintainSaving||!F.vehicle._id},{default:i((()=>[d(r(F.maintainSaving?"保存中…":"保存记录"),1)])),_:1},8,["onClick","disabled"])])),_:1})])),_:1})])),_:1})])),_:1})}],["__scopeId","data-v-5e117fe9"]]);export{I as default};
