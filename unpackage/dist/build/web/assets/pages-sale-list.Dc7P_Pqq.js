import{t as e,l as t,m as a,r as s,s as l,n as o,J as i,K as u,v as r,c,w as d,i as n,o as m,d as f,e as h,x as _,y as g,F as p,q as y,f as b,p as v,g as S,I as w,z as k,j as x}from"./index-B6DdPhlT.js";import{B as C}from"./BackToDashboardBar.0jhbkRhX.js";import{_ as N,e as I,f as F}from"./_plugin-vue_export-helper.Dda_PF8M.js";const T=N({components:{BackToDashboardBar:C},data:()=>({loading:!1,filters:{customerId:"",customerName:"",dateFrom:"",dateTo:"",vehicleId:"",bottleNo:""},customers:[],customerIndex:-1,customerKeyword:"",customerSuggests:[],customerSuggestLoading:!1,customerSuggestTimer:null,vehicles:[],vehicleKeyword:"",vehicleSuggests:[],vehicleSuggestLoading:!1,vehicleSuggestTimer:null,paymentStatusOptions:["全部","已付","挂账","部分已付","冲减"],paymentStatusIndex:0,records:[],page:1,pageSize:10,total:0,exporting:!1}),filters:{money(e){const t=Number(e);return isNaN(t)?"0.00":t.toFixed(2)},weight(e){const t=Number(e);return isNaN(t)?"0":t.toFixed(0)}},computed:{paymentStatusFilterLabel(){return this.paymentStatusOptions[this.paymentStatusIndex]||"全部"},pageCount(){return this.total&&this.pageSize?Math.ceil(this.total/this.pageSize):0},isSingleDay(){const e=this.filters.dateFrom,t=this.filters.dateTo;return!(!e||!t)&&e===t},stats(){let e=0,t=0,a=0,s=0;return this.records.forEach((l=>{const o=null!=l.display_should?Number(l.display_should)||0:Number(l.amount)||0,i=null!=l.display_received?Number(l.display_received)||0:Number(l.amount_received)||0,u=Number(l.write_off||0);e+=o,t+=i,a+=Math.max(o-i-u,0);let r=null!=l.total_net_weight?Number(l.total_net_weight)||0:null!=l.net_weight?Number(l.net_weight)||0:null!=l.weight_kg&&Number(l.weight_kg)||0;Number.isFinite(r)||(r=0),s+=r})),{totalShould:e,totalReceived:t,totalUnpaid:a,totalWeightKg:s}}},onLoad(e){if(console.log("[sale/list] onLoad"),!I())return;const t=new Date,a=this.formatDate(t),s=new Date(t.getTime()-5184e5),l=this.formatDate(s);this.filters.dateFrom=e.date_from||l,this.filters.dateTo=e.date_to||a,e.customer_id&&(this.filters.customerId=e.customer_id),e.customer_name&&(this.filters.customerName=decodeURIComponent(e.customer_name)),this.loadCustomers(),this.fetchList(!0)},onShow(){I()},methods:{formatDate:e=>`${e.getFullYear()}-${String(e.getMonth()+1).padStart(2,"0")}-${String(e.getDate()).padStart(2,"0")}`,onCustomerInput(e){const t=e.detail.value.trim();this.customerKeyword=t,this.filters.customerId="",this.filters.customerName="",this.customerSuggestTimer&&clearTimeout(this.customerSuggestTimer),this.customerSuggestTimer=setTimeout((()=>{this.fetchCustomerSuggests()}),200)},onSelectCustomer(e){this.customerKeyword=e.name,this.filters.customerId=e._id,this.filters.customerName=e.name,this.customerSuggests=[]},async loadCustomers(){try{const l=F();if(!l)return;const o=(await e.callFunction({name:"crm-customer",data:{action:"list",token:l,data:{pageSize:500}}})).result||{};if(401===o.code)return void t({title:"提示",content:o.msg||"登录已过期，请重新登录",showCancel:!1,success:()=>{a(),s({url:"/pages/login/login"})}});if(0===o.code)if(this.customers=o.data||[],this.filters.customerId){const e=this.customers.findIndex((e=>e._id===this.filters.customerId));e>=0&&(this.customerIndex=e)}else if(this.filters.customerName){const e=this.customers.findIndex((e=>e.name===this.filters.customerName));e>=0&&(this.customerIndex=e,this.filters.customerId=this.customers[e]._id)}}catch(l){console.error("loadCustomers error",l)}},async fetchCustomerSuggests(){const t=(this.customerKeyword||"").trim();if(!t)return void(this.customerSuggests=[]);const a=F();if(a){this.customerSuggestLoading=!0;try{const s=(await e.callFunction({name:"crm-customer",data:{action:"suggest",token:a,data:{keyword:t,limit:20}}})).result||{};0===s.code&&(this.customerSuggests=s.data||[])}catch(s){console.error("fetchCustomerSuggests error",s)}finally{this.customerSuggestLoading=!1}}},onVehicleInput(e){this.vehicleKeyword=e.detail.value.trim(),this.filters.vehicleId="",this.vehicleSuggestTimer&&clearTimeout(this.vehicleSuggestTimer),this.vehicleSuggestTimer=setTimeout((()=>{this.fetchVehicleSuggests()}),200)},onSelectVehicle(e){this.vehicleKeyword=e.plate_no||e.name||"",this.filters.vehicleId=e._id||"",this.vehicleSuggests=[]},async fetchVehicleSuggests(){const t=(this.vehicleKeyword||"").trim();if(!t)return void(this.vehicleSuggests=[]);const a=F();if(a){this.vehicleSuggestLoading=!0;try{const s=(await e.callFunction({name:"crm-vehicle",data:{action:"list",token:a,data:{keyword:t,pageSize:20}}})).result||{};0===s.code&&(this.vehicleSuggests=s.data||s.list||[])}catch(s){console.error("fetchVehicleSuggests error",s)}finally{this.vehicleSuggestLoading=!1}}},onDateFromChange(e){this.filters.dateFrom=e.detail.value},onDateToChange(e){this.filters.dateTo=e.detail.value},onPaymentStatusFilterChange(e){this.paymentStatusIndex=Number(e.detail.value)},resetFilter(){this.customerKeyword="",this.customerSuggests=[],this.customerIndex=-1,this.filters.customerId="",this.filters.customerName="",this.vehicleKeyword="",this.vehicleSuggests=[],this.filters.vehicleId="",this.filters.bottleNo="";const e=new Date,t=this.formatDate(e),a=new Date(e.getTime()-5184e5),s=this.formatDate(a);this.filters.dateFrom=s,this.filters.dateTo=t,this.paymentStatusIndex=0,this.page=1,this.fetchList(!0)},onSearch(){this.page=1,this.fetchList(!0)},async fetchList(o=!1){o&&(this.page=1);const i=F();if(i){this.loading=!0;try{const o=(await e.callFunction({name:"crm-sale",data:{action:"list",token:i,data:{customer_id:this.filters.customerId||void 0,customer_name:this.filters.customerName||void 0,date_from:this.filters.dateFrom||void 0,date_to:this.filters.dateTo||void 0,vehicle_id:this.filters.vehicleId||void 0,vehicle_kw:this.vehicleKeyword||void 0,bottle_no:this.filters.bottleNo||void 0,page:this.page,pageSize:this.pageSize}}})).result||{};if(401===o.code)return void t({title:"提示",content:o.msg||"登录已过期，请重新登录",showCancel:!1,success:()=>{a(),s({url:"/pages/login/login"})}});if(0!==o.code)return void l({title:o.msg||"加载失败",icon:"none"});const u=o.data||[];this.total=o.total||0,this.records=u.map((e=>{const t=e.price_unit||"kg";let a=0;a="m3"===t&&null!=e.flow_amount_should&&""!==e.flow_amount_should?Number(e.flow_amount_should)||0:Number(e.amount)||0;let s=0;s="m3"===t&&null!=e.flow_amount_received&&""!==e.flow_amount_received?Number(e.flow_amount_received)||0:Number(e.amount_received)||0;const l=Number(e.write_off||0),o=Math.max(a-s-l,0);return{...e,display_should:a,display_received:s,unpaid:o}}))}catch(u){console.error("fetchList error",u),l({title:"请求出错",icon:"none"})}finally{this.loading=!1}}else I()},changePage(e){const t=this.page+e;t<1||this.pageCount&&t>this.pageCount||(this.page=t,this.fetchList())},displayBottleNos(e,t){const a=e=>String(e||"").trim();let s=[];return"out"===t?Array.isArray(e.out_items)&&e.out_items.length?s=e.out_items.map((e=>a(e.bottle_no))).filter(Boolean):e.bottle_no&&(s=[a(e.bottle_no)]):"back"===t?Array.isArray(e.back_items)&&e.back_items.length?s=e.back_items.map((e=>a(e.bottle_no))).filter(Boolean):e.return_bottle_no&&(s=[a(e.return_bottle_no)]):"deposit"===t&&(Array.isArray(e.deposit_items)&&e.deposit_items.length?s=e.deposit_items.map((e=>a(e.bottle_no))).filter(Boolean):e.deposit_bottles_raw&&(s=e.deposit_bottles_raw.split(/[\/、,，\s]+/).map((e=>a(e))).filter(Boolean))),s.length?s.length>2?s.slice(0,2).join(" / ")+" / …":s.join(" / "):"—"},formatPriceUnit(e){const t=e||"kg";return"kg"===t?"元/kg":"bottle"===t?"元/瓶":"m3"===t?"元/m³":t},formatBizMode(e){const t=e||"bottle";return"truck"===t?"整车":"bottle"===t?"瓶装":t},goDetail(e){e&&e._id&&o({url:`/pages/sale/detail?id=${e._id}`})},async onExport(){if(this.total){this.exporting=!0;try{const o=F(),r=(await e.callFunction({name:"crm-bill",data:{action:"exportSaleListExcel",token:o,data:{customer_id:this.filters.customerId||"",customer_name:this.filters.customerName||"",date_from:this.filters.dateFrom,date_to:this.filters.dateTo,includeFlow:!0}}})).result||{};if(401===r.code)return t({title:"提示",content:r.msg||"登录已过期，请重新登录",showCancel:!1,success:()=>{a(),s({url:"/pages/login/login"})}}),void(this.exporting=!1);if(0!==r.code||!r.url)return void l({title:r.msg||"导出失败",icon:"none"});const c=r.url;i({url:c,success:e=>{200===e.statusCode?u?u({filePath:e.tempFilePath,success:()=>{}}):l({title:"已下载，可在本机查看",icon:"none"}):l({title:"下载失败",icon:"none"})},fail:()=>{l({title:"下载失败",icon:"none"})}})}catch(o){console.error("exportSaleListExcel error",o),l({title:"导出失败",icon:"none"})}finally{this.exporting=!1}}else l({title:"没有可导出的数据",icon:"none"})}}},[["render",function(e,t,a,s,l,o){const i=r("BackToDashboardBar"),u=S,C=n,N=w,I=k,F=x;return m(),c(C,{class:"page"},{default:d((()=>[f(C,{class:"inner"},{default:d((()=>[f(i),f(C,{class:"page-header"},{default:d((()=>[f(C,{class:"page-header-left"},{default:d((()=>[f(C,{class:"page-icon"},{default:d((()=>[f(u,{class:"page-icon-text"},{default:d((()=>[h("销")])),_:1})])),_:1}),f(C,{class:"page-header-text"},{default:d((()=>[f(u,{class:"page-title"},{default:d((()=>[h("销售记录列表")])),_:1}),f(u,{class:"page-sub"},{default:d((()=>[h(" 按日期和客户查询销售记录，支持查看详情与对账 ")])),_:1})])),_:1})])),_:1})])),_:1}),f(C,{class:"card card-filter"},{default:d((()=>[f(C,{class:"card-header"},{default:d((()=>[f(u,{class:"card-title"},{default:d((()=>[h("筛选条件")])),_:1})])),_:1}),f(C,{class:"card-body"},{default:d((()=>[f(C,{class:"form-row"},{default:d((()=>[f(C,{class:"form-item col-quarter"},{default:d((()=>[f(u,{class:"label"},{default:d((()=>[h("客户")])),_:1}),f(C,{class:"input-wrapper"},{default:d((()=>[f(N,{class:"input",type:"text",modelValue:l.customerKeyword,"onUpdate:modelValue":t[0]||(t[0]=e=>l.customerKeyword=e),placeholder:"输入客户名（支持模糊搜索）",onInput:o.onCustomerInput},null,8,["modelValue","onInput"])])),_:1}),l.customerSuggests.length||l.customerSuggestLoading?(m(),c(C,{key:0,class:"suggest-panel"},{default:d((()=>[(m(!0),_(p,null,g(l.customerSuggests,(e=>(m(),c(C,{key:e._id,class:"suggest-item",onClick:t=>o.onSelectCustomer(e)},{default:d((()=>[h(b(e.name),1)])),_:2},1032,["onClick"])))),128)),l.customerSuggestLoading?(m(),c(C,{key:0,class:"suggest-loading"},{default:d((()=>[h(" 查询中… ")])),_:1})):y("",!0)])),_:1})):y("",!0)])),_:1}),f(C,{class:"form-item col-quarter"},{default:d((()=>[f(u,{class:"label"},{default:d((()=>[h("起始日期")])),_:1}),f(I,{mode:"date",value:l.filters.dateFrom,onChange:o.onDateFromChange},{default:d((()=>[f(C,{class:"input-wrapper"},{default:d((()=>[f(C,{class:"picker"},{default:d((()=>[f(u,null,{default:d((()=>[h(b(l.filters.dateFrom||"请选择起始日期"),1)])),_:1})])),_:1})])),_:1})])),_:1},8,["value","onChange"])])),_:1}),f(C,{class:"form-item col-quarter"},{default:d((()=>[f(u,{class:"label"},{default:d((()=>[h("截止日期")])),_:1}),f(I,{mode:"date",value:l.filters.dateTo,onChange:o.onDateToChange},{default:d((()=>[f(C,{class:"input-wrapper"},{default:d((()=>[f(C,{class:"picker"},{default:d((()=>[f(u,null,{default:d((()=>[h(b(l.filters.dateTo||"请选择截止日期"),1)])),_:1})])),_:1})])),_:1})])),_:1},8,["value","onChange"])])),_:1}),f(C,{class:"form-item col-quarter"},{default:d((()=>[f(u,{class:"label"},{default:d((()=>[h("收款状态")])),_:1}),f(I,{mode:"selector",range:l.paymentStatusOptions,value:l.paymentStatusIndex,onChange:o.onPaymentStatusFilterChange},{default:d((()=>[f(C,{class:"input-wrapper"},{default:d((()=>[f(C,{class:"picker"},{default:d((()=>[f(u,null,{default:d((()=>[h(b(o.paymentStatusFilterLabel),1)])),_:1})])),_:1})])),_:1})])),_:1},8,["range","value","onChange"])])),_:1})])),_:1}),f(C,{class:"form-row"},{default:d((()=>[f(C,{class:"form-item col-quarter"},{default:d((()=>[f(u,{class:"label"},{default:d((()=>[h("车辆")])),_:1}),f(C,{class:"input-wrapper"},{default:d((()=>[f(N,{class:"input",type:"text",modelValue:l.vehicleKeyword,"onUpdate:modelValue":t[1]||(t[1]=e=>l.vehicleKeyword=e),placeholder:"输入车牌号（模糊搜索）",onInput:o.onVehicleInput,onConfirm:o.onSearch},null,8,["modelValue","onInput","onConfirm"])])),_:1}),l.vehicleSuggests.length||l.vehicleSuggestLoading?(m(),c(C,{key:0,class:"suggest-panel"},{default:d((()=>[(m(!0),_(p,null,g(l.vehicleSuggests,(e=>(m(),c(C,{key:e._id,class:"suggest-item",onClick:t=>o.onSelectVehicle(e)},{default:d((()=>[h(b(e.plate_no||e.name),1)])),_:2},1032,["onClick"])))),128)),l.vehicleSuggestLoading?(m(),c(C,{key:0,class:"suggest-loading"},{default:d((()=>[h(" 查询中… ")])),_:1})):y("",!0)])),_:1})):y("",!0)])),_:1}),f(C,{class:"form-item col-quarter"},{default:d((()=>[f(u,{class:"label"},{default:d((()=>[h("瓶号")])),_:1}),f(C,{class:"input-wrapper"},{default:d((()=>[f(N,{class:"input",type:"text",modelValue:l.filters.bottleNo,"onUpdate:modelValue":t[2]||(t[2]=e=>l.filters.bottleNo=e),modelModifiers:{trim:!0},placeholder:"输入瓶号筛选",onConfirm:o.onSearch},null,8,["modelValue","onConfirm"])])),_:1})])),_:1})])),_:1}),f(C,{class:"btn-row-inline"},{default:d((()=>[f(F,{class:"btn-soft",onClick:o.resetFilter},{default:d((()=>[h("重置")])),_:1},8,["onClick"]),f(F,{class:"btn-primary",onClick:o.onSearch},{default:d((()=>[h("查询")])),_:1},8,["onClick"])])),_:1})])),_:1})])),_:1}),l.records.length?(m(),c(C,{key:0,class:"card card-summary"},{default:d((()=>[f(C,{class:"summary-row"},{default:d((()=>[f(C,{class:"summary-item"},{default:d((()=>[f(u,{class:"summary-label"},{default:d((()=>[h("应收合计")])),_:1}),f(C,{class:"summary-value-row"},{default:d((()=>[f(u,{class:"summary-value"},{default:d((()=>[h(b(o.stats.totalShould|e.money),1)])),_:1}),f(u,{class:"summary-unit"},{default:d((()=>[h("元")])),_:1})])),_:1})])),_:1}),f(C,{class:"summary-item"},{default:d((()=>[f(u,{class:"summary-label"},{default:d((()=>[h(b(o.isSingleDay?"今日销售额":"实收合计"),1)])),_:1}),f(C,{class:"summary-value-row"},{default:d((()=>[f(u,{class:"summary-value"},{default:d((()=>[h(b(o.stats.totalReceived|e.money),1)])),_:1}),f(u,{class:"summary-unit"},{default:d((()=>[h("元")])),_:1})])),_:1})])),_:1}),f(C,{class:"summary-item"},{default:d((()=>[f(u,{class:"summary-label"},{default:d((()=>[h("未收合计")])),_:1}),f(C,{class:"summary-value-row"},{default:d((()=>[f(u,{class:v(["summary-value",o.stats.totalUnpaid>0?"text-danger":"text-normal"])},{default:d((()=>[h(b(o.stats.totalUnpaid|e.money),1)])),_:1},8,["class"]),f(u,{class:"summary-unit"},{default:d((()=>[h("元")])),_:1})])),_:1})])),_:1}),f(C,{class:"summary-item"},{default:d((()=>[f(u,{class:"summary-label"},{default:d((()=>[h(b(o.isSingleDay?"今日出气量":"出气量合计"),1)])),_:1}),f(C,{class:"summary-value-row"},{default:d((()=>[f(u,{class:"summary-value"},{default:d((()=>[h(b(o.stats.totalWeightKg|e.weight),1)])),_:1}),f(u,{class:"summary-unit"},{default:d((()=>[h("kg")])),_:1})])),_:1})])),_:1}),f(C,{class:"summary-item"},{default:d((()=>[f(u,{class:"summary-label"},{default:d((()=>[h("记录条数")])),_:1}),f(C,{class:"summary-value-row"},{default:d((()=>[f(u,{class:"summary-value"},{default:d((()=>[h(b(l.total),1)])),_:1}),f(u,{class:"summary-unit"},{default:d((()=>[h("条")])),_:1})])),_:1})])),_:1})])),_:1})])),_:1})):y("",!0),f(C,{class:"card card-list"},{default:d((()=>[f(C,{class:"card-header card-header-with-action"},{default:d((()=>[f(C,{class:"card-header-left"},{default:d((()=>[f(u,{class:"card-title"},{default:d((()=>[h("销售记录列表")])),_:1}),f(u,{class:"card-sub"},{default:d((()=>[h(" 点击任意行可查看明细，包含多瓶记录、存瓶与结算信息 ")])),_:1})])),_:1}),f(C,{class:"card-header-right"},{default:d((()=>[f(F,{class:"btn-soft btn-export",disabled:l.exporting||!l.total,onClick:o.onExport},{default:d((()=>[l.exporting?(m(),c(u,{key:1},{default:d((()=>[h("导出中…")])),_:1})):(m(),c(u,{key:0},{default:d((()=>[h("导出当前筛选范围")])),_:1}))])),_:1},8,["disabled","onClick"])])),_:1})])),_:1}),l.loading?(m(),c(C,{key:0,class:"list-loading"},{default:d((()=>[f(u,{class:"loading-text"},{default:d((()=>[h("加载中…")])),_:1})])),_:1})):l.records.length?(m(),c(C,{key:2,class:"list-wrapper"},{default:d((()=>[f(C,{class:"sale-table"},{default:d((()=>[f(C,{class:"sale-row sale-row-header"},{default:d((()=>[f(C,{class:"sale-col col-date"},{default:d((()=>[f(u,{class:"header-text"},{default:d((()=>[h("日期")])),_:1})])),_:1}),f(C,{class:"sale-col col-customer"},{default:d((()=>[f(u,{class:"header-text"},{default:d((()=>[h("客户")])),_:1})])),_:1}),f(C,{class:"sale-col col-bottle"},{default:d((()=>[f(u,{class:"header-text"},{default:d((()=>[h("出瓶")])),_:1})])),_:1}),f(C,{class:"sale-col col-bottle"},{default:d((()=>[f(u,{class:"header-text"},{default:d((()=>[h("回瓶")])),_:1})])),_:1}),f(C,{class:"sale-col col-bottle"},{default:d((()=>[f(u,{class:"header-text"},{default:d((()=>[h("存瓶")])),_:1})])),_:1}),f(C,{class:"sale-col col-amount"},{default:d((()=>[f(u,{class:"header-text"},{default:d((()=>[h("应收")])),_:1})])),_:1}),f(C,{class:"sale-col col-amount"},{default:d((()=>[f(u,{class:"header-text"},{default:d((()=>[h("实收")])),_:1})])),_:1}),f(C,{class:"sale-col col-amount"},{default:d((()=>[f(u,{class:"header-text"},{default:d((()=>[h("未收")])),_:1})])),_:1}),f(C,{class:"sale-col col-status"},{default:d((()=>[f(u,{class:"header-text"},{default:d((()=>[h("收款状态")])),_:1})])),_:1})])),_:1}),(m(!0),_(p,null,g(l.records,(t=>(m(),c(C,{key:t._id,class:v(["sale-row sale-row-body",{"row-unpaid":t.unpaid>0,"row-partial":t.unpaid>0&&Number(t.display_received||t.amount_received||0)>0}]),onClick:e=>o.goDetail(t)},{default:d((()=>[f(C,{class:"sale-col col-date"},{default:d((()=>[f(u,{class:"cell-main"},{default:d((()=>[h(b(t.date||"-"),1)])),_:2},1024)])),_:2},1024),f(C,{class:"sale-col col-customer"},{default:d((()=>[f(u,{class:"cell-main"},{default:d((()=>[h(b(t.customer_name||"未知客户"),1)])),_:2},1024),f(u,{class:"cell-sub"},{default:d((()=>[h(b(o.formatBizMode(t.biz_mode))+" · "+b(o.formatPriceUnit(t.price_unit)),1)])),_:2},1024)])),_:2},1024),f(C,{class:"sale-col col-bottle"},{default:d((()=>[f(u,{class:"cell-label"},{default:d((()=>[h("出：")])),_:1}),f(u,{class:"cell-main"},{default:d((()=>[h(b(o.displayBottleNos(t,"out")),1)])),_:2},1024)])),_:2},1024),f(C,{class:"sale-col col-bottle"},{default:d((()=>[f(u,{class:"cell-label"},{default:d((()=>[h("回：")])),_:1}),f(u,{class:"cell-main"},{default:d((()=>[h(b(o.displayBottleNos(t,"back")),1)])),_:2},1024)])),_:2},1024),f(C,{class:"sale-col col-bottle"},{default:d((()=>[f(u,{class:"cell-label"},{default:d((()=>[h("存：")])),_:1}),f(u,{class:"cell-main"},{default:d((()=>[h(b(o.displayBottleNos(t,"deposit")),1)])),_:2},1024)])),_:2},1024),f(C,{class:"sale-col col-amount"},{default:d((()=>[f(C,{class:"amount-block"},{default:d((()=>[f(u,{class:"cell-main amount-main"},{default:d((()=>[h(b((null!=t.display_should?t.display_should:t.amount)|e.money),1)])),_:2},1024)])),_:2},1024)])),_:2},1024),f(C,{class:"sale-col col-amount"},{default:d((()=>[f(C,{class:"amount-block"},{default:d((()=>[f(u,{class:"cell-main amount-main"},{default:d((()=>[h(b((null!=t.display_received?t.display_received:t.amount_received)|e.money),1)])),_:2},1024)])),_:2},1024)])),_:2},1024),f(C,{class:"sale-col col-amount"},{default:d((()=>[f(C,{class:"amount-block"},{default:d((()=>[f(u,{class:v(["cell-main amount-main",t.unpaid>0?"text-danger":"text-normal"])},{default:d((()=>[h(b(t.unpaid|e.money),1)])),_:2},1032,["class"])])),_:2},1024)])),_:2},1024),f(C,{class:"sale-col col-status"},{default:d((()=>[f(C,{class:v(["status-pill",{paid:t.unpaid<=0&&Number((null!=t.display_should?t.display_should:t.amount)||0)>0,unpaid:t.unpaid>0&&0===Number((null!=t.display_received?t.display_received:t.amount_received)||0),partial:t.unpaid>0&&Number((null!=t.display_received?t.display_received:t.amount_received)||0)>0}])},{default:d((()=>[h(b(t.payment_status||(t.unpaid>0?Number((null!=t.display_received?t.display_received:t.amount_received)||0)>0?"部分已付":"挂账":"已付")),1)])),_:2},1032,["class"])])),_:2},1024)])),_:2},1032,["class","onClick"])))),128))])),_:1}),f(C,{class:"pagination"},{default:d((()=>[f(F,{class:"btn-soft btn-mini",disabled:l.page<=1,onClick:t[3]||(t[3]=e=>o.changePage(-1))},{default:d((()=>[h(" 上一页 ")])),_:1},8,["disabled"]),f(u,{class:"page-info"},{default:d((()=>[h(" 第 "+b(l.page)+" / "+b(o.pageCount||1)+" 页 ",1)])),_:1}),f(F,{class:"btn-soft btn-mini",disabled:l.page>=o.pageCount,onClick:t[4]||(t[4]=e=>o.changePage(1))},{default:d((()=>[h(" 下一页 ")])),_:1},8,["disabled"])])),_:1})])),_:1})):(m(),c(C,{key:1,class:"empty"},{default:d((()=>[f(u,{class:"empty-main"},{default:d((()=>[h("暂无符合条件的销售记录")])),_:1}),f(u,{class:"empty-sub"},{default:d((()=>[h("请调整客户或日期范围后重试")])),_:1})])),_:1}))])),_:1})])),_:1})])),_:1})}],["__scopeId","data-v-864d3cdd"]]);export{T as default};
