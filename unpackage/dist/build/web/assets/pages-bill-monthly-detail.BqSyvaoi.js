import{s as t,j as e,G as a,t as l,H as o,J as s,n as i,q as c,c as u,w as n,i as d,o as r,d as m,e as f,l as _,m as h,p,u as y,v as g,F as b,f as w,I as k,g as v,A as x}from"./index-C85BGToL.js";import{B}from"./BackToDashboardBar.BBeceW6P.js";import{g as N}from"./auth.yulpUJA0.js";import{_ as C}from"./_plugin-vue_export-helper.BCo6x5W8.js";const D=C({components:{BackToDashboardBar:B},data:()=>({loading:!1,canLoad:!0,customerId:"",customerName:"",dateFrom:"",dateTo:"",records:[],userInfo:{},payAmountInput:"",writeOffInput:"",distributing:!1,exporting:!1,hasFlowRecords:!1}),filters:{money(t){const e=Number(t);return isNaN(e)?"0.00":e.toFixed(2)}},computed:{stats(){let t=0,e=0,a=0,l=0;return this.records.forEach((o=>{const s=Number(o.amount)||0,i=Number(o.amount_received)||0,c=Number(o.write_off||0);t+=s,e+=i,l+=c,a+=Math.max(s-i-c,0)})),{totalShould:t,totalReceived:e,totalUnpaid:a,totalWriteOff:l}},isAdmin(){const t=this.userInfo&&this.userInfo.role;return!t||"admin"===t},flowRecords(){return this.records.filter((t=>"m3"===t.price_unit)).map((t=>{const e=null!=t.flow_unit_price?Number(t.flow_unit_price):null!=t.unit_price?Number(t.unit_price):null,a=null!=t.flow_amount_should?Number(t.flow_amount_should):Number(t.amount)||0,l=null!=t.flow_amount_received?Number(t.flow_amount_received):Number(t.amount_received)||0,o=Number(t.write_off||0),s=Math.max(a-l-o,0);return{...t,_flow_unit_price:e,_flow_should:a,_flow_received:l,_flow_write_off:o,_flow_unpaid:s}}))}},onLoad(e){if(this.userInfo=N()||{},this.customerId=e.customer_id||"",this.customerName=decodeURIComponent(e.customer_name||""),this.dateFrom=e.date_from||"",this.dateTo=e.date_to||"",!this.customerId&&!this.customerName||!this.dateFrom||!this.dateTo)return t({title:"缺少客户或日期参数",icon:"none"}),void(this.canLoad=!1);this.loadDetail()},methods:{getToken:()=>e("crm_token")||e("token")||"",getBottleList(t,e){const a=t=>String(t||"").trim();let l=[];return"out"===e?Array.isArray(t.out_items)&&t.out_items.length?l=t.out_items.map((t=>a(t.bottle_no))).filter(Boolean):t.bottle_no&&(l=[a(t.bottle_no)]):"back"===e?Array.isArray(t.back_items)&&t.back_items.length?l=t.back_items.map((t=>a(t.bottle_no))).filter(Boolean):t.return_bottle_no&&(l=[a(t.return_bottle_no)]):"deposit"===e&&(Array.isArray(t.deposit_items)&&t.deposit_items.length?l=t.deposit_items.map((t=>a(t.bottle_no))).filter(Boolean):t.deposit_bottles_raw&&(l=t.deposit_bottles_raw.split(/[\/、,，\s]+/).map((t=>a(t))).filter(Boolean))),l},displayOutBottles(t){const e=this.getBottleList(t,"out");return e.length?e.join(" / "):"-"},displayBackBottles(t){const e=this.getBottleList(t,"back");return e.length?e.join(" / "):"-"},displayDepositBottles(t){const e=this.getBottleList(t,"deposit");return e.length?e.join(" / "):"-"},onBottleCellClick(t,e){const l=this.getBottleList(t,e);l.length&&(1!==l.length?a({itemList:l,success:t=>{const e=t.tapIndex;e>=0&&e<l.length&&this.goBottleDetail(l[e])}}):this.goBottleDetail(l[0]))},async enrichCarNoFromVehicle(){const t=new Set;this.records.forEach((e=>{!e.car_no&&e.vehicle_id&&t.add(e.vehicle_id)}));if(Array.from(t).length)try{const t=(await l.callFunction({name:"crm-vehicle",data:{action:"list"}})).result||{};if(0!==t.code||!Array.isArray(t.data))return void console.warn("crm-vehicle list failed: ",t);const e=t.data||[],a={};e.forEach((t=>{t&&t._id&&(a[t._id]=t.plate_no||t.car_no||"")})),this.records=this.records.map((t=>!t.car_no&&t.vehicle_id&&a[t.vehicle_id]?{...t,car_no:a[t.vehicle_id]}:t))}catch(e){console.error("enrichCarNoFromVehicle error",e)}},async loadDetail(){if(this.canLoad){this.loading=!0;try{const e=this.getToken(),a=(await l.callFunction({name:"crm-bill",data:{action:"customerDailyDetailByRange",token:e,data:{customer_id:this.customerId||"",customer_name:this.customerName||"",date_from:this.dateFrom,date_to:this.dateTo}}})).result||{};if(0!==a.code)return void t({title:a.msg||"加载明细失败",icon:"none"});const o=a.data||[];this.records=o.map((t=>{const e=Number(t.amount)||0,a=Number(t.amount_received)||0,l=Number(t.write_off||0),o=Math.max(e-a-l,0);return{...t,unpaid:o}})),this.hasFlowRecords=this.records.some((t=>"m3"===t.price_unit)),await this.enrichCarNoFromVehicle()}catch(e){console.error("loadDetail error",e),t({title:"加载明细失败",icon:"none"})}finally{this.loading=!1}}},formatNumber(t){const e=Number(t);return isNaN(e)?"-":e.toFixed(2)},async onAutoDistribute(){if(!this.isAdmin)return void t({title:"当前账号无权进行智能分配",icon:"none"});if(!this.records.length)return void t({title:"没有可分配的记录",icon:"none"});const e=Number(this.payAmountInput||0),a=Number(this.writeOffInput||0);if(isNaN(e)||e<0)return void t({title:"请输入正确的收款金额",icon:"none"});if(isNaN(a)||a<0)return void t({title:"抹零不能为负数",icon:"none"});if(0===e&&0===a)return void t({title:"金额和抹零不能都为 0",icon:"none"});const o=this.records.map((t=>t._id)).filter(Boolean);if(o.length){this.distributing=!0;try{const s=this.getToken(),i=(await l.callFunction({name:"crm-bill",data:{action:"autoDistributePayment",token:s,data:{record_ids:o,pay_amount:e,write_off_amount:a}}})).result||{};if(0!==i.code)return void t({title:i.msg||"分配失败",icon:"none"});t({title:"分配完成",icon:"success"}),this.payAmountInput="",this.writeOffInput="",this.loadDetail()}catch(s){console.error("autoDistributePayment error",s),t({title:"分配失败，请稍后重试",icon:"none"})}finally{this.distributing=!1}}else t({title:"记录缺少 ID，无法分配",icon:"none"})},async onExport(){if(this.records.length){this.exporting=!0;try{const e=this.getToken(),a=(await l.callFunction({name:"crm-bill",data:{action:"exportCustomerDailyDetailExcel",token:e,data:{customer_id:this.customerId||"",customer_name:this.customerName||"",date_from:this.dateFrom,date_to:this.dateTo}}})).result||{};if(0!==a.code||!a.url)return void t({title:a.msg||"导出失败",icon:"none"});const i=a.url;o({url:i,success:e=>{200===e.statusCode?s?s({filePath:e.tempFilePath,success:()=>{}}):t({title:"已下载，可在本机查看",icon:"none"}):t({title:"下载失败",icon:"none"})},fail:()=>{t({title:"下载失败",icon:"none"})}})}catch(e){console.error("exportCustomerDailyDetailExcel error",e),t({title:"导出失败",icon:"none"})}finally{this.exporting=!1}}else t({title:"没有可导出的数据",icon:"none"})},goBottleDetail(t){const e=(t||"").trim();e&&i({url:`/pages/bottle/detail?number=${encodeURIComponent(e)}`})},goSaleDetail(e){const a=e._id||e.sale_id;if(!a)return t({title:"缺少销售记录ID",icon:"none"});i({url:`/pages/sale/detail?id=${a}`})}}},[["render",function(t,e,a,l,o,s){const i=c("BackToDashboardBar"),B=w,N=d,C=k,D=v;return r(),u(N,{class:"page"},{default:n((()=>[m(N,{class:"inner"},{default:n((()=>[m(i,{"back-to":"/pages/bill/monthly",text:"返回"}),m(N,{class:"page-header"},{default:n((()=>[m(N,{class:"page-header-left"},{default:n((()=>[m(N,{class:"page-icon"},{default:n((()=>[m(B,{class:"page-icon-text"},{default:n((()=>[f("日")])),_:1})])),_:1}),m(N,{class:"page-header-text"},{default:n((()=>[m(B,{class:"page-title"},{default:n((()=>[f(_(o.customerName||"未知客户")+" · "+_(o.dateFrom)+" ~ "+_(o.dateTo),1)])),_:1}),m(B,{class:"page-sub"},{default:n((()=>[f(" 时间范围内所有销售记录明细（含瓶号、金额、抹零与收款状态） ")])),_:1})])),_:1})])),_:1})])),_:1}),m(N,{class:"card card-summary"},{default:n((()=>[m(N,{class:"summary-row"},{default:n((()=>[m(N,{class:"summary-item"},{default:n((()=>[m(B,{class:"summary-label"},{default:n((()=>[f("应收合计")])),_:1}),m(N,{class:"summary-value-row"},{default:n((()=>[m(B,{class:"summary-value"},{default:n((()=>[f(_(s.stats.totalShould|t.money),1)])),_:1}),m(B,{class:"summary-unit"},{default:n((()=>[f("元")])),_:1})])),_:1})])),_:1}),m(N,{class:"summary-item"},{default:n((()=>[m(B,{class:"summary-label"},{default:n((()=>[f("实收合计")])),_:1}),m(N,{class:"summary-value-row"},{default:n((()=>[m(B,{class:"summary-value"},{default:n((()=>[f(_(s.stats.totalReceived|t.money),1)])),_:1}),m(B,{class:"summary-unit"},{default:n((()=>[f("元")])),_:1})])),_:1})])),_:1}),m(N,{class:"summary-item"},{default:n((()=>[m(B,{class:"summary-label"},{default:n((()=>[f("抹零合计")])),_:1}),m(N,{class:"summary-value-row"},{default:n((()=>[m(B,{class:"summary-value"},{default:n((()=>[f(_(s.stats.totalWriteOff|t.money),1)])),_:1}),m(B,{class:"summary-unit"},{default:n((()=>[f("元")])),_:1})])),_:1})])),_:1}),m(N,{class:"summary-item"},{default:n((()=>[m(B,{class:"summary-label"},{default:n((()=>[f("未收合计")])),_:1}),m(N,{class:"summary-value-row"},{default:n((()=>[m(B,{class:h(["summary-value",s.stats.totalUnpaid>0?"text-danger":"text-normal"])},{default:n((()=>[f(_(s.stats.totalUnpaid|t.money),1)])),_:1},8,["class"]),m(B,{class:"summary-unit"},{default:n((()=>[f("元")])),_:1})])),_:1})])),_:1}),m(N,{class:"summary-item"},{default:n((()=>[m(B,{class:"summary-label"},{default:n((()=>[f("记录条数")])),_:1}),m(N,{class:"summary-value-row"},{default:n((()=>[m(B,{class:"summary-value"},{default:n((()=>[f(_(o.records.length),1)])),_:1}),m(B,{class:"summary-unit"},{default:n((()=>[f("条")])),_:1})])),_:1})])),_:1})])),_:1})])),_:1}),m(N,{class:"card card-table"},{default:n((()=>[m(N,{class:"card-header"},{default:n((()=>[m(B,{class:"card-title"},{default:n((()=>[f("销售记录明细")])),_:1}),m(B,{class:"card-sub"},{default:n((()=>[f(" 点击瓶号可查看瓶子详情；可通过智能分配调整实收；支持导出 Excel "),o.hasFlowRecords?(r(),u(B,{key:0,class:"tag-flow"},{default:n((()=>[f(" （含流量结算记录） ")])),_:1})):p("",!0)])),_:1})])),_:1}),o.records.length?(r(),u(N,{key:0,class:"auto-card"},{default:n((()=>[m(N,{class:"auto-row"},{default:n((()=>[m(N,{class:"auto-field"},{default:n((()=>[m(B,{class:"auto-label"},{default:n((()=>[f("本次收款金额")])),_:1}),m(N,{class:"auto-input-wrapper"},{default:n((()=>[m(C,{class:"auto-input",modelValue:o.payAmountInput,"onUpdate:modelValue":e[0]||(e[0]=t=>o.payAmountInput=t),type:"digit",placeholder:"例如 3310"},null,8,["modelValue"])])),_:1})])),_:1}),m(N,{class:"auto-field"},{default:n((()=>[m(B,{class:"auto-label"},{default:n((()=>[f("本次抹零")])),_:1}),m(N,{class:"auto-input-wrapper"},{default:n((()=>[m(C,{class:"auto-input",modelValue:o.writeOffInput,"onUpdate:modelValue":e[1]||(e[1]=t=>o.writeOffInput=t),type:"digit",placeholder:"例如 8"},null,8,["modelValue"])])),_:1})])),_:1})])),_:1}),m(N,{class:"auto-row auto-row-bottom"},{default:n((()=>[m(D,{class:"btn-soft btn-export",disabled:o.exporting,onClick:s.onExport},{default:n((()=>[o.exporting?(r(),u(B,{key:1},{default:n((()=>[f("导出中…")])),_:1})):(r(),u(B,{key:0},{default:n((()=>[f("导出 Excel")])),_:1}))])),_:1},8,["disabled","onClick"]),s.isAdmin?(r(),u(D,{key:0,class:"btn-primary",disabled:o.distributing,onClick:s.onAutoDistribute},{default:n((()=>[o.distributing?(r(),u(B,{key:1},{default:n((()=>[f("分配中…")])),_:1})):(r(),u(B,{key:0},{default:n((()=>[f("智能分配到下方记录")])),_:1}))])),_:1},8,["disabled","onClick"])):p("",!0)])),_:1})])),_:1})):p("",!0),o.loading?(r(),u(N,{key:1,class:"list-loading"},{default:n((()=>[m(B,{class:"loading-text"},{default:n((()=>[f("加载中…")])),_:1})])),_:1})):0===o.records.length?(r(),u(N,{key:2,class:"empty"},{default:n((()=>[m(B,{class:"empty-main"},{default:n((()=>[f("该时间段暂无销售记录")])),_:1}),m(B,{class:"empty-sub"},{default:n((()=>[f("可返回上一页选择其他日期或客户")])),_:1})])),_:1})):(r(),u(N,{key:3,class:"table-wrapper"},{default:n((()=>[m(N,{class:"table-header"},{default:n((()=>[m(B,{class:"th col-date"},{default:n((()=>[f("日期")])),_:1}),m(B,{class:"th col-bottle"},{default:n((()=>[f("出瓶号")])),_:1}),m(B,{class:"th col-bottle"},{default:n((()=>[f("回瓶号")])),_:1}),m(B,{class:"th col-deposit"},{default:n((()=>[f("存瓶号")])),_:1}),m(B,{class:"th col-weight"},{default:n((()=>[f("出瓶净重")])),_:1}),m(B,{class:"th col-weight"},{default:n((()=>[f("回瓶净重")])),_:1}),m(B,{class:"th col-price"},{default:n((()=>[f("单价")])),_:1}),m(B,{class:"th col-amount"},{default:n((()=>[f("应收")])),_:1}),m(B,{class:"th col-amount"},{default:n((()=>[f("实收")])),_:1}),m(B,{class:"th col-amount"},{default:n((()=>[f("抹零")])),_:1}),m(B,{class:"th col-amount"},{default:n((()=>[f("未收")])),_:1}),m(B,{class:"th col-delivery"},{default:n((()=>[f("配送员")])),_:1}),m(B,{class:"th col-car"},{default:n((()=>[f("车号")])),_:1}),m(B,{class:"th col-status"},{default:n((()=>[f("收款状态")])),_:1}),m(B,{class:"th col-op"},{default:n((()=>[f("详情")])),_:1})])),_:1}),(r(!0),y(b,null,g(o.records,(e=>(r(),u(N,{key:e._id,class:h(["table-row",{"row-unpaid":e.unpaid>0,"row-partial":e.amount_received>0&&e.unpaid>0}])},{default:n((()=>[m(B,{class:"td col-date"},{default:n((()=>[f(_(e.date||"-"),1)])),_:2},1024),m(N,{class:"td col-bottle"},{default:n((()=>[(r(!0),y(b,null,g(s.getBottleList(e,"out").slice(0,2),((t,a)=>(r(),y(b,{key:"o"+a},[m(B,{class:"td-link",onClick:x((e=>s.goBottleDetail(t)),["stop"])},{default:n((()=>[f(_(t),1)])),_:2},1032,["onClick"]),a<s.getBottleList(e,"out").slice(0,2).length-1?(r(),u(B,{key:0},{default:n((()=>[f(" / ")])),_:1})):p("",!0)],64)))),128)),s.getBottleList(e,"out").length>2?(r(),u(B,{key:0,class:"td-link",onClick:x((t=>s.onBottleCellClick(e,"out")),["stop"])},{default:n((()=>[f(" / … ")])),_:2},1032,["onClick"])):p("",!0),0===s.getBottleList(e,"out").length?(r(),u(B,{key:1},{default:n((()=>[f("-")])),_:1})):p("",!0)])),_:2},1024),m(N,{class:"td col-bottle"},{default:n((()=>[(r(!0),y(b,null,g(s.getBottleList(e,"back").slice(0,2),((t,a)=>(r(),y(b,{key:"b"+a},[m(B,{class:"td-link",onClick:x((e=>s.goBottleDetail(t)),["stop"])},{default:n((()=>[f(_(t),1)])),_:2},1032,["onClick"]),a<s.getBottleList(e,"back").slice(0,2).length-1?(r(),u(B,{key:0},{default:n((()=>[f(" / ")])),_:1})):p("",!0)],64)))),128)),s.getBottleList(e,"back").length>2?(r(),u(B,{key:0,class:"td-link",onClick:x((t=>s.onBottleCellClick(e,"back")),["stop"])},{default:n((()=>[f(" / … ")])),_:2},1032,["onClick"])):p("",!0),0===s.getBottleList(e,"back").length?(r(),u(B,{key:1},{default:n((()=>[f("-")])),_:1})):p("",!0)])),_:2},1024),m(N,{class:"td col-deposit"},{default:n((()=>[(r(!0),y(b,null,g(s.getBottleList(e,"deposit").slice(0,2),((t,a)=>(r(),y(b,{key:"d"+a},[m(B,{class:"td-link",onClick:x((e=>s.goBottleDetail(t)),["stop"])},{default:n((()=>[f(_(t),1)])),_:2},1032,["onClick"]),a<s.getBottleList(e,"deposit").slice(0,2).length-1?(r(),u(B,{key:0},{default:n((()=>[f(" / ")])),_:1})):p("",!0)],64)))),128)),s.getBottleList(e,"deposit").length>2?(r(),u(B,{key:0,class:"td-link",onClick:x((t=>s.onBottleCellClick(e,"deposit")),["stop"])},{default:n((()=>[f(" / … ")])),_:2},1032,["onClick"])):p("",!0),0===s.getBottleList(e,"deposit").length?(r(),u(B,{key:1},{default:n((()=>[f("-")])),_:1})):p("",!0)])),_:2},1024),m(B,{class:"td col-weight"},{default:n((()=>[f(_(s.formatNumber(e.out_net_total??e.net_weight_out))+"kg ",1)])),_:2},1024),m(B,{class:"td col-weight"},{default:n((()=>[f(_(s.formatNumber(e.back_net_total??e.net_weight_back))+"kg ",1)])),_:2},1024),m(B,{class:"td col-price"},{default:n((()=>[null!=e.unit_price?(r(),u(B,{key:0},{default:n((()=>[f(_(Number(e.unit_price).toFixed(2))+" 元/"+_("bottle"===e.price_unit?"瓶":"m3"===e.price_unit?"m³":"kg"),1)])),_:2},1024)):(r(),u(B,{key:1},{default:n((()=>[f("-")])),_:1}))])),_:2},1024),m(B,{class:"td col-amount"},{default:n((()=>[f(_(e.amount|t.money),1)])),_:2},1024),m(B,{class:"td col-amount"},{default:n((()=>[f(_(e.amount_received|t.money),1)])),_:2},1024),m(B,{class:"td col-amount"},{default:n((()=>[f(_(e.write_off|t.money),1)])),_:2},1024),m(B,{class:h(["td col-amount",e.unpaid>0?"text-danger":"text-normal"])},{default:n((()=>[f(_(e.unpaid|t.money),1)])),_:2},1032,["class"]),m(B,{class:"td col-delivery"},{default:n((()=>[f(_(e.delivery_man||"—"),1)])),_:2},1024),m(B,{class:"td col-car"},{default:n((()=>[f(_(e.car_no||"—"),1)])),_:2},1024),m(B,{class:"td col-status"},{default:n((()=>[f(_(e.payment_status||"—"),1)])),_:2},1024),m(N,{class:"td col-op"},{default:n((()=>[m(B,{class:"td-link",onClick:t=>s.goSaleDetail(e)},{default:n((()=>[f("详情")])),_:2},1032,["onClick"])])),_:2},1024)])),_:2},1032,["class"])))),128))])),_:1})),o.hasFlowRecords&&s.flowRecords.length?(r(),u(N,{key:4,class:"card card-table card-flow"},{default:n((()=>[m(N,{class:"card-header"},{default:n((()=>[m(B,{class:"card-title"},{default:n((()=>[f("流量结算明细")])),_:1}),m(B,{class:"card-sub"},{default:n((()=>[f("仅展示单价为元/m³的抄表记录")])),_:1})])),_:1}),m(N,{class:"table-wrapper"},{default:n((()=>[m(N,{class:"table-header"},{default:n((()=>[m(B,{class:"th col-date"},{default:n((()=>[f("抄表日期")])),_:1}),m(B,{class:"th col-flow-index"},{default:n((()=>[f("上次表数")])),_:1}),m(B,{class:"th col-flow-index"},{default:n((()=>[f("本次表数")])),_:1}),m(B,{class:"th col-flow-volume"},{default:n((()=>[f("用气量(m³)")])),_:1}),m(B,{class:"th col-flow-volume"},{default:n((()=>[f("理论用气量(m³)")])),_:1}),m(B,{class:"th col-flow-amount"},{default:n((()=>[f("单价")])),_:1}),m(B,{class:"th col-flow-amount"},{default:n((()=>[f("理论应收")])),_:1}),m(B,{class:"th col-flow-amount"},{default:n((()=>[f("实收")])),_:1}),m(B,{class:"th col-flow-amount"},{default:n((()=>[f("抹零")])),_:1}),m(B,{class:"th col-flow-amount"},{default:n((()=>[f("未收")])),_:1}),m(B,{class:"th col-flow-status"},{default:n((()=>[f("状态")])),_:1})])),_:1}),(r(!0),y(b,null,g(s.flowRecords,(e=>(r(),u(N,{key:"f"+e._id,class:"table-row"},{default:n((()=>[m(B,{class:"td col-date"},{default:n((()=>[f(_(e.date),1)])),_:2},1024),m(B,{class:"td col-flow-index"},{default:n((()=>[f(_(s.formatNumber(e.flow_index_prev)),1)])),_:2},1024),m(B,{class:"td col-flow-index"},{default:n((()=>[f(_(s.formatNumber(e.flow_index_curr)),1)])),_:2},1024),m(B,{class:"td col-flow-volume"},{default:n((()=>[f(_(s.formatNumber(e.flow_volume_m3)),1)])),_:2},1024),m(B,{class:"td col-flow-volume"},{default:n((()=>[f(_(s.formatNumber(e.flow_theoretical_volume_m3)),1)])),_:2},1024),m(B,{class:"td col-flow-amount"},{default:n((()=>{var t;return[f(_(null==(t=e._flow_unit_price)?void 0:t.toFixed(2)),1)]})),_:2},1024),m(B,{class:"td col-flow-amount"},{default:n((()=>[f(_(e._flow_should|t.money),1)])),_:2},1024),m(B,{class:"td col-flow-amount"},{default:n((()=>[f(_(e._flow_received|t.money),1)])),_:2},1024),m(B,{class:"td col-flow-amount"},{default:n((()=>[f(_(e._flow_write_off|t.money),1)])),_:2},1024),m(B,{class:h(["td col-flow-amount",e._flow_unpaid>0?"text-danger":"text-normal"])},{default:n((()=>[f(_(e._flow_unpaid|t.money),1)])),_:2},1032,["class"]),m(B,{class:"td col-flow-status"},{default:n((()=>[f(_(e.flow_payment_status||e.payment_status||"—"),1)])),_:2},1024)])),_:2},1024)))),128))])),_:1})])),_:1})):p("",!0)])),_:1}),!o.loading&&o.records.length>0?(r(),u(N,{key:0,class:"footer-note"},{default:n((()=>[m(B,{class:"footer-text"},{default:n((()=>[f(" 共 "+_(o.records.length)+" 条，应收 "+_(s.stats.totalShould|t.money)+" 元， 实收 "+_(s.stats.totalReceived|t.money)+" 元，抹零 "+_(s.stats.totalWriteOff|t.money)+" 元， 未收 ",1),m(B,{class:h(s.stats.totalUnpaid>0?"text-danger":"text-normal")},{default:n((()=>[f(_(s.stats.totalUnpaid|t.money),1)])),_:1},8,["class"]),f(" 元。 ")])),_:1})])),_:1})):p("",!0)])),_:1})])),_:1})}],["__scopeId","data-v-4ef1af10"]]);export{D as default};
