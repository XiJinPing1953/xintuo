import{a as t,t as e,s as a,h as l,l as s,v as o,c as i,w as r,i as n,o as u,d,e as c,f as m,q as f,x as _,y as h,F as p,g,j as w,z as b,I as y,D as k}from"./index-B6DdPhlT.js";import{B as N}from"./BackToDashboardBar.0jhbkRhX.js";import{f as C,h as v,d as x,j as V,_ as L,i as F,e as D,g as E}from"./_plugin-vue_export-helper.Dda_PF8M.js";async function A(s,o,i={},r={}){var n;const u=C(),d=v(),{showLoading:c=!1,loadingText:m="加载中...",showErrorToast:f=!0,silentAuthRedirect:_=!1}=r;try{if(!u)return _||x("请先登录"),{code:401,msg:"未登录"};if(V(d))return _||x("登录已过期，请重新登录"),{code:401,msg:"登录已过期"};c&&t({title:m,mask:!0});const r=(await e.callFunction({name:s,data:{action:o,token:u,data:i}})).result||{};if(401===r.code||"NO_LOGIN"===r.code||"AUTH_FAILED"===r.code){const t=r.msg||"登录已过期，请重新登录";return _||x(t),{code:401,msg:t}}return 0!==r.code&&f&&a({title:r.msg||"请求失败，请稍后再试",icon:"none"}),r}catch(h){if(console.error("callApi error:",h),f){const t=(null==(n=null==h?void 0:h.errMsg)?void 0:n.includes("timeout"))?"请求超时，请检查网络后重试":"请求异常，请稍后再试";a({title:t,icon:"none"})}return{code:-1,msg:"请求异常"}}finally{c&&l()}}const U=L({components:{BackToDashboardBar:N},data:()=>({loading:!1,exporting:!1,list:[],filters:{date_from:"",date_to:"",keyword:""},showEdit:!1,saving:!1,form:{_id:"",date:"",product_name:"LNG",load_weight:"",gross_weight:"",tare_weight:"",net_weight:"",loss_amount:"",unit_price:"",amount:"",plate_no:"",tanker_no:"",sender:"",factory:"",remark:""},userInfo:{}}),computed:{stats(){let t=0,e=0,a=0;return this.list.forEach((l=>{t+=Number(l.net_weight)||0;const s=null!=l.loss_amount?Number(l.loss_amount)||0:Number(l.load_weight||0)-Number(l.net_weight||0);e+=s,a+=Number(l.amount)||0})),{totalNet:t,totalLoss:e,totalAmount:a}},isAdmin(){return F(this.userInfo)}},watch:{"form.load_weight"(){this.autoCalcLoss()},"form.net_weight"(){this.autoCalcLoss()}},onLoad(){if(!D())return;this.userInfo=E()||{};const t=new Date,e=this.formatDate(t),a=new Date(t.getTime()-5184e5),l=this.formatDate(a);this.filters.date_from=l,this.filters.date_to=e,this.loadList()},onShow(){D()},methods:{format2(t){const e=Number(t);return Number.isNaN(e)?"0.00":e.toFixed(2)},formatDate:t=>`${t.getFullYear()}-${String(t.getMonth()+1).padStart(2,"0")}-${String(t.getDate()).padStart(2,"0")}`,onDateFromChange(t){this.filters.date_from=t.detail.value},onDateToChange(t){this.filters.date_to=t.detail.value},resetFilter(){this.filters.keyword="";const t=new Date,e=this.formatDate(t),a=new Date(t.getTime()-5184e5),l=this.formatDate(a);this.filters.date_from=l,this.filters.date_to=e,this.loadList()},async loadList(){this.loading=!0;try{const t=await A("crm-gas-in","list",{date_from:this.filters.date_from||void 0,date_to:this.filters.date_to||void 0,keyword:this.filters.keyword||void 0});if(0!==t.code)return a({title:t.msg||"加载失败",icon:"none"}),void(this.list=[]);const e=t=>Number(t||0)/1e3,l=t.data||t.list||[];this.list=l.map((t=>{const a=e(t.load_weight),l=e(t.net_weight),s=null!=t.loss_amount?e(t.loss_amount):Number((a-l).toFixed(3));return{...t,load_weight:a,gross_weight:e(t.gross_weight),tare_weight:e(t.tare_weight),net_weight:l,loss_amount:s}}))}catch(t){console.error("loadList error",t),a({title:"加载异常",icon:"none"}),this.list=[]}finally{this.loading=!1}},handleExport(){if(!this.exporting){if(!this.isAdmin)return a({title:"当前账号无权限导出台账",icon:"none"});if(this.list.length){this.exporting=!0;try{const t=[["日期","品名","装车重量(吨)","毛重(吨)","皮重(吨)","净重(吨)","亏损(吨)","单价(元/吨)","金额(元)","车牌","罐车号","送货人员","液厂","备注"],...this.list.map((t=>[t.date||"",t.product_name||"LNG",this.format2(t.load_weight),this.format2(t.gross_weight),this.format2(t.tare_weight),this.format2(t.net_weight),this.format2(t.loss_amount),this.format2(t.unit_price),this.format2(t.amount),t.plate_no||"",t.tanker_no||"",t.sender||"",t.factory||"",(t.remark||"").replace(/\n/g," ")]))],e="\ufeff"+t.map((t=>t.map((t=>`"${String(t).replace(/"/g,'""')}"`)).join(","))).join("\n"),l=new Blob([e],{type:"text/csv;charset=utf-8;"}),s=URL.createObjectURL(l),o=document.createElement("a"),i=this.filters.date_from||"",r=this.filters.date_to||"";o.href=s,o.download=`天然气入库台账_${i}_${r}.csv`,document.body.appendChild(o),o.click(),document.body.removeChild(o),URL.revokeObjectURL(s),a({title:"已导出 CSV",icon:"success"})}catch(t){console.error(t),a({title:"导出失败",icon:"none"})}finally{this.exporting=!1}}else a({title:"当前没有可导出的数据",icon:"none"})}},openEdit(t){if(!this.isAdmin)return a({title:"当前账号无权限新增/编辑入库记录",icon:"none"});this.form=t?{_id:t._id,date:t.date||"",product_name:t.product_name||"LNG",load_weight:null!=t.load_weight?String(t.load_weight):"",gross_weight:null!=t.gross_weight?String(t.gross_weight):"",tare_weight:null!=t.tare_weight?String(t.tare_weight):"",net_weight:null!=t.net_weight?String(t.net_weight):"",loss_amount:null!=t.loss_amount?String(t.loss_amount):"",unit_price:null!=t.unit_price?String(t.unit_price):"",amount:null!=t.amount?String(t.amount):"",plate_no:t.plate_no||"",tanker_no:t.tanker_no||"",sender:t.sender||"",factory:t.factory||"",remark:t.remark||""}:{_id:"",date:this.filters.date_to||this.formatDate(new Date),product_name:"LNG",load_weight:"",gross_weight:"",tare_weight:"",net_weight:"",loss_amount:"",unit_price:"",amount:"",plate_no:"",tanker_no:"",sender:"",factory:"",remark:""},this.autoCalcLoss(),this.showEdit=!0},closeEdit(){this.saving||(this.showEdit=!1)},onFormDateChange(t){this.form.date=t.detail.value},autoCalcNet(){const t=Number(this.form.gross_weight)||0,e=Number(this.form.tare_weight)||0;if(t&&e){const a=t-e;this.form.net_weight=a?a.toFixed(2):"",this.autoCalcLoss(),this.autoCalcAmount()}},autoCalcLoss(){const t=Number(this.form.load_weight),e=Number(this.form.net_weight);if(!Number.isFinite(t)||!Number.isFinite(e)||!t||e<0)return void(this.form.loss_amount="");const a=t-e;this.form.loss_amount=Number.isFinite(a)?a.toFixed(3):""},autoCalcAmount(){const t=Number(this.form.net_weight)||0,e=Number(this.form.unit_price)||0;if(t&&e){const a=t*e;this.form.amount=a.toFixed(2)}},normalizeTonNumber(t,e,{required:l=!1}={}){const s=null!=t?String(t).trim():"";if(!s)return l?(a({title:`请填写${e}`,icon:"none"}),!1):null;const o=Number(s);return!Number.isFinite(o)||o<0?(a({title:`${e}需为非负数字`,icon:"none"}),!1):Number(o.toFixed(3))},normalizePrice(t,e,{required:l=!1}={}){const s=null!=t?String(t).trim():"";if(!s)return l?(a({title:`请填写${e}`,icon:"none"}),!1):null;const o=Number(s);return!Number.isFinite(o)||o<0?(a({title:`${e}需为非负数字`,icon:"none"}),!1):Number(o.toFixed(2))},async submitEdit(){if(this.saving)return;if(!this.isAdmin)return a({title:"当前账号无权限保存入库记录",icon:"none"});if(!this.form.date)return a({title:"请选择日期",icon:"none"});const t=this.normalizeTonNumber(this.form.load_weight,"装车重量");if(!1===t)return;const e=this.normalizeTonNumber(this.form.gross_weight,"毛重",{required:!0});if(!1===e)return;const l=this.normalizeTonNumber(this.form.tare_weight,"皮重",{required:!0});if(!1===l)return;let s=this.normalizeTonNumber(this.form.net_weight,"净重");if(!1===s)return;if(null===s&&null!=e&&null!=l&&(s=Number((e-l).toFixed(3))),null!=s&&null!=e&&null!=l&&s<0)return a({title:"净重不能为负，请检查毛重/皮重",icon:"none"});const o=this.normalizePrice(this.form.unit_price,"单价",{required:!0});if(!1===o)return;let i=this.normalizePrice(this.form.amount,"金额");if(!1===i)return;null===i&&null!=s&&(i=Number((s*o).toFixed(2)));const r=null!=t&&null!=s?Number((t-s).toFixed(3)):null,n=t=>null==t?0:Math.round(1e3*t),u={date:this.form.date,product_name:this.form.product_name||"LNG",load_weight:n(t),gross_weight:n(e),tare_weight:n(l),net_weight:n(s),loss_amount:n(r),unit_price:o,amount:null==i?0:i,plate_no:(this.form.plate_no||"").trim(),tanker_no:(this.form.tanker_no||"").trim(),sender:(this.form.sender||"").trim(),factory:(this.form.factory||"").trim(),remark:(this.form.remark||"").trim()},d=this.form._id?"update":"create";this.form._id&&(u.id=this.form._id),this.saving=!0;const c=await A("crm-gas-in",d,u,{showLoading:!0,loadingText:"保存中…"});this.saving=!1,0===c.code?(a({title:"保存成功",icon:"success"}),this.showEdit=!1,this.loadList()):a({title:c.msg||"保存失败",icon:"none"})},confirmRemove(t){if(!this.isAdmin)return a({title:"当前账号无权限删除入库记录",icon:"none"});s({title:"删除确认",content:`确定要删除 ${t.date||""} 的入库记录吗？`,confirmColor:"#e11d48",success:async e=>{if(!e.confirm)return;const l=await A("crm-gas-in","remove",{id:t._id},{showLoading:!0,loadingText:"删除中…"});0===l.code?(a({title:"已删除",icon:"success"}),this.loadList()):a({title:l.msg||"删除失败",icon:"none"})}})}}},[["render",function(t,e,a,l,s,N){const C=o("BackToDashboardBar"),v=g,x=n,V=w,L=b,F=y,D=k;return u(),i(x,{class:"page"},{default:r((()=>[d(x,{class:"inner"},{default:r((()=>[d(C,{"back-to":"/pages/dashboard/index",text:"返回工作台"}),d(x,{class:"page-header"},{default:r((()=>[d(x,{class:"page-header-left"},{default:r((()=>[d(x,{class:"page-icon"},{default:r((()=>[d(v,{class:"page-icon-text"},{default:r((()=>[c("气")])),_:1})])),_:1}),d(x,{class:"page-header-text"},{default:r((()=>[d(v,{class:"page-title"},{default:r((()=>[c("天然气入库台账")])),_:1}),d(v,{class:"page-sub"},{default:r((()=>[c(" 记录每车罐装天然气的入库净重、亏损和金额 ")])),_:1})])),_:1})])),_:1}),d(x,{class:"page-header-right"},{default:r((()=>[N.isAdmin?(u(),i(V,{key:0,class:"btn-soft btn-export",onClick:N.handleExport,disabled:s.exporting},{default:r((()=>[c(m(s.exporting?"导出中…":"导出 CSV / Excel"),1)])),_:1},8,["onClick","disabled"])):f("",!0),N.isAdmin?(u(),i(V,{key:1,class:"btn-primary btn-add",onClick:e[0]||(e[0]=t=>N.openEdit(null))},{default:r((()=>[c(" + 新增入库记录 ")])),_:1})):f("",!0)])),_:1})])),_:1}),d(x,{class:"card card-filter"},{default:r((()=>[d(x,{class:"filter-row"},{default:r((()=>[d(x,{class:"filter-item date-from"},{default:r((()=>[d(v,{class:"label"},{default:r((()=>[c("开始日期")])),_:1}),d(L,{mode:"date",value:s.filters.date_from,onChange:N.onDateFromChange},{default:r((()=>[d(x,{class:"input-wrapper"},{default:r((()=>[d(x,{class:"picker"},{default:r((()=>[d(v,null,{default:r((()=>[c(m(s.filters.date_from||"选择开始日期"),1)])),_:1})])),_:1})])),_:1})])),_:1},8,["value","onChange"])])),_:1}),d(x,{class:"filter-item date-to"},{default:r((()=>[d(v,{class:"label"},{default:r((()=>[c("结束日期")])),_:1}),d(L,{mode:"date",value:s.filters.date_to,onChange:N.onDateToChange},{default:r((()=>[d(x,{class:"input-wrapper"},{default:r((()=>[d(x,{class:"picker"},{default:r((()=>[d(v,null,{default:r((()=>[c(m(s.filters.date_to||"选择结束日期"),1)])),_:1})])),_:1})])),_:1})])),_:1},8,["value","onChange"])])),_:1}),d(x,{class:"filter-item keyword"},{default:r((()=>[d(v,{class:"label"},{default:r((()=>[c("关键词")])),_:1}),d(x,{class:"input-wrapper"},{default:r((()=>[d(F,{class:"input",modelValue:s.filters.keyword,"onUpdate:modelValue":e[1]||(e[1]=t=>s.filters.keyword=t),placeholder:"按车牌 / 罐车号 / 液厂搜索","confirm-type":"search",onConfirm:N.loadList},null,8,["modelValue","onConfirm"])])),_:1})])),_:1}),d(x,{class:"filter-item btns"},{default:r((()=>[d(V,{class:"btn-soft",onClick:N.resetFilter},{default:r((()=>[c("重置")])),_:1},8,["onClick"]),d(V,{class:"btn-primary btn-query",onClick:N.loadList},{default:r((()=>[c(" 查询 ")])),_:1},8,["onClick"])])),_:1})])),_:1})])),_:1}),s.list.length?(u(),i(x,{key:0,class:"card card-summary"},{default:r((()=>[d(x,{class:"summary-row"},{default:r((()=>[d(x,{class:"summary-item"},{default:r((()=>[d(v,{class:"summary-label"},{default:r((()=>[c("净重合计")])),_:1}),d(x,{class:"summary-value-row"},{default:r((()=>[d(v,{class:"summary-value"},{default:r((()=>[c(m(N.format2(N.stats.totalNet)),1)])),_:1}),d(v,{class:"summary-unit"},{default:r((()=>[c("吨")])),_:1})])),_:1})])),_:1}),d(x,{class:"summary-item"},{default:r((()=>[d(v,{class:"summary-label"},{default:r((()=>[c("亏损合计")])),_:1}),d(x,{class:"summary-value-row"},{default:r((()=>[d(v,{class:"summary-value"},{default:r((()=>[c(m(N.format2(N.stats.totalLoss)),1)])),_:1}),d(v,{class:"summary-unit"},{default:r((()=>[c("吨")])),_:1})])),_:1})])),_:1}),d(x,{class:"summary-item"},{default:r((()=>[d(v,{class:"summary-label"},{default:r((()=>[c("金额合计")])),_:1}),d(x,{class:"summary-value-row"},{default:r((()=>[d(v,{class:"summary-value"},{default:r((()=>[c(m(N.format2(N.stats.totalAmount)),1)])),_:1}),d(v,{class:"summary-unit"},{default:r((()=>[c("元")])),_:1})])),_:1})])),_:1}),d(x,{class:"summary-item"},{default:r((()=>[d(v,{class:"summary-label"},{default:r((()=>[c("记录条数")])),_:1}),d(x,{class:"summary-value-row"},{default:r((()=>[d(v,{class:"summary-value"},{default:r((()=>[c(m(s.list.length),1)])),_:1}),d(v,{class:"summary-unit"},{default:r((()=>[c("条")])),_:1})])),_:1})])),_:1})])),_:1})])),_:1})):f("",!0),d(x,{class:"card"},{default:r((()=>[d(x,{class:"card-header"},{default:r((()=>[d(v,{class:"card-title"},{default:r((()=>[c("入库记录")])),_:1}),d(v,{class:"card-sub"},{default:r((()=>[c(" 按日期倒序展示，可编辑或删除单条记录 ")])),_:1})])),_:1}),d(x,{class:"card-body"},{default:r((()=>[s.loading?(u(),i(x,{key:0,class:"list-empty"},{default:r((()=>[d(v,{class:"empty-text"},{default:r((()=>[c("加载中…")])),_:1})])),_:1})):s.list.length?(u(),i(x,{key:2,class:"table"},{default:r((()=>[d(x,{class:"table-header"},{default:r((()=>[d(v,{class:"th col-date"},{default:r((()=>[c("日期")])),_:1}),d(v,{class:"th col-text"},{default:r((()=>[c("品名")])),_:1}),d(v,{class:"th col-num"},{default:r((()=>[c("装车")])),_:1}),d(v,{class:"th col-num"},{default:r((()=>[c("毛重")])),_:1}),d(v,{class:"th col-num"},{default:r((()=>[c("皮重")])),_:1}),d(v,{class:"th col-num"},{default:r((()=>[c("净重")])),_:1}),d(v,{class:"th col-num"},{default:r((()=>[c("亏损")])),_:1}),d(v,{class:"th col-num"},{default:r((()=>[c("单价")])),_:1}),d(v,{class:"th col-num"},{default:r((()=>[c("金额")])),_:1}),d(v,{class:"th col-text"},{default:r((()=>[c("车牌")])),_:1}),d(v,{class:"th col-text"},{default:r((()=>[c("罐车号")])),_:1}),d(v,{class:"th col-text"},{default:r((()=>[c("送货人员")])),_:1}),d(v,{class:"th col-text"},{default:r((()=>[c("液厂")])),_:1}),d(v,{class:"th col-op"},{default:r((()=>[c("操作")])),_:1})])),_:1}),(u(!0),_(p,null,h(s.list,(t=>(u(),i(x,{key:t._id,class:"table-row"},{default:r((()=>[d(v,{class:"td col-date"},{default:r((()=>[c(m(t.date||"-"),1)])),_:2},1024),d(v,{class:"td col-text"},{default:r((()=>[c(m(t.product_name||"LNG"),1)])),_:2},1024),d(v,{class:"td col-num"},{default:r((()=>[c(m(N.format2(t.load_weight)),1)])),_:2},1024),d(v,{class:"td col-num"},{default:r((()=>[c(m(N.format2(t.gross_weight)),1)])),_:2},1024),d(v,{class:"td col-num"},{default:r((()=>[c(m(N.format2(t.tare_weight)),1)])),_:2},1024),d(v,{class:"td col-num"},{default:r((()=>[c(m(N.format2(t.net_weight)),1)])),_:2},1024),d(v,{class:"td col-num"},{default:r((()=>[c(m(N.format2(t.loss_amount)),1)])),_:2},1024),d(v,{class:"td col-num"},{default:r((()=>[c(m(N.format2(t.unit_price)),1)])),_:2},1024),d(v,{class:"td col-num"},{default:r((()=>[c(m(N.format2(t.amount)),1)])),_:2},1024),d(v,{class:"td col-text"},{default:r((()=>[c(m(t.plate_no||"-"),1)])),_:2},1024),d(v,{class:"td col-text"},{default:r((()=>[c(m(t.tanker_no||"-"),1)])),_:2},1024),d(v,{class:"td col-text"},{default:r((()=>[c(m(t.sender||"-"),1)])),_:2},1024),d(v,{class:"td col-text"},{default:r((()=>[c(m(t.factory||"-"),1)])),_:2},1024),d(x,{class:"td col-op"},{default:r((()=>[N.isAdmin?(u(),_(p,{key:0},[d(v,{class:"op-link",onClick:e=>N.openEdit(t)},{default:r((()=>[c("编辑")])),_:2},1032,["onClick"]),d(v,{class:"op-link danger",onClick:e=>N.confirmRemove(t)},{default:r((()=>[c("删除")])),_:2},1032,["onClick"])],64)):(u(),i(v,{key:1,class:"op-link-disabled"},{default:r((()=>[c("-")])),_:1}))])),_:2},1024)])),_:2},1024)))),128))])),_:1})):(u(),i(x,{key:1,class:"list-empty"},{default:r((()=>[d(v,{class:"empty-text"},{default:r((()=>[c(" 当前条件下暂无入库记录，可以先点击右上角「新增入库记录」 ")])),_:1})])),_:1}))])),_:1})])),_:1}),s.showEdit?(u(),i(x,{key:1,class:"edit-mask"},{default:r((()=>[d(x,{class:"edit-dialog"},{default:r((()=>[d(x,{class:"edit-header"},{default:r((()=>[d(v,{class:"edit-title"},{default:r((()=>[c(m(s.form._id?"编辑入库记录":"新增入库记录"),1)])),_:1})])),_:1}),d(x,{class:"edit-body"},{default:r((()=>[d(x,{class:"form-row"},{default:r((()=>[d(x,{class:"form-item half"},{default:r((()=>[d(v,{class:"label"},{default:r((()=>[c("* 日期")])),_:1}),d(L,{mode:"date",value:s.form.date,onChange:N.onFormDateChange},{default:r((()=>[d(x,{class:"input-wrapper"},{default:r((()=>[d(x,{class:"picker"},{default:r((()=>[d(v,null,{default:r((()=>[c(m(s.form.date||"请选择日期"),1)])),_:1})])),_:1})])),_:1})])),_:1},8,["value","onChange"])])),_:1}),d(x,{class:"form-item half"},{default:r((()=>[d(v,{class:"label"},{default:r((()=>[c("品名")])),_:1}),d(x,{class:"input-wrapper"},{default:r((()=>[d(F,{class:"input",modelValue:s.form.product_name,"onUpdate:modelValue":e[2]||(e[2]=t=>s.form.product_name=t),placeholder:"例如：LNG"},null,8,["modelValue"])])),_:1})])),_:1})])),_:1}),d(x,{class:"form-row"},{default:r((()=>[d(x,{class:"form-item third"},{default:r((()=>[d(v,{class:"label"},{default:r((()=>[c("装车重量")])),_:1}),d(x,{class:"input-wrapper"},{default:r((()=>[d(F,{class:"input",modelValue:s.form.load_weight,"onUpdate:modelValue":e[3]||(e[3]=t=>s.form.load_weight=t),type:"digit",placeholder:"吨",onBlur:N.autoCalcNet},null,8,["modelValue","onBlur"])])),_:1})])),_:1}),d(x,{class:"form-item third"},{default:r((()=>[d(v,{class:"label"},{default:r((()=>[c("毛重")])),_:1}),d(x,{class:"input-wrapper"},{default:r((()=>[d(F,{class:"input",modelValue:s.form.gross_weight,"onUpdate:modelValue":e[4]||(e[4]=t=>s.form.gross_weight=t),type:"digit",placeholder:"吨",onBlur:N.autoCalcNet},null,8,["modelValue","onBlur"])])),_:1})])),_:1}),d(x,{class:"form-item third"},{default:r((()=>[d(v,{class:"label"},{default:r((()=>[c("皮重")])),_:1}),d(x,{class:"input-wrapper"},{default:r((()=>[d(F,{class:"input",modelValue:s.form.tare_weight,"onUpdate:modelValue":e[5]||(e[5]=t=>s.form.tare_weight=t),type:"digit",placeholder:"吨",onBlur:N.autoCalcNet},null,8,["modelValue","onBlur"])])),_:1})])),_:1})])),_:1}),d(x,{class:"form-row"},{default:r((()=>[d(x,{class:"form-item half"},{default:r((()=>[d(v,{class:"label"},{default:r((()=>[c("净重（可自动计算）")])),_:1}),d(x,{class:"input-wrapper"},{default:r((()=>[d(F,{class:"input",modelValue:s.form.net_weight,"onUpdate:modelValue":e[6]||(e[6]=t=>s.form.net_weight=t),type:"digit",placeholder:"毛重 - 皮重"},null,8,["modelValue"])])),_:1})])),_:1}),d(x,{class:"form-item half"},{default:r((()=>[d(v,{class:"label"},{default:r((()=>[c("亏损数量（自动=装车-净重）")])),_:1}),d(x,{class:"input-wrapper readonly-input"},{default:r((()=>[d(F,{class:"input",value:s.form.loss_amount,disabled:"",placeholder:"自动计算"},null,8,["value"])])),_:1})])),_:1})])),_:1}),d(x,{class:"form-row"},{default:r((()=>[d(x,{class:"form-item half"},{default:r((()=>[d(v,{class:"label"},{default:r((()=>[c("单价")])),_:1}),d(x,{class:"input-wrapper"},{default:r((()=>[d(F,{class:"input",modelValue:s.form.unit_price,"onUpdate:modelValue":e[7]||(e[7]=t=>s.form.unit_price=t),type:"digit",placeholder:"元/吨",onBlur:N.autoCalcAmount},null,8,["modelValue","onBlur"])])),_:1})])),_:1}),d(x,{class:"form-item half"},{default:r((()=>[d(v,{class:"label"},{default:r((()=>[c("金额")])),_:1}),d(x,{class:"input-wrapper"},{default:r((()=>[d(F,{class:"input",modelValue:s.form.amount,"onUpdate:modelValue":e[8]||(e[8]=t=>s.form.amount=t),type:"digit",placeholder:"可自动=净重×单价"},null,8,["modelValue"])])),_:1})])),_:1})])),_:1}),d(x,{class:"form-row"},{default:r((()=>[d(x,{class:"form-item half"},{default:r((()=>[d(v,{class:"label"},{default:r((()=>[c("车牌")])),_:1}),d(x,{class:"input-wrapper"},{default:r((()=>[d(F,{class:"input",modelValue:s.form.plate_no,"onUpdate:modelValue":e[9]||(e[9]=t=>s.form.plate_no=t),placeholder:"例如 冀A12345"},null,8,["modelValue"])])),_:1})])),_:1}),d(x,{class:"form-item half"},{default:r((()=>[d(v,{class:"label"},{default:r((()=>[c("罐车号")])),_:1}),d(x,{class:"input-wrapper"},{default:r((()=>[d(F,{class:"input",modelValue:s.form.tanker_no,"onUpdate:modelValue":e[10]||(e[10]=t=>s.form.tanker_no=t),placeholder:"液罐车编号"},null,8,["modelValue"])])),_:1})])),_:1})])),_:1}),d(x,{class:"form-row"},{default:r((()=>[d(x,{class:"form-item half"},{default:r((()=>[d(v,{class:"label"},{default:r((()=>[c("送货人员")])),_:1}),d(x,{class:"input-wrapper"},{default:r((()=>[d(F,{class:"input",modelValue:s.form.sender,"onUpdate:modelValue":e[11]||(e[11]=t=>s.form.sender=t),placeholder:"司机或送货人"},null,8,["modelValue"])])),_:1})])),_:1}),d(x,{class:"form-item half"},{default:r((()=>[d(v,{class:"label"},{default:r((()=>[c("液厂")])),_:1}),d(x,{class:"input-wrapper"},{default:r((()=>[d(F,{class:"input",modelValue:s.form.factory,"onUpdate:modelValue":e[12]||(e[12]=t=>s.form.factory=t),placeholder:"例如：XX 液厂"},null,8,["modelValue"])])),_:1})])),_:1})])),_:1}),d(x,{class:"form-item"},{default:r((()=>[d(v,{class:"label"},{default:r((()=>[c("备注")])),_:1}),d(D,{class:"textarea",modelValue:s.form.remark,"onUpdate:modelValue":e[13]||(e[13]=t=>s.form.remark=t),placeholder:"可记录票号、上下游结算说明等"},null,8,["modelValue"])])),_:1})])),_:1}),d(x,{class:"edit-footer"},{default:r((()=>[d(V,{class:"btn-soft",onClick:N.closeEdit,disabled:s.saving},{default:r((()=>[c(" 取消 ")])),_:1},8,["onClick","disabled"]),d(V,{class:"btn-primary",onClick:N.submitEdit,disabled:s.saving},{default:r((()=>[c(m(s.saving?"保存中…":"保存"),1)])),_:1},8,["onClick","disabled"])])),_:1})])),_:1})])),_:1})):f("",!0)])),_:1})])),_:1})}],["__scopeId","data-v-f2d23892"]]);export{U as default};
